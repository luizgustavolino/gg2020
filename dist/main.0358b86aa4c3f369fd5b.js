!function(o){var t={};function e(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return o[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=o,e.c=t,e.d=function(o,t,i){e.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:i})},e.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,t){if(1&t&&(o=e(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var s in o)e.d(i,s,function(t){return o[t]}.bind(null,s));return i},e.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(t,"a",t),t},e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},e.p="",e(e.s=1)}([function(o,t,e){!function(o){"use strict";function t(o,t){return void 0!==o?o:t}const e=3.14159265359,i=2/180*e;class s{constructor(o=0,t=0,e=0){this.major=0,this.minor=0,this.revision=0,this.major=o,this.minor=t,this.revision=e}toString(){return this.major+"."+this.minor+"."+this.revision}}const y=new s(2,3,2);function p(o,t){const e=[];for(let i=0;i<o;++i)e.push(t(i));return e}function f(o,t=0){const e=[];for(let i=0;i<o;++i)e.push(t);return e}const a=Math.abs,n=Math.min,C=Math.max;function r(o,t,e){return o<t?t:o>e?e:o}const m=isFinite;function l(o){return o*o}function h(o){return 1/Math.sqrt(o)}const _=Math.sqrt,c=Math.pow,u=Math.cos,d=Math.sin,g=Math.acos,x=Math.asin,b=Math.atan2;class B{constructor(o=0,t=0){this.x=o,this.y=t}Clone(){return new B(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(o,t){return this.x=o,this.y=t,this}Copy(o){return this.x=o.x,this.y=o.y,this}SelfAdd(o){return this.x+=o.x,this.y+=o.y,this}SelfAddXY(o,t){return this.x+=o,this.y+=t,this}SelfSub(o){return this.x-=o.x,this.y-=o.y,this}SelfSubXY(o,t){return this.x-=o,this.y-=t,this}SelfMul(o){return this.x*=o,this.y*=o,this}SelfMulAdd(o,t){return this.x+=o*t.x,this.y+=o*t.y,this}SelfMulSub(o,t){return this.x-=o*t.x,this.y-=o*t.y,this}Dot(o){return this.x*o.x+this.y*o.y}Cross(o){return this.x*o.y-this.y*o.x}Length(){const o=this.x,t=this.y;return Math.sqrt(o*o+t*t)}LengthSquared(){const o=this.x,t=this.y;return o*o+t*t}Normalize(){const o=this.Length();if(o>=1e-5){const t=1/o;this.x*=t,this.y*=t}return o}SelfNormalize(){const o=this.Length();if(o>=1e-5){const t=1/o;this.x*=t,this.y*=t}return this}SelfRotate(o){const t=Math.cos(o),e=Math.sin(o),i=this.x;return this.x=t*i-e*this.y,this.y=e*i+t*this.y,this}IsValid(){return isFinite(this.x)&&isFinite(this.y)}SelfCrossVS(o){const t=this.x;return this.x=o*this.y,this.y=-o*t,this}SelfCrossSV(o){const t=this.x;return this.x=-o*this.y,this.y=o*t,this}SelfMinV(o){return this.x=n(this.x,o.x),this.y=n(this.y,o.y),this}SelfMaxV(o){return this.x=C(this.x,o.x),this.y=C(this.y,o.y),this}SelfAbs(){return this.x=a(this.x),this.y=a(this.y),this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this}SelfSkew(){const o=this.x;return this.x=-this.y,this.y=o,this}static MakeArray(o){return p(o,o=>new B)}static AbsV(o,t){return t.x=a(o.x),t.y=a(o.y),t}static MinV(o,t,e){return e.x=n(o.x,t.x),e.y=n(o.y,t.y),e}static MaxV(o,t,e){return e.x=C(o.x,t.x),e.y=C(o.y,t.y),e}static ClampV(o,t,e,i){return i.x=r(o.x,t.x,e.x),i.y=r(o.y,t.y,e.y),i}static RotateV(o,t,e){const i=o.x,s=o.y,y=Math.cos(t),p=Math.sin(t);return e.x=y*i-p*s,e.y=p*i+y*s,e}static DotVV(o,t){return o.x*t.x+o.y*t.y}static CrossVV(o,t){return o.x*t.y-o.y*t.x}static CrossVS(o,t,e){const i=o.x;return e.x=t*o.y,e.y=-t*i,e}static CrossVOne(o,t){const e=o.x;return t.x=o.y,t.y=-e,t}static CrossSV(o,t,e){const i=t.x;return e.x=-o*t.y,e.y=o*i,e}static CrossOneV(o,t){const e=o.x;return t.x=-o.y,t.y=e,t}static AddVV(o,t,e){return e.x=o.x+t.x,e.y=o.y+t.y,e}static SubVV(o,t,e){return e.x=o.x-t.x,e.y=o.y-t.y,e}static MulSV(o,t,e){return e.x=t.x*o,e.y=t.y*o,e}static MulVS(o,t,e){return e.x=o.x*t,e.y=o.y*t,e}static AddVMulSV(o,t,e,i){return i.x=o.x+t*e.x,i.y=o.y+t*e.y,i}static SubVMulSV(o,t,e,i){return i.x=o.x-t*e.x,i.y=o.y-t*e.y,i}static AddVCrossSV(o,t,e,i){const s=e.x;return i.x=o.x-t*e.y,i.y=o.y+t*s,i}static MidVV(o,t,e){return e.x=.5*(o.x+t.x),e.y=.5*(o.y+t.y),e}static ExtVV(o,t,e){return e.x=.5*(t.x-o.x),e.y=.5*(t.y-o.y),e}static IsEqualToV(o,t){return o.x===t.x&&o.y===t.y}static DistanceVV(o,t){const e=o.x-t.x,i=o.y-t.y;return Math.sqrt(e*e+i*i)}static DistanceSquaredVV(o,t){const e=o.x-t.x,i=o.y-t.y;return e*e+i*i}static NegV(o,t){return t.x=-o.x,t.y=-o.y,t}}B.ZERO=new B(0,0),B.UNITX=new B(1,0),B.UNITY=new B(0,1),B.s_t0=new B,B.s_t1=new B,B.s_t2=new B,B.s_t3=new B;const v=new B(0,0);class S{constructor(o=0,t=0,e=0){this.x=o,this.y=t,this.z=e}Clone(){return new S(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}SetXYZ(o,t,e){return this.x=o,this.y=t,this.z=e,this}Copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}SelfAdd(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z,this}SelfAddXYZ(o,t,e){return this.x+=o,this.y+=t,this.z+=e,this}SelfSub(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this}SelfSubXYZ(o,t,e){return this.x-=o,this.y-=t,this.z-=e,this}SelfMul(o){return this.x*=o,this.y*=o,this.z*=o,this}static DotV3V3(o,t){return o.x*t.x+o.y*t.y+o.z*t.z}static CrossV3V3(o,t,e){const i=o.x,s=o.y,y=o.z,p=t.x,f=t.y,a=t.z;return e.x=s*a-y*f,e.y=y*p-i*a,e.z=i*f-s*p,e}}S.ZERO=new S(0,0,0),S.s_t0=new S;class A{constructor(){this.ex=new B(1,0),this.ey=new B(0,1)}Clone(){return(new A).Copy(this)}static FromVV(o,t){return(new A).SetVV(o,t)}static FromSSSS(o,t,e,i){return(new A).SetSSSS(o,t,e,i)}static FromAngle(o){return(new A).SetAngle(o)}SetSSSS(o,t,e,i){return this.ex.Set(o,e),this.ey.Set(t,i),this}SetVV(o,t){return this.ex.Copy(o),this.ey.Copy(t),this}SetAngle(o){const t=Math.cos(o),e=Math.sin(o);return this.ex.Set(t,e),this.ey.Set(-e,t),this}Copy(o){return this.ex.Copy(o.ex),this.ey.Copy(o.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}GetInverse(o){const t=this.ex.x,e=this.ey.x,i=this.ex.y,s=this.ey.y;let y=t*s-e*i;return 0!==y&&(y=1/y),o.ex.x=y*s,o.ey.x=-y*e,o.ex.y=-y*i,o.ey.y=y*t,o}Solve(o,t,e){const i=this.ex.x,s=this.ey.x,y=this.ex.y,p=this.ey.y;let f=i*p-s*y;return 0!==f&&(f=1/f),e.x=f*(p*o-s*t),e.y=f*(i*t-y*o),e}SelfAbs(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this}SelfInv(){return this.GetInverse(this),this}SelfAddM(o){return this.ex.SelfAdd(o.ex),this.ey.SelfAdd(o.ey),this}SelfSubM(o){return this.ex.SelfSub(o.ex),this.ey.SelfSub(o.ey),this}static AbsM(o,t){const e=o.ex,i=o.ey;return t.ex.x=a(e.x),t.ex.y=a(e.y),t.ey.x=a(i.x),t.ey.y=a(i.y),t}static MulMV(o,t,e){const i=o.ex,s=o.ey,y=t.x,p=t.y;return e.x=i.x*y+s.x*p,e.y=i.y*y+s.y*p,e}static MulTMV(o,t,e){const i=o.ex,s=o.ey,y=t.x,p=t.y;return e.x=i.x*y+i.y*p,e.y=s.x*y+s.y*p,e}static AddMM(o,t,e){const i=o.ex,s=o.ey,y=t.ex,p=t.ey;return e.ex.x=i.x+y.x,e.ex.y=i.y+y.y,e.ey.x=s.x+p.x,e.ey.y=s.y+p.y,e}static MulMM(o,t,e){const i=o.ex.x,s=o.ex.y,y=o.ey.x,p=o.ey.y,f=t.ex.x,a=t.ex.y,n=t.ey.x,C=t.ey.y;return e.ex.x=i*f+y*a,e.ex.y=s*f+p*a,e.ey.x=i*n+y*C,e.ey.y=s*n+p*C,e}static MulTMM(o,t,e){const i=o.ex.x,s=o.ex.y,y=o.ey.x,p=o.ey.y,f=t.ex.x,a=t.ex.y,n=t.ey.x,C=t.ey.y;return e.ex.x=i*f+s*a,e.ex.y=y*f+p*a,e.ey.x=i*n+s*C,e.ey.y=y*n+p*C,e}}A.IDENTITY=new A;class w{constructor(){this.ex=new S(1,0,0),this.ey=new S(0,1,0),this.ez=new S(0,0,1)}Clone(){return(new w).Copy(this)}SetVVV(o,t,e){return this.ex.Copy(o),this.ey.Copy(t),this.ez.Copy(e),this}Copy(o){return this.ex.Copy(o.ex),this.ey.Copy(o.ey),this.ez.Copy(o.ez),this}SetIdentity(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}SelfAddM(o){return this.ex.SelfAdd(o.ex),this.ey.SelfAdd(o.ey),this.ez.SelfAdd(o.ez),this}Solve33(o,t,e,i){const s=this.ex.x,y=this.ex.y,p=this.ex.z,f=this.ey.x,a=this.ey.y,n=this.ey.z,C=this.ez.x,r=this.ez.y,m=this.ez.z;let l=s*(a*m-n*r)+y*(n*C-f*m)+p*(f*r-a*C);return 0!==l&&(l=1/l),i.x=l*(o*(a*m-n*r)+t*(n*C-f*m)+e*(f*r-a*C)),i.y=l*(s*(t*m-e*r)+y*(e*C-o*m)+p*(o*r-t*C)),i.z=l*(s*(a*e-n*t)+y*(n*o-f*e)+p*(f*t-a*o)),i}Solve22(o,t,e){const i=this.ex.x,s=this.ey.x,y=this.ex.y,p=this.ey.y;let f=i*p-s*y;return 0!==f&&(f=1/f),e.x=f*(p*o-s*t),e.y=f*(i*t-y*o),e}GetInverse22(o){const t=this.ex.x,e=this.ey.x,i=this.ex.y,s=this.ey.y;let y=t*s-e*i;0!==y&&(y=1/y),o.ex.x=y*s,o.ey.x=-y*e,o.ex.z=0,o.ex.y=-y*i,o.ey.y=y*t,o.ey.z=0,o.ez.x=0,o.ez.y=0,o.ez.z=0}GetSymInverse33(o){let t=S.DotV3V3(this.ex,S.CrossV3V3(this.ey,this.ez,S.s_t0));0!==t&&(t=1/t);const e=this.ex.x,i=this.ey.x,s=this.ez.x,y=this.ey.y,p=this.ez.y,f=this.ez.z;o.ex.x=t*(y*f-p*p),o.ex.y=t*(s*p-i*f),o.ex.z=t*(i*p-s*y),o.ey.x=o.ex.y,o.ey.y=t*(e*f-s*s),o.ey.z=t*(s*i-e*p),o.ez.x=o.ex.z,o.ez.y=o.ey.z,o.ez.z=t*(e*y-i*i)}static MulM33V3(o,t,e){const i=t.x,s=t.y,y=t.z;return e.x=o.ex.x*i+o.ey.x*s+o.ez.x*y,e.y=o.ex.y*i+o.ey.y*s+o.ez.y*y,e.z=o.ex.z*i+o.ey.z*s+o.ez.z*y,e}static MulM33XYZ(o,t,e,i,s){return s.x=o.ex.x*t+o.ey.x*e+o.ez.x*i,s.y=o.ex.y*t+o.ey.y*e+o.ez.y*i,s.z=o.ex.z*t+o.ey.z*e+o.ez.z*i,s}static MulM33V2(o,t,e){const i=t.x,s=t.y;return e.x=o.ex.x*i+o.ey.x*s,e.y=o.ex.y*i+o.ey.y*s,e}static MulM33XY(o,t,e,i){return i.x=o.ex.x*t+o.ey.x*e,i.y=o.ex.y*t+o.ey.y*e,i}}w.IDENTITY=new w;class V{constructor(o=0){this.s=0,this.c=1,o&&(this.s=Math.sin(o),this.c=Math.cos(o))}Clone(){return(new V).Copy(this)}Copy(o){return this.s=o.s,this.c=o.c,this}SetAngle(o){return this.s=Math.sin(o),this.c=Math.cos(o),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(o){return o.x=this.c,o.y=this.s,o}GetYAxis(o){return o.x=-this.s,o.y=this.c,o}static MulRR(o,t,e){const i=o.c,s=o.s,y=t.c,p=t.s;return e.s=s*y+i*p,e.c=i*y-s*p,e}static MulTRR(o,t,e){const i=o.c,s=o.s,y=t.c,p=t.s;return e.s=i*p-s*y,e.c=i*y+s*p,e}static MulRV(o,t,e){const i=o.c,s=o.s,y=t.x,p=t.y;return e.x=i*y-s*p,e.y=s*y+i*p,e}static MulTRV(o,t,e){const i=o.c,s=o.s,y=t.x,p=t.y;return e.x=i*y+s*p,e.y=-s*y+i*p,e}}V.IDENTITY=new V;class M{constructor(){this.p=new B,this.q=new V}Clone(){return(new M).Copy(this)}Copy(o){return this.p.Copy(o.p),this.q.Copy(o.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(o,t){return this.p.Copy(o),this.q.Copy(t),this}SetPositionAngle(o,t){return this.p.Copy(o),this.q.SetAngle(t),this}SetPosition(o){return this.p.Copy(o),this}SetPositionXY(o,t){return this.p.Set(o,t),this}SetRotation(o){return this.q.Copy(o),this}SetRotationAngle(o){return this.q.SetAngle(o),this}GetPosition(){return this.p}GetRotation(){return this.q}GetRotationAngle(){return this.q.GetAngle()}GetAngle(){return this.q.GetAngle()}static MulXV(o,t,e){const i=o.q.c,s=o.q.s,y=t.x,p=t.y;return e.x=i*y-s*p+o.p.x,e.y=s*y+i*p+o.p.y,e}static MulTXV(o,t,e){const i=o.q.c,s=o.q.s,y=t.x-o.p.x,p=t.y-o.p.y;return e.x=i*y+s*p,e.y=-s*y+i*p,e}static MulXX(o,t,e){return V.MulRR(o.q,t.q,e.q),B.AddVV(V.MulRV(o.q,t.p,e.p),o.p,e.p),e}static MulTXX(o,t,e){return V.MulTRR(o.q,t.q,e.q),V.MulTRV(o.q,B.SubVV(t.p,o.p,e.p),e.p),e}}M.IDENTITY=new M;class I{constructor(){this.localCenter=new B,this.c0=new B,this.c=new B,this.a0=0,this.a=0,this.alpha0=0}Clone(){return(new I).Copy(this)}Copy(o){return this.localCenter.Copy(o.localCenter),this.c0.Copy(o.c0),this.c.Copy(o.c),this.a0=o.a0,this.a=o.a,this.alpha0=o.alpha0,this}GetTransform(o,t){const e=1-t;o.p.x=e*this.c0.x+t*this.c.x,o.p.y=e*this.c0.y+t*this.c.y;const i=e*this.a0+t*this.a;return o.q.SetAngle(i),o.p.SelfSub(V.MulRV(o.q,this.localCenter,B.s_t0)),o}Advance(o){const t=(o-this.alpha0)/(1-this.alpha0),e=1-t;this.c0.x=e*this.c0.x+t*this.c.x,this.c0.y=e*this.c0.y+t*this.c.y,this.a0=e*this.a0+t*this.a,this.alpha0=o}Normalize(){const o=6.28318530718*Math.floor(this.a0/6.28318530718);this.a0-=o,this.a-=o}}class P{constructor(o=.5,t=.5,e=.5,i=1){this.r=o,this.g=t,this.b=e,this.a=i}Clone(){return(new P).Copy(this)}Copy(o){return this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this}IsEqual(o){return this.r===o.r&&this.g===o.g&&this.b===o.b&&this.a===o.a}IsZero(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}Set(o,t,e,i=this.a){this.SetRGBA(o,t,e,i)}SetByteRGB(o,t,e){return this.r=o/255,this.g=t/255,this.b=e/255,this}SetByteRGBA(o,t,e,i){return this.r=o/255,this.g=t/255,this.b=e/255,this.a=i/255,this}SetRGB(o,t,e){return this.r=o,this.g=t,this.b=e,this}SetRGBA(o,t,e,i){return this.r=o,this.g=t,this.b=e,this.a=i,this}SelfAdd(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this.a+=o.a,this}Add(o,t){return t.r=this.r+o.r,t.g=this.g+o.g,t.b=this.b+o.b,t.a=this.a+o.a,t}SelfSub(o){return this.r-=o.r,this.g-=o.g,this.b-=o.b,this.a-=o.a,this}Sub(o,t){return t.r=this.r-o.r,t.g=this.g-o.g,t.b=this.b-o.b,t.a=this.a-o.a,t}SelfMul(o){return this.r*=o,this.g*=o,this.b*=o,this.a*=o,this}Mul(o,t){return t.r=this.r*o,t.g=this.g*o,t.b=this.b*o,t.a=this.a*o,t}Mix(o,t){P.MixColors(this,o,t)}static MixColors(o,t,e){const i=e*(t.r-o.r),s=e*(t.g-o.g),y=e*(t.b-o.b),p=e*(t.a-o.a);o.r+=i,o.g+=s,o.b+=y,o.a+=p,t.r-=i,t.g-=s,t.b-=y,t.a-=p}MakeStyleString(o=this.a){return P.MakeStyleString(this.r,this.g,this.b,o)}static MakeStyleString(o,t,e,i=1){return o*=255,t*=255,e*=255,i<1?`rgba(${o},${t},${e},${i})`:`rgb(${o},${t},${e})`}}var G;P.ZERO=new P(0,0,0,0),P.RED=new P(1,0,0),P.GREEN=new P(0,1,0),P.BLUE=new P(0,0,1),(G=o.b2DrawFlags||(o.b2DrawFlags={}))[G.e_none=0]="e_none",G[G.e_shapeBit=1]="e_shapeBit",G[G.e_jointBit=2]="e_jointBit",G[G.e_aabbBit=4]="e_aabbBit",G[G.e_pairBit=8]="e_pairBit",G[G.e_centerOfMassBit=16]="e_centerOfMassBit",G[G.e_particleBit=32]="e_particleBit",G[G.e_controllerBit=64]="e_controllerBit",G[G.e_all=63]="e_all";class D{constructor(){this.m_start=Date.now()}Reset(){return this.m_start=Date.now(),this}GetMilliseconds(){return Date.now()-this.m_start}}class L{constructor(o){this.m_stack=[],this.m_count=0,this.m_stack=p(o,o=>null),this.m_count=0}Reset(){return this.m_count=0,this}Push(o){this.m_stack[this.m_count]=o,this.m_count++}Pop(){this.m_count--;const o=this.m_stack[this.m_count];if(this.m_stack[this.m_count]=null,null===o)throw new Error;return o}GetCount(){return this.m_count}}class T{constructor(){this.m_buffer=B.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Copy(o){return o.m_vertices===o.m_buffer?(this.m_vertices=this.m_buffer,this.m_buffer[0].Copy(o.m_buffer[0]),this.m_buffer[1].Copy(o.m_buffer[1])):this.m_vertices=o.m_vertices,this.m_count=o.m_count,this.m_radius=o.m_radius,this}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(o,t){o.SetupDistanceProxy(this,t)}SetVerticesRadius(o,t,e){this.m_vertices=o,this.m_count=t,this.m_radius=e}GetSupport(o){let t=0,e=B.DotVV(this.m_vertices[0],o);for(let i=1;i<this.m_count;++i){const s=B.DotVV(this.m_vertices[i],o);s>e&&(t=i,e=s)}return t}GetSupportVertex(o){let t=0,e=B.DotVV(this.m_vertices[0],o);for(let i=1;i<this.m_count;++i){const s=B.DotVV(this.m_vertices[i],o);s>e&&(t=i,e=s)}return this.m_vertices[t]}GetVertexCount(){return this.m_count}GetVertex(o){return this.m_vertices[o]}}class F{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}}class R{constructor(){this.proxyA=new T,this.proxyB=new T,this.transformA=new M,this.transformB=new M,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}}class k{constructor(){this.pointA=new B,this.pointB=new B,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}}o.b2_gjkCalls=0,o.b2_gjkIters=0,o.b2_gjkMaxIters=0;class z{constructor(){this.wA=new B,this.wB=new B,this.w=new B,this.a=0,this.indexA=0,this.indexB=0}Copy(o){return this.wA.Copy(o.wA),this.wB.Copy(o.wB),this.w.Copy(o.w),this.a=o.a,this.indexA=o.indexA,this.indexB=o.indexB,this}}class q{constructor(){this.m_v1=new z,this.m_v2=new z,this.m_v3=new z,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}ReadCache(o,t,e,i,s){this.m_count=o.count;const y=this.m_vertices;for(let p=0;p<this.m_count;++p){const f=y[p];f.indexA=o.indexA[p],f.indexB=o.indexB[p];const a=t.GetVertex(f.indexA),n=i.GetVertex(f.indexB);M.MulXV(e,a,f.wA),M.MulXV(s,n,f.wB),B.SubVV(f.wB,f.wA,f.w),f.a=0}if(this.m_count>1){const t=o.metric,e=this.GetMetric();(e<.5*t||2*t<e||e<1e-5)&&(this.m_count=0)}if(0===this.m_count){const o=y[0];o.indexA=0,o.indexB=0;const p=t.GetVertex(0),f=i.GetVertex(0);M.MulXV(e,p,o.wA),M.MulXV(s,f,o.wB),B.SubVV(o.wB,o.wA,o.w),o.a=1,this.m_count=1}}WriteCache(o){o.metric=this.GetMetric(),o.count=this.m_count;const t=this.m_vertices;for(let e=0;e<this.m_count;++e)o.indexA[e]=t[e].indexA,o.indexB[e]=t[e].indexB}GetSearchDirection(o){switch(this.m_count){case 1:return B.NegV(this.m_v1.w,o);case 2:{const t=B.SubVV(this.m_v2.w,this.m_v1.w,o);return B.CrossVV(t,B.NegV(this.m_v1.w,B.s_t0))>0?B.CrossOneV(t,o):B.CrossVOne(t,o)}default:return o.SetZero()}}GetClosestPoint(o){switch(this.m_count){case 0:return o.SetZero();case 1:return o.Copy(this.m_v1.w);case 2:return o.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return o.SetZero()}}GetWitnessPoints(o,t){switch(this.m_count){case 0:break;case 1:o.Copy(this.m_v1.wA),t.Copy(this.m_v1.wB);break;case 2:o.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,o.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,t.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,t.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:t.x=o.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,t.y=o.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return B.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return B.CrossVV(B.SubVV(this.m_v2.w,this.m_v1.w,B.s_t0),B.SubVV(this.m_v3.w,this.m_v1.w,B.s_t1));default:return 0}}Solve2(){const o=this.m_v1.w,t=this.m_v2.w,e=B.SubVV(t,o,q.s_e12),i=-B.DotVV(o,e);if(i<=0)return this.m_v1.a=1,void(this.m_count=1);const s=B.DotVV(t,e);if(s<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const y=1/(s+i);this.m_v1.a=s*y,this.m_v2.a=i*y,this.m_count=2}Solve3(){const o=this.m_v1.w,t=this.m_v2.w,e=this.m_v3.w,i=B.SubVV(t,o,q.s_e12),s=B.DotVV(o,i),y=B.DotVV(t,i),p=-s,f=B.SubVV(e,o,q.s_e13),a=B.DotVV(o,f),n=B.DotVV(e,f),C=-a,r=B.SubVV(e,t,q.s_e23),m=B.DotVV(t,r),l=B.DotVV(e,r),h=-m,_=B.CrossVV(i,f),c=_*B.CrossVV(t,e),u=_*B.CrossVV(e,o),d=_*B.CrossVV(o,t);if(p<=0&&C<=0)return this.m_v1.a=1,void(this.m_count=1);if(y>0&&p>0&&d<=0){const o=1/(y+p);return this.m_v1.a=y*o,this.m_v2.a=p*o,void(this.m_count=2)}if(n>0&&C>0&&u<=0){const o=1/(n+C);return this.m_v1.a=n*o,this.m_v3.a=C*o,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(y<=0&&h<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(n<=0&&l<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(l>0&&h>0&&c<=0){const o=1/(l+h);return this.m_v2.a=l*o,this.m_v3.a=h*o,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const g=1/(c+u+d);this.m_v1.a=c*g,this.m_v2.a=u*g,this.m_v3.a=d*g,this.m_count=3}}q.s_e12=new B,q.s_e13=new B,q.s_e23=new B;const E=new q,J=[0,0,0],j=[0,0,0],N=new B,O=new B,U=new B,X=new B,W=new B;function Z(t,e,i){++o.b2_gjkCalls;const s=i.proxyA,y=i.proxyB,p=i.transformA,f=i.transformB,a=E;a.ReadCache(e,s,p,y,f);const n=a.m_vertices,r=J,m=j;let l=0,h=0;for(;h<20;){l=a.m_count;for(let o=0;o<l;++o)r[o]=n[o].indexA,m[o]=n[o].indexB;switch(a.m_count){case 1:break;case 2:a.Solve2();break;case 3:a.Solve3()}if(3===a.m_count)break;const t=a.GetSearchDirection(O);if(t.LengthSquared()<1e-5*1e-5)break;const e=n[a.m_count];e.indexA=s.GetSupport(V.MulTRV(p.q,B.NegV(t,B.s_t0),X)),M.MulXV(p,s.GetVertex(e.indexA),e.wA),e.indexB=y.GetSupport(V.MulTRV(f.q,t,W)),M.MulXV(f,y.GetVertex(e.indexB),e.wB),B.SubVV(e.wB,e.wA,e.w),++h,++o.b2_gjkIters;let i=!1;for(let o=0;o<l;++o)if(e.indexA===r[o]&&e.indexB===m[o]){i=!0;break}if(i)break;++a.m_count}if(o.b2_gjkMaxIters=C(o.b2_gjkMaxIters,h),a.GetWitnessPoints(t.pointA,t.pointB),t.distance=B.DistanceVV(t.pointA,t.pointB),t.iterations=h,a.WriteCache(e),i.useRadii){const o=s.m_radius,e=y.m_radius;if(t.distance>o+e&&t.distance>1e-5){t.distance-=o+e;const i=B.SubVV(t.pointB,t.pointA,U);i.Normalize(),t.pointA.SelfMulAdd(o,i),t.pointB.SelfMulSub(e,i)}else{const o=B.MidVV(t.pointA,t.pointB,N);t.pointA.Copy(o),t.pointB.Copy(o),t.distance=0}}}const H=new B,Q=new q,Y=new B,K=new B,$=new B,oo=new B,to=new B,eo=new B;var io,so,yo;(io=o.b2ContactFeatureType||(o.b2ContactFeatureType={}))[io.e_vertex=0]="e_vertex",io[io.e_face=1]="e_face";class po{constructor(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}get key(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key}set key(o){this._key=o,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255}get indexA(){return this._indexA}set indexA(o){this._indexA=o,this._key_invalid=!0}get indexB(){return this._indexB}set indexB(o){this._indexB=o,this._key_invalid=!0}get typeA(){return this._typeA}set typeA(o){this._typeA=o,this._key_invalid=!0}get typeB(){return this._typeB}set typeB(o){this._typeB=o,this._key_invalid=!0}}class fo{constructor(){this.cf=new po}Copy(o){return this.key=o.key,this}Clone(){return(new fo).Copy(this)}get key(){return this.cf.key}set key(o){this.cf.key=o}}class ao{constructor(){this.localPoint=new B,this.normalImpulse=0,this.tangentImpulse=0,this.id=new fo}static MakeArray(o){return p(o,o=>new ao)}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(o){return this.localPoint.Copy(o.localPoint),this.normalImpulse=o.normalImpulse,this.tangentImpulse=o.tangentImpulse,this.id.Copy(o.id),this}}(so=o.b2ManifoldType||(o.b2ManifoldType={}))[so.e_unknown=-1]="e_unknown",so[so.e_circles=0]="e_circles",so[so.e_faceA=1]="e_faceA",so[so.e_faceB=2]="e_faceB";class no{constructor(){this.points=ao.MakeArray(2),this.localNormal=new B,this.localPoint=new B,this.type=o.b2ManifoldType.e_unknown,this.pointCount=0}Reset(){for(let o=0;o<2;++o)this.points[o].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=o.b2ManifoldType.e_unknown,this.pointCount=0}Copy(o){this.pointCount=o.pointCount;for(let t=0;t<2;++t)this.points[t].Copy(o.points[t]);return this.localNormal.Copy(o.localNormal),this.localPoint.Copy(o.localPoint),this.type=o.type,this}Clone(){return(new no).Copy(this)}}class Co{constructor(){this.normal=new B,this.points=B.MakeArray(2),this.separations=f(2)}Initialize(t,e,i,s,y){if(0!==t.pointCount)switch(t.type){case o.b2ManifoldType.e_circles:{this.normal.Set(1,0);const o=M.MulXV(e,t.localPoint,Co.Initialize_s_pointA),p=M.MulXV(s,t.points[0].localPoint,Co.Initialize_s_pointB);B.DistanceSquaredVV(o,p)>1e-5*1e-5&&B.SubVV(p,o,this.normal).SelfNormalize();const f=B.AddVMulSV(o,i,this.normal,Co.Initialize_s_cA),a=B.SubVMulSV(p,y,this.normal,Co.Initialize_s_cB);B.MidVV(f,a,this.points[0]),this.separations[0]=B.DotVV(B.SubVV(a,f,B.s_t0),this.normal);break}case o.b2ManifoldType.e_faceA:{V.MulRV(e.q,t.localNormal,this.normal);const o=M.MulXV(e,t.localPoint,Co.Initialize_s_planePoint);for(let e=0;e<t.pointCount;++e){const p=M.MulXV(s,t.points[e].localPoint,Co.Initialize_s_clipPoint),f=i-B.DotVV(B.SubVV(p,o,B.s_t0),this.normal),a=B.AddVMulSV(p,f,this.normal,Co.Initialize_s_cA),n=B.SubVMulSV(p,y,this.normal,Co.Initialize_s_cB);B.MidVV(a,n,this.points[e]),this.separations[e]=B.DotVV(B.SubVV(n,a,B.s_t0),this.normal)}break}case o.b2ManifoldType.e_faceB:{V.MulRV(s.q,t.localNormal,this.normal);const o=M.MulXV(s,t.localPoint,Co.Initialize_s_planePoint);for(let s=0;s<t.pointCount;++s){const p=M.MulXV(e,t.points[s].localPoint,Co.Initialize_s_clipPoint),f=y-B.DotVV(B.SubVV(p,o,B.s_t0),this.normal),a=B.AddVMulSV(p,f,this.normal,Co.Initialize_s_cB),n=B.SubVMulSV(p,i,this.normal,Co.Initialize_s_cA);B.MidVV(n,a,this.points[s]),this.separations[s]=B.DotVV(B.SubVV(n,a,B.s_t0),this.normal)}this.normal.SelfNeg();break}}}}Co.Initialize_s_pointA=new B,Co.Initialize_s_pointB=new B,Co.Initialize_s_cA=new B,Co.Initialize_s_cB=new B,Co.Initialize_s_planePoint=new B,Co.Initialize_s_clipPoint=new B,(yo=o.b2PointState||(o.b2PointState={}))[yo.b2_nullState=0]="b2_nullState",yo[yo.b2_addState=1]="b2_addState",yo[yo.b2_persistState=2]="b2_persistState",yo[yo.b2_removeState=3]="b2_removeState";class ro{constructor(){this.v=new B,this.id=new fo}static MakeArray(o){return p(o,o=>new ro)}Copy(o){return this.v.Copy(o.v),this.id.Copy(o.id),this}}class mo{constructor(){this.p1=new B,this.p2=new B,this.maxFraction=1}Copy(o){return this.p1.Copy(o.p1),this.p2.Copy(o.p2),this.maxFraction=o.maxFraction,this}}class lo{constructor(){this.normal=new B,this.fraction=0}Copy(o){return this.normal.Copy(o.normal),this.fraction=o.fraction,this}}class ho{constructor(){this.lowerBound=new B,this.upperBound=new B,this.m_cache_center=new B,this.m_cache_extent=new B}Copy(o){return this.lowerBound.Copy(o.lowerBound),this.upperBound.Copy(o.upperBound),this}IsValid(){const o=this.upperBound.x-this.lowerBound.x,t=this.upperBound.y-this.lowerBound.y;let e=o>=0&&t>=0;return e=e&&this.lowerBound.IsValid()&&this.upperBound.IsValid(),e}GetCenter(){return B.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)}GetExtents(){return B.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)}GetPerimeter(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))}Combine1(o){return this.lowerBound.x=n(this.lowerBound.x,o.lowerBound.x),this.lowerBound.y=n(this.lowerBound.y,o.lowerBound.y),this.upperBound.x=C(this.upperBound.x,o.upperBound.x),this.upperBound.y=C(this.upperBound.y,o.upperBound.y),this}Combine2(o,t){return this.lowerBound.x=n(o.lowerBound.x,t.lowerBound.x),this.lowerBound.y=n(o.lowerBound.y,t.lowerBound.y),this.upperBound.x=C(o.upperBound.x,t.upperBound.x),this.upperBound.y=C(o.upperBound.y,t.upperBound.y),this}static Combine(o,t,e){return e.Combine2(o,t),e}Contains(o){let t=!0;return t=t&&this.lowerBound.x<=o.lowerBound.x,t=t&&this.lowerBound.y<=o.lowerBound.y,t=t&&o.upperBound.x<=this.upperBound.x,t=t&&o.upperBound.y<=this.upperBound.y,t}RayCast(o,t){let e=-1e37,i=1e37;const s=t.p1.x,y=t.p1.y,p=t.p2.x-t.p1.x,f=t.p2.y-t.p1.y,C=a(p),r=a(f),m=o.normal;if(C<1e-5){if(s<this.lowerBound.x||this.upperBound.x<s)return!1}else{const o=1/p;let t=(this.lowerBound.x-s)*o,y=(this.upperBound.x-s)*o,f=-1;if(t>y){const o=t;t=y,y=o,f=1}if(t>e&&(m.x=f,m.y=0,e=t),i=n(i,y),e>i)return!1}if(r<1e-5){if(y<this.lowerBound.y||this.upperBound.y<y)return!1}else{const o=1/f;let t=(this.lowerBound.y-y)*o,s=(this.upperBound.y-y)*o,p=-1;if(t>s){const o=t;t=s,s=o,p=1}if(t>e&&(m.x=0,m.y=p,e=t),i=n(i,s),e>i)return!1}return!(e<0||t.maxFraction<e||(o.fraction=e,0))}TestContain(o){return!(o.x<this.lowerBound.x||this.upperBound.x<o.x||o.y<this.lowerBound.y||this.upperBound.y<o.y)}TestOverlap(o){const t=o.lowerBound.x-this.upperBound.x,e=o.lowerBound.y-this.upperBound.y,i=this.lowerBound.x-o.upperBound.x,s=this.lowerBound.y-o.upperBound.y;return!(t>0||e>0||i>0||s>0)}}function _o(o,t){const e=t.lowerBound.x-o.upperBound.x,i=t.lowerBound.y-o.upperBound.y,s=o.lowerBound.x-t.upperBound.x,y=o.lowerBound.y-t.upperBound.y;return!(e>0||i>0||s>0||y>0)}function co(t,e,i,s,y){let p=0;const f=e[0],a=e[1],n=B.DotVV(i,f.v)-s,C=B.DotVV(i,a.v)-s;if(n<=0&&t[p++].Copy(f),C<=0&&t[p++].Copy(a),n*C<0){const e=n/(n-C),i=t[p].v;i.x=f.v.x+e*(a.v.x-f.v.x),i.y=f.v.y+e*(a.v.y-f.v.y);const s=t[p].id;s.cf.indexA=y,s.cf.indexB=f.id.cf.indexB,s.cf.typeA=o.b2ContactFeatureType.e_vertex,s.cf.typeB=o.b2ContactFeatureType.e_face,++p}return p}const uo=new R,go=new F,xo=new k;function bo(o,t,e,i,s,y){const p=uo.Reset();p.proxyA.SetShape(o,t),p.proxyB.SetShape(e,i),p.transformA.Copy(s),p.transformB.Copy(y),p.useRadii=!0;const f=go.Reset();f.count=0;const a=xo.Reset();return Z(a,f,p),a.distance<1e-4}function Bo(o){if(null===o)throw new Error;return o}class vo{constructor(o=0){this.m_id=0,this.aabb=new ho,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=o}IsLeaf(){return null===this.child1}}class So{constructor(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0,this.m_stack=new L(256)}Query(o,t){if(null===this.m_root)return;const e=this.m_stack.Reset();for(e.Push(this.m_root);e.GetCount()>0;){const i=e.Pop();if(i.aabb.TestOverlap(o))if(i.IsLeaf()){if(!t(i))return}else e.Push(Bo(i.child1)),e.Push(Bo(i.child2))}}QueryPoint(o,t){if(null===this.m_root)return;const e=this.m_stack.Reset();for(e.Push(this.m_root);e.GetCount()>0;){const i=e.Pop();if(i.aabb.TestContain(o))if(i.IsLeaf()){if(!t(i))return}else e.Push(Bo(i.child1)),e.Push(Bo(i.child2))}}RayCast(o,t){if(null===this.m_root)return;const e=o.p1,i=o.p2,s=B.SubVV(i,e,So.s_r);s.Normalize();const y=B.CrossOneV(s,So.s_v),p=B.AbsV(y,So.s_abs_v);let f=o.maxFraction;const r=So.s_segmentAABB;let m=e.x+f*(i.x-e.x),l=e.y+f*(i.y-e.y);r.lowerBound.x=n(e.x,m),r.lowerBound.y=n(e.y,l),r.upperBound.x=C(e.x,m),r.upperBound.y=C(e.y,l);const h=this.m_stack.Reset();for(h.Push(this.m_root);h.GetCount()>0;){const s=h.Pop();if(!_o(s.aabb,r))continue;const _=s.aabb.GetCenter(),c=s.aabb.GetExtents();if(!(a(B.DotVV(y,B.SubVV(e,_,B.s_t0)))-B.DotVV(p,c)>0))if(s.IsLeaf()){const y=So.s_subInput;y.p1.Copy(o.p1),y.p2.Copy(o.p2),y.maxFraction=f;const p=t(y,s);if(0===p)return;p>0&&(f=p,m=e.x+f*(i.x-e.x),l=e.y+f*(i.y-e.y),r.lowerBound.x=n(e.x,m),r.lowerBound.y=n(e.y,l),r.upperBound.x=C(e.x,m),r.upperBound.y=C(e.y,l))}else h.Push(Bo(s.child1)),h.Push(Bo(s.child2))}}AllocateNode(){if(this.m_freeList){const o=this.m_freeList;return this.m_freeList=o.parent,o.parent=null,o.child1=null,o.child2=null,o.height=0,delete o.userData,o}return new vo(So.s_node_id++)}FreeNode(o){o.parent=this.m_freeList,o.child1=null,o.child2=null,o.height=-1,delete o.userData,this.m_freeList=o}CreateProxy(o,t){const e=this.AllocateNode();return e.aabb.lowerBound.x=o.lowerBound.x-.1,e.aabb.lowerBound.y=o.lowerBound.y-.1,e.aabb.upperBound.x=o.upperBound.x+.1,e.aabb.upperBound.y=o.upperBound.y+.1,e.userData=t,e.height=0,this.InsertLeaf(e),e}DestroyProxy(o){this.RemoveLeaf(o),this.FreeNode(o)}MoveProxy(o,t,e){if(o.aabb.Contains(t))return!1;this.RemoveLeaf(o);const i=.1+2*(e.x>0?e.x:-e.x),s=.1+2*(e.y>0?e.y:-e.y);return o.aabb.lowerBound.x=t.lowerBound.x-i,o.aabb.lowerBound.y=t.lowerBound.y-s,o.aabb.upperBound.x=t.upperBound.x+i,o.aabb.upperBound.y=t.upperBound.y+s,this.InsertLeaf(o),!0}InsertLeaf(o){if(++this.m_insertionCount,null===this.m_root)return this.m_root=o,void(this.m_root.parent=null);const t=o.aabb;let e=this.m_root;for(;!e.IsLeaf();){const o=Bo(e.child1),i=Bo(e.child2),s=e.aabb.GetPerimeter(),y=So.s_combinedAABB;y.Combine2(e.aabb,t);const p=y.GetPerimeter(),f=2*p,a=2*(p-s);let n;const C=So.s_aabb;let r,m,l;if(o.IsLeaf()?(C.Combine2(t,o.aabb),n=C.GetPerimeter()+a):(C.Combine2(t,o.aabb),r=o.aabb.GetPerimeter(),m=C.GetPerimeter(),n=m-r+a),i.IsLeaf()?(C.Combine2(t,i.aabb),l=C.GetPerimeter()+a):(C.Combine2(t,i.aabb),r=i.aabb.GetPerimeter(),m=C.GetPerimeter(),l=m-r+a),f<n&&f<l)break;e=n<l?o:i}const i=e,s=i.parent,y=this.AllocateNode();y.parent=s,delete y.userData,y.aabb.Combine2(t,i.aabb),y.height=i.height+1,s?(s.child1===i?s.child1=y:s.child2=y,y.child1=i,y.child2=o,i.parent=y,o.parent=y):(y.child1=i,y.child2=o,i.parent=y,o.parent=y,this.m_root=y);let p=o.parent;for(;null!==p;){p=this.Balance(p);const o=Bo(p.child1),t=Bo(p.child2);p.height=1+C(o.height,t.height),p.aabb.Combine2(o.aabb,t.aabb),p=p.parent}}RemoveLeaf(o){if(o===this.m_root)return void(this.m_root=null);const t=Bo(o.parent),e=t&&t.parent;let i;if(i=t.child1===o?Bo(t.child2):Bo(t.child1),e){e.child1===t?e.child1=i:e.child2=i,i.parent=e,this.FreeNode(t);let o=e;for(;o;){o=this.Balance(o);const t=Bo(o.child1),e=Bo(o.child2);o.aabb.Combine2(t.aabb,e.aabb),o.height=1+C(t.height,e.height),o=o.parent}}else this.m_root=i,i.parent=null,this.FreeNode(t)}Balance(o){if(o.IsLeaf()||o.height<2)return o;const t=Bo(o.child1),e=Bo(o.child2),i=e.height-t.height;if(i>1){const i=Bo(e.child1),s=Bo(e.child2);return e.child1=o,e.parent=o.parent,o.parent=e,null!==e.parent?e.parent.child1===o?e.parent.child1=e:e.parent.child2=e:this.m_root=e,i.height>s.height?(e.child2=i,o.child2=s,s.parent=o,o.aabb.Combine2(t.aabb,s.aabb),e.aabb.Combine2(o.aabb,i.aabb),o.height=1+C(t.height,s.height),e.height=1+C(o.height,i.height)):(e.child2=s,o.child2=i,i.parent=o,o.aabb.Combine2(t.aabb,i.aabb),e.aabb.Combine2(o.aabb,s.aabb),o.height=1+C(t.height,i.height),e.height=1+C(o.height,s.height)),e}if(i<-1){const i=Bo(t.child1),s=Bo(t.child2);return t.child1=o,t.parent=o.parent,o.parent=t,null!==t.parent?t.parent.child1===o?t.parent.child1=t:t.parent.child2=t:this.m_root=t,i.height>s.height?(t.child2=i,o.child1=s,s.parent=o,o.aabb.Combine2(e.aabb,s.aabb),t.aabb.Combine2(o.aabb,i.aabb),o.height=1+C(e.height,s.height),t.height=1+C(o.height,i.height)):(t.child2=s,o.child1=i,i.parent=o,o.aabb.Combine2(e.aabb,i.aabb),t.aabb.Combine2(o.aabb,s.aabb),o.height=1+C(e.height,i.height),t.height=1+C(o.height,s.height)),t}return o}GetHeight(){return null===this.m_root?0:this.m_root.height}static GetAreaNode(o){if(null===o)return 0;if(o.IsLeaf())return 0;let t=o.aabb.GetPerimeter();return t+=So.GetAreaNode(o.child1),t+=So.GetAreaNode(o.child2),t}GetAreaRatio(){if(null===this.m_root)return 0;const o=this.m_root.aabb.GetPerimeter();return So.GetAreaNode(this.m_root)/o}ComputeHeightNode(o){if(!o||o.IsLeaf())return 0;const t=this.ComputeHeightNode(o.child1),e=this.ComputeHeightNode(o.child2);return 1+C(t,e)}ComputeHeight(){return this.ComputeHeightNode(this.m_root)}ValidateStructure(o){if(null===o)return;this.m_root;const t=o;if(t.IsLeaf())return;const e=Bo(t.child1),i=Bo(t.child2);this.ValidateStructure(e),this.ValidateStructure(i)}ValidateMetrics(o){if(null===o)return;const t=o;if(t.IsLeaf())return;const e=Bo(t.child1),i=Bo(t.child2);So.s_aabb.Combine2(e.aabb,i.aabb),this.ValidateMetrics(e),this.ValidateMetrics(i)}Validate(){}static GetMaxBalanceNode(o,t){if(null===o)return t;if(o.height<=1)return t;const e=Bo(o.child1),i=Bo(o.child2),s=a(i.height-e.height);return C(t,s)}GetMaxBalance(){return So.GetMaxBalanceNode(this.m_root,0)}RebuildBottomUp(){this.Validate()}static ShiftOriginNode(o,t){if(null===o)return;if(o.height<=1)return;const e=o.child1,i=o.child2;So.ShiftOriginNode(e,t),So.ShiftOriginNode(i,t),o.aabb.lowerBound.SelfSub(t),o.aabb.upperBound.SelfSub(t)}ShiftOrigin(o){So.ShiftOriginNode(this.m_root,o)}}So.s_r=new B,So.s_v=new B,So.s_abs_v=new B,So.s_segmentAABB=new ho,So.s_subInput=new mo,So.s_combinedAABB=new ho,So.s_aabb=new ho,So.s_node_id=0;class Ao{constructor(o,t){this.proxyA=o,this.proxyB=t}}class wo{constructor(){this.m_tree=new So,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}CreateProxy(o,t){const e=this.m_tree.CreateProxy(o,t);return++this.m_proxyCount,this.BufferMove(e),e}DestroyProxy(o){this.UnBufferMove(o),--this.m_proxyCount,this.m_tree.DestroyProxy(o)}MoveProxy(o,t,e){this.m_tree.MoveProxy(o,t,e)&&this.BufferMove(o)}TouchProxy(o){this.BufferMove(o)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(o){this.m_pairCount=0;for(let o=0;o<this.m_moveCount;++o){const t=this.m_moveBuffer[o];if(null===t)continue;const e=t.aabb;this.m_tree.Query(e,o=>{if(o.m_id===t.m_id)return!0;let e,i;if(o.m_id<t.m_id?(e=o,i=t):(e=t,i=o),this.m_pairCount===this.m_pairBuffer.length)this.m_pairBuffer[this.m_pairCount]=new Ao(e,i);else{const o=this.m_pairBuffer[this.m_pairCount];o.proxyA=e,o.proxyB=i}return++this.m_pairCount,!0})}this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(Vo);let t=0;for(;t<this.m_pairCount;){const e=this.m_pairBuffer[t];for(o(e.proxyA.userData,e.proxyB.userData),++t;t<this.m_pairCount;){const o=this.m_pairBuffer[t];if(o.proxyA.m_id!==e.proxyA.m_id||o.proxyB.m_id!==e.proxyB.m_id)break;++t}}}Query(o,t){this.m_tree.Query(o,t)}QueryPoint(o,t){this.m_tree.QueryPoint(o,t)}RayCast(o,t){this.m_tree.RayCast(o,t)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(o){this.m_tree.ShiftOrigin(o)}BufferMove(o){this.m_moveBuffer[this.m_moveCount]=o,++this.m_moveCount}UnBufferMove(o){const t=this.m_moveBuffer.indexOf(o);this.m_moveBuffer[t]=null}}function Vo(o,t){return o.proxyA.m_id===t.proxyA.m_id?o.proxyB.m_id-t.proxyB.m_id:o.proxyA.m_id-t.proxyA.m_id}o.b2_toiTime=0,o.b2_toiMaxTime=0,o.b2_toiCalls=0,o.b2_toiIters=0,o.b2_toiMaxIters=0,o.b2_toiRootIters=0,o.b2_toiMaxRootIters=0;const Mo=new M,Io=new M,Po=new B,Go=new B,Do=new B,Lo=new B,To=new B;class Fo{constructor(){this.proxyA=new T,this.proxyB=new T,this.sweepA=new I,this.sweepB=new I,this.tMax=0}}var Ro,ko;(Ro=o.b2TOIOutputState||(o.b2TOIOutputState={}))[Ro.e_unknown=0]="e_unknown",Ro[Ro.e_failed=1]="e_failed",Ro[Ro.e_overlapped=2]="e_overlapped",Ro[Ro.e_touching=3]="e_touching",Ro[Ro.e_separated=4]="e_separated";class zo{constructor(){this.state=o.b2TOIOutputState.e_unknown,this.t=0}}(ko=o.b2SeparationFunctionType||(o.b2SeparationFunctionType={}))[ko.e_unknown=-1]="e_unknown",ko[ko.e_points=0]="e_points",ko[ko.e_faceA=1]="e_faceA",ko[ko.e_faceB=2]="e_faceB";class qo{constructor(){this.m_sweepA=new I,this.m_sweepB=new I,this.m_type=o.b2SeparationFunctionType.e_unknown,this.m_localPoint=new B,this.m_axis=new B}Initialize(t,e,i,s,y,p){this.m_proxyA=e,this.m_proxyB=s;const f=t.count;this.m_sweepA.Copy(i),this.m_sweepB.Copy(y);const a=Mo,n=Io;if(this.m_sweepA.GetTransform(a,p),this.m_sweepB.GetTransform(n,p),1===f){this.m_type=o.b2SeparationFunctionType.e_points;const e=this.m_proxyA.GetVertex(t.indexA[0]),i=this.m_proxyB.GetVertex(t.indexB[0]),s=M.MulXV(a,e,Po),y=M.MulXV(n,i,Go);B.SubVV(y,s,this.m_axis);const p=this.m_axis.Normalize();return this.m_localPoint.SetZero(),p}if(t.indexA[0]===t.indexA[1]){this.m_type=o.b2SeparationFunctionType.e_faceB;const e=this.m_proxyB.GetVertex(t.indexB[0]),i=this.m_proxyB.GetVertex(t.indexB[1]);B.CrossVOne(B.SubVV(i,e,B.s_t0),this.m_axis).SelfNormalize();const s=V.MulRV(n.q,this.m_axis,Do);B.MidVV(e,i,this.m_localPoint);const y=M.MulXV(n,this.m_localPoint,Go),p=this.m_proxyA.GetVertex(t.indexA[0]),f=M.MulXV(a,p,Po);let C=B.DotVV(B.SubVV(f,y,B.s_t0),s);return C<0&&(this.m_axis.SelfNeg(),C=-C),C}{this.m_type=o.b2SeparationFunctionType.e_faceA;const e=this.m_proxyA.GetVertex(t.indexA[0]),i=this.m_proxyA.GetVertex(t.indexA[1]);B.CrossVOne(B.SubVV(i,e,B.s_t0),this.m_axis).SelfNormalize();const s=V.MulRV(a.q,this.m_axis,Do);B.MidVV(e,i,this.m_localPoint);const y=M.MulXV(a,this.m_localPoint,Po),p=this.m_proxyB.GetVertex(t.indexB[0]),f=M.MulXV(n,p,Go);let C=B.DotVV(B.SubVV(f,y,B.s_t0),s);return C<0&&(this.m_axis.SelfNeg(),C=-C),C}}FindMinSeparation(t,e,i){const s=Mo,y=Io;switch(this.m_sweepA.GetTransform(s,i),this.m_sweepB.GetTransform(y,i),this.m_type){case o.b2SeparationFunctionType.e_points:{const o=V.MulTRV(s.q,this.m_axis,Lo),i=V.MulTRV(y.q,B.NegV(this.m_axis,B.s_t0),To);t[0]=this.m_proxyA.GetSupport(o),e[0]=this.m_proxyB.GetSupport(i);const p=this.m_proxyA.GetVertex(t[0]),f=this.m_proxyB.GetVertex(e[0]),a=M.MulXV(s,p,Po),n=M.MulXV(y,f,Go);return B.DotVV(B.SubVV(n,a,B.s_t0),this.m_axis)}case o.b2SeparationFunctionType.e_faceA:{const o=V.MulRV(s.q,this.m_axis,Do),i=M.MulXV(s,this.m_localPoint,Po),p=V.MulTRV(y.q,B.NegV(o,B.s_t0),To);t[0]=-1,e[0]=this.m_proxyB.GetSupport(p);const f=this.m_proxyB.GetVertex(e[0]),a=M.MulXV(y,f,Go);return B.DotVV(B.SubVV(a,i,B.s_t0),o)}case o.b2SeparationFunctionType.e_faceB:{const o=V.MulRV(y.q,this.m_axis,Do),i=M.MulXV(y,this.m_localPoint,Go),p=V.MulTRV(s.q,B.NegV(o,B.s_t0),Lo);e[0]=-1,t[0]=this.m_proxyA.GetSupport(p);const f=this.m_proxyA.GetVertex(t[0]),a=M.MulXV(s,f,Po);return B.DotVV(B.SubVV(a,i,B.s_t0),o)}default:return t[0]=-1,e[0]=-1,0}}Evaluate(t,e,i){const s=Mo,y=Io;switch(this.m_sweepA.GetTransform(s,i),this.m_sweepB.GetTransform(y,i),this.m_type){case o.b2SeparationFunctionType.e_points:{const o=this.m_proxyA.GetVertex(t),i=this.m_proxyB.GetVertex(e),p=M.MulXV(s,o,Po),f=M.MulXV(y,i,Go);return B.DotVV(B.SubVV(f,p,B.s_t0),this.m_axis)}case o.b2SeparationFunctionType.e_faceA:{const o=V.MulRV(s.q,this.m_axis,Do),t=M.MulXV(s,this.m_localPoint,Po),i=this.m_proxyB.GetVertex(e),p=M.MulXV(y,i,Go);return B.DotVV(B.SubVV(p,t,B.s_t0),o)}case o.b2SeparationFunctionType.e_faceB:{const o=V.MulRV(y.q,this.m_axis,Do),e=M.MulXV(y,this.m_localPoint,Go),i=this.m_proxyA.GetVertex(t),p=M.MulXV(s,i,Po);return B.DotVV(B.SubVV(p,e,B.s_t0),o)}default:return 0}}}const Eo=new D,Jo=new F,jo=new R,No=new k,Oo=new qo,Uo=[0],Xo=[0],Wo=new I,Zo=new I;function Ho(t,e){const i=Eo.Reset();++o.b2_toiCalls,t.state=o.b2TOIOutputState.e_unknown,t.t=e.tMax;const s=e.proxyA,y=e.proxyB,p=C(8,s.m_count,y.m_count),f=Wo.Copy(e.sweepA),n=Zo.Copy(e.sweepB);f.Normalize(),n.Normalize();const r=e.tMax,m=s.m_radius+y.m_radius,l=C(.008,m-.024);let h=0,_=0;const c=Jo;c.count=0;const u=jo;for(u.proxyA.Copy(e.proxyA),u.proxyB.Copy(e.proxyB),u.useRadii=!1;;){const e=Mo,i=Io;f.GetTransform(e,h),n.GetTransform(i,h),u.transformA.Copy(e),u.transformB.Copy(i);const m=No;if(Z(m,c,u),m.distance<=0){t.state=o.b2TOIOutputState.e_overlapped,t.t=0;break}if(m.distance<l+.002){t.state=o.b2TOIOutputState.e_touching,t.t=h;break}const d=Oo;d.Initialize(c,s,f,y,n,h);let g=!1,x=r,b=0;for(;;){const e=Uo,i=Xo;let s=d.FindMinSeparation(e,i,x);if(s>l+.002){t.state=o.b2TOIOutputState.e_separated,t.t=r,g=!0;break}if(s>l-.002){h=x;break}let y=d.Evaluate(e[0],i[0],h);if(y<l-.002){t.state=o.b2TOIOutputState.e_failed,t.t=h,g=!0;break}if(y<=l+.002){t.state=o.b2TOIOutputState.e_touching,t.t=h,g=!0;break}let f=0,n=h,m=x;for(;;){let t=0;t=1&f?n+(l-y)*(m-n)/(s-y):.5*(n+m),++f,++o.b2_toiRootIters;const p=d.Evaluate(e[0],i[0],t);if(a(p-l)<.002){x=t;break}if(p>l?(n=t,y=p):(m=t,s=p),50===f)break}if(o.b2_toiMaxRootIters=C(o.b2_toiMaxRootIters,f),++b,b===p)break}if(++_,++o.b2_toiIters,g)break;if(20===_){t.state=o.b2TOIOutputState.e_failed,t.t=h;break}}o.b2_toiMaxIters=C(o.b2_toiMaxIters,_);const d=i.GetMilliseconds();o.b2_toiMaxTime=C(o.b2_toiMaxTime,d),o.b2_toiTime+=d}const Qo=new B,Yo=new B;function Ko(t,e,i,s,y){t.pointCount=0;const p=M.MulXV(i,e.m_p,Qo),f=M.MulXV(y,s.m_p,Yo),a=B.DistanceSquaredVV(p,f),n=e.m_radius+s.m_radius;a>n*n||(t.type=o.b2ManifoldType.e_circles,t.localPoint.Copy(e.m_p),t.localNormal.SetZero(),t.pointCount=1,t.points[0].localPoint.Copy(s.m_p),t.points[0].id.key=0)}const $o=new B,ot=new B,tt=new B;function et(t,e,i,s,y){t.pointCount=0;const p=M.MulXV(y,s.m_p,$o),f=M.MulTXV(i,p,ot);let a=0,n=-1e37;const C=e.m_radius+s.m_radius,r=e.m_count,m=e.m_vertices,l=e.m_normals;for(let o=0;o<r;++o){const t=B.DotVV(l[o],B.SubVV(f,m[o],B.s_t0));if(t>C)return;t>n&&(n=t,a=o)}const h=a,_=(h+1)%r,c=m[h],u=m[_];if(n<1e-5)return t.pointCount=1,t.type=o.b2ManifoldType.e_faceA,t.localNormal.Copy(l[a]),B.MidVV(c,u,t.localPoint),t.points[0].localPoint.Copy(s.m_p),void(t.points[0].id.key=0);const d=B.DotVV(B.SubVV(f,c,B.s_t0),B.SubVV(u,c,B.s_t1)),g=B.DotVV(B.SubVV(f,u,B.s_t0),B.SubVV(c,u,B.s_t1));if(d<=0){if(B.DistanceSquaredVV(f,c)>C*C)return;t.pointCount=1,t.type=o.b2ManifoldType.e_faceA,B.SubVV(f,c,t.localNormal).SelfNormalize(),t.localPoint.Copy(c),t.points[0].localPoint.Copy(s.m_p),t.points[0].id.key=0}else if(g<=0){if(B.DistanceSquaredVV(f,u)>C*C)return;t.pointCount=1,t.type=o.b2ManifoldType.e_faceA,B.SubVV(f,u,t.localNormal).SelfNormalize(),t.localPoint.Copy(u),t.points[0].localPoint.Copy(s.m_p),t.points[0].id.key=0}else{const e=B.MidVV(c,u,tt);if(B.DotVV(B.SubVV(f,e,B.s_t1),l[h])>C)return;t.pointCount=1,t.type=o.b2ManifoldType.e_faceA,t.localNormal.Copy(l[h]).SelfNormalize(),t.localPoint.Copy(e),t.points[0].localPoint.Copy(s.m_p),t.points[0].id.key=0}}const it=new B,st=new B,yt=new B,pt=new B;function ft(o,t,e,i,s){const y=o.m_vertices,p=o.m_normals,f=i.m_count,a=i.m_vertices,n=V.MulRV(t.q,p[e],it),C=V.MulTRV(s.q,n,st);let r=0,m=1e37;for(let o=0;o<f;++o){const t=B.DotVV(a[o],C);t<m&&(m=t,r=o)}const l=M.MulXV(t,y[e],yt),h=M.MulXV(s,a[r],pt);return B.DotVV(B.SubVV(h,l,B.s_t0),n)}const at=new B,nt=new B;function Ct(o,t,e,i,s){const y=t.m_count,p=t.m_normals,f=B.SubVV(M.MulXV(s,i.m_centroid,B.s_t0),M.MulXV(e,t.m_centroid,B.s_t1),at),a=V.MulTRV(e.q,f,nt);let n=0,C=-1e37;for(let o=0;o<y;++o){const t=B.DotVV(p[o],a);t>C&&(C=t,n=o)}let r=ft(t,e,n,i,s);const m=(n+y-1)%y,l=ft(t,e,m,i,s),h=(n+1)%y,_=ft(t,e,h,i,s);let c=0,u=0,d=0;if(l>r&&l>_)d=-1,c=m,u=l;else{if(!(_>r))return o[0]=n,r;d=1,c=h,u=_}for(;n=-1===d?(c+y-1)%y:(c+1)%y,r=ft(t,e,n,i,s),r>u;)c=n,u=r;return o[0]=c,u}const rt=new B,mt=ro.MakeArray(2),lt=ro.MakeArray(2),ht=ro.MakeArray(2),_t=[0],ct=[0],ut=new B,dt=new B,gt=new B,xt=new B,bt=new B,Bt=new B,vt=new B,St=new B;function At(t,e,i,s,y){t.pointCount=0;const p=e.m_radius+s.m_radius,f=_t;f[0]=0;const a=Ct(f,e,i,s,y);if(a>p)return;const n=ct;n[0]=0;const C=Ct(n,s,y,e,i);if(C>p)return;let r,m,l,h,_=0,c=0;C>.98*a+.001?(r=s,m=e,l=y,h=i,_=n[0],t.type=o.b2ManifoldType.e_faceB,c=1):(r=e,m=s,l=i,h=y,_=f[0],t.type=o.b2ManifoldType.e_faceA,c=0);const u=mt;!function(t,e,i,s,y,p){const f=e.m_normals,a=y.m_count,n=y.m_vertices,C=y.m_normals,r=V.MulTRV(p.q,V.MulRV(i.q,f[s],B.s_t0),rt);let m=0,l=1e37;for(let o=0;o<a;++o){const t=B.DotVV(r,C[o]);t<l&&(l=t,m=o)}const h=m,_=(h+1)%a,c=t[0];M.MulXV(p,n[h],c.v);const u=c.id.cf;u.indexA=s,u.indexB=h,u.typeA=o.b2ContactFeatureType.e_face,u.typeB=o.b2ContactFeatureType.e_vertex;const d=t[1];M.MulXV(p,n[_],d.v);const g=d.id.cf;g.indexA=s,g.indexB=_,g.typeA=o.b2ContactFeatureType.e_face,g.typeB=o.b2ContactFeatureType.e_vertex}(u,r,l,_,m,h);const d=r.m_count,g=r.m_vertices,x=_,b=(_+1)%d,v=g[x],S=g[b],A=B.SubVV(S,v,ut);A.Normalize();const w=B.CrossVOne(A,dt),I=B.MidVV(v,S,gt),P=V.MulRV(l.q,A,bt),G=B.CrossVOne(P,xt),D=M.MulXV(l,v,vt),L=M.MulXV(l,S,St),T=B.DotVV(G,D),F=-B.DotVV(P,D)+p,R=B.DotVV(P,L)+p,k=lt,z=ht;let q;if(q=co(k,u,B.NegV(P,Bt),F,x),q<2)return;if(q=co(z,k,P,R,b),q<2)return;t.localNormal.Copy(w),t.localPoint.Copy(I);let E=0;for(let o=0;o<2;++o){const e=z[o];if(B.DotVV(G,e.v)-T<=p){const o=t.points[E];if(M.MulTXV(h,e.v,o.localPoint),o.id.Copy(e.id),c){const t=o.id.cf;o.id.cf.indexA=t.indexB,o.id.cf.indexB=t.indexA,o.id.cf.typeA=t.typeB,o.id.cf.typeB=t.typeA}++E}}t.pointCount=E}const wt=new B,Vt=new B,Mt=new B,It=new B,Pt=new B,Gt=new B,Dt=new B,Lt=new fo;function Tt(t,e,i,s,y){t.pointCount=0;const p=M.MulTXV(i,M.MulXV(y,s.m_p,B.s_t0),wt),f=e.m_vertex1,a=e.m_vertex2,n=B.SubVV(a,f,Vt),C=B.DotVV(n,B.SubVV(a,p,B.s_t0)),r=B.DotVV(n,B.SubVV(p,f,B.s_t0)),m=e.m_radius+s.m_radius,l=Lt;if(l.cf.indexB=0,l.cf.typeB=o.b2ContactFeatureType.e_vertex,r<=0){const i=f,y=B.SubVV(p,i,Mt);if(B.DotVV(y,y)>m*m)return;if(e.m_hasVertex0){const o=e.m_vertex0,t=f,i=B.SubVV(t,o,It);if(B.DotVV(i,B.SubVV(t,p,B.s_t0))>0)return}return l.cf.indexA=0,l.cf.typeA=o.b2ContactFeatureType.e_vertex,t.pointCount=1,t.type=o.b2ManifoldType.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(i),t.points[0].id.Copy(l),void t.points[0].localPoint.Copy(s.m_p)}if(C<=0){const i=a,y=B.SubVV(p,i,Mt);if(B.DotVV(y,y)>m*m)return;if(e.m_hasVertex3){const o=e.m_vertex3,t=a,i=B.SubVV(o,t,Pt);if(B.DotVV(i,B.SubVV(p,t,B.s_t0))>0)return}return l.cf.indexA=1,l.cf.typeA=o.b2ContactFeatureType.e_vertex,t.pointCount=1,t.type=o.b2ManifoldType.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(i),t.points[0].id.Copy(l),void t.points[0].localPoint.Copy(s.m_p)}const h=B.DotVV(n,n),_=Gt;_.x=1/h*(C*f.x+r*a.x),_.y=1/h*(C*f.y+r*a.y);const c=B.SubVV(p,_,Mt);if(B.DotVV(c,c)>m*m)return;const u=Dt.Set(-n.y,n.x);B.DotVV(u,B.SubVV(p,f,B.s_t0))<0&&u.Set(-u.x,-u.y),u.Normalize(),l.cf.indexA=0,l.cf.typeA=o.b2ContactFeatureType.e_face,t.pointCount=1,t.type=o.b2ManifoldType.e_faceA,t.localNormal.Copy(u),t.localPoint.Copy(f),t.points[0].id.Copy(l),t.points[0].localPoint.Copy(s.m_p)}class Ft{constructor(){this.type=0,this.index=0,this.separation=0}}class Rt{constructor(){this.vertices=[],this.normals=[],this.count=0}}class kt{constructor(){this.m_polygonB=new Rt,this.m_xf=new M,this.m_centroidB=new B,this.m_v0=new B,this.m_v1=new B,this.m_v2=new B,this.m_v3=new B,this.m_normal0=new B,this.m_normal1=new B,this.m_normal2=new B,this.m_normal=new B,this.m_type1=0,this.m_type2=0,this.m_lowerLimit=new B,this.m_upperLimit=new B,this.m_radius=0,this.m_front=!1}Collide(t,e,i,s,y){M.MulTXX(i,y,this.m_xf),M.MulXV(this.m_xf,s.m_centroid,this.m_centroidB),this.m_v0.Copy(e.m_vertex0),this.m_v1.Copy(e.m_vertex1),this.m_v2.Copy(e.m_vertex2),this.m_v3.Copy(e.m_vertex3);const p=e.m_hasVertex0,f=e.m_hasVertex3,a=B.SubVV(this.m_v2,this.m_v1,kt.s_edge1);a.Normalize(),this.m_normal1.Set(a.y,-a.x);const n=B.DotVV(this.m_normal1,B.SubVV(this.m_centroidB,this.m_v1,B.s_t0));let C=0,r=0,m=!1,l=!1;if(p){const o=B.SubVV(this.m_v1,this.m_v0,kt.s_edge0);o.Normalize(),this.m_normal0.Set(o.y,-o.x),m=B.CrossVV(o,a)>=0,C=B.DotVV(this.m_normal0,B.SubVV(this.m_centroidB,this.m_v0,B.s_t0))}if(f){const o=B.SubVV(this.m_v3,this.m_v2,kt.s_edge2);o.Normalize(),this.m_normal2.Set(o.y,-o.x),l=B.CrossVV(a,o)>0,r=B.DotVV(this.m_normal2,B.SubVV(this.m_centroidB,this.m_v2,B.s_t0))}p&&f?m&&l?(this.m_front=C>=0||n>=0||r>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):m?(this.m_front=C>=0||n>=0&&r>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):l?(this.m_front=r>=0||C>=0&&n>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=C>=0&&n>=0&&r>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):p?m?(this.m_front=C>=0||n>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):(this.m_front=C>=0&&n>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):f?l?(this.m_front=n>=0||r>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=n>=0&&r>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=n>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=s.m_count;for(let o=0;o<s.m_count;++o)this.m_polygonB.vertices.length<=o&&this.m_polygonB.vertices.push(new B),this.m_polygonB.normals.length<=o&&this.m_polygonB.normals.push(new B),M.MulXV(this.m_xf,s.m_vertices[o],this.m_polygonB.vertices[o]),V.MulRV(this.m_xf.q,s.m_normals[o],this.m_polygonB.normals[o]);this.m_radius=s.m_radius+e.m_radius,t.pointCount=0;const h=this.ComputeEdgeSeparation(kt.s_edgeAxis);if(0===h.type)return;if(h.separation>this.m_radius)return;const _=this.ComputePolygonSeparation(kt.s_polygonAxis);if(0!==_.type&&_.separation>this.m_radius)return;let c;c=0===_.type?h:_.separation>.98*h.separation+.001?_:h;const u=kt.s_ie,d=kt.s_rf;if(1===c.type){t.type=o.b2ManifoldType.e_faceA;let e=0,i=B.DotVV(this.m_normal,this.m_polygonB.normals[0]);for(let o=1;o<this.m_polygonB.count;++o){const t=B.DotVV(this.m_normal,this.m_polygonB.normals[o]);t<i&&(i=t,e=o)}const s=e,y=(s+1)%this.m_polygonB.count,p=u[0];p.v.Copy(this.m_polygonB.vertices[s]),p.id.cf.indexA=0,p.id.cf.indexB=s,p.id.cf.typeA=o.b2ContactFeatureType.e_face,p.id.cf.typeB=o.b2ContactFeatureType.e_vertex;const f=u[1];f.v.Copy(this.m_polygonB.vertices[y]),f.id.cf.indexA=0,f.id.cf.indexB=y,f.id.cf.typeA=o.b2ContactFeatureType.e_face,f.id.cf.typeB=o.b2ContactFeatureType.e_vertex,this.m_front?(d.i1=0,d.i2=1,d.v1.Copy(this.m_v1),d.v2.Copy(this.m_v2),d.normal.Copy(this.m_normal1)):(d.i1=1,d.i2=0,d.v1.Copy(this.m_v2),d.v2.Copy(this.m_v1),d.normal.Copy(this.m_normal1).SelfNeg())}else{t.type=o.b2ManifoldType.e_faceB;const e=u[0];e.v.Copy(this.m_v1),e.id.cf.indexA=0,e.id.cf.indexB=c.index,e.id.cf.typeA=o.b2ContactFeatureType.e_vertex,e.id.cf.typeB=o.b2ContactFeatureType.e_face;const i=u[1];i.v.Copy(this.m_v2),i.id.cf.indexA=0,i.id.cf.indexB=c.index,i.id.cf.typeA=o.b2ContactFeatureType.e_vertex,i.id.cf.typeB=o.b2ContactFeatureType.e_face,d.i1=c.index,d.i2=(d.i1+1)%this.m_polygonB.count,d.v1.Copy(this.m_polygonB.vertices[d.i1]),d.v2.Copy(this.m_polygonB.vertices[d.i2]),d.normal.Copy(this.m_polygonB.normals[d.i1])}d.sideNormal1.Set(d.normal.y,-d.normal.x),d.sideNormal2.Copy(d.sideNormal1).SelfNeg(),d.sideOffset1=B.DotVV(d.sideNormal1,d.v1),d.sideOffset2=B.DotVV(d.sideNormal2,d.v2);const g=kt.s_clipPoints1,x=kt.s_clipPoints2;let b=0;if(b=co(g,u,d.sideNormal1,d.sideOffset1,d.i1),b<2)return;if(b=co(x,g,d.sideNormal2,d.sideOffset2,d.i2),b<2)return;1===c.type?(t.localNormal.Copy(d.normal),t.localPoint.Copy(d.v1)):(t.localNormal.Copy(s.m_normals[d.i1]),t.localPoint.Copy(s.m_vertices[d.i1]));let v=0;for(let o=0;o<2;++o){let e;if(e=B.DotVV(d.normal,B.SubVV(x[o].v,d.v1,B.s_t0)),e<=this.m_radius){const e=t.points[v];1===c.type?(M.MulTXV(this.m_xf,x[o].v,e.localPoint),e.id=x[o].id):(e.localPoint.Copy(x[o].v),e.id.cf.typeA=x[o].id.cf.typeB,e.id.cf.typeB=x[o].id.cf.typeA,e.id.cf.indexA=x[o].id.cf.indexB,e.id.cf.indexB=x[o].id.cf.indexA),++v}}t.pointCount=v}ComputeEdgeSeparation(o){const t=o;t.type=1,t.index=this.m_front?0:1,t.separation=1e37;for(let o=0;o<this.m_polygonB.count;++o){const e=B.DotVV(this.m_normal,B.SubVV(this.m_polygonB.vertices[o],this.m_v1,B.s_t0));e<t.separation&&(t.separation=e)}return t}ComputePolygonSeparation(o){const t=o;t.type=0,t.index=-1,t.separation=-1e37;const e=kt.s_perp.Set(-this.m_normal.y,this.m_normal.x);for(let o=0;o<this.m_polygonB.count;++o){const s=B.NegV(this.m_polygonB.normals[o],kt.s_n),y=B.DotVV(s,B.SubVV(this.m_polygonB.vertices[o],this.m_v1,B.s_t0)),p=B.DotVV(s,B.SubVV(this.m_polygonB.vertices[o],this.m_v2,B.s_t0)),f=n(y,p);if(f>this.m_radius)return t.type=2,t.index=o,t.separation=f,t;if(B.DotVV(s,e)>=0){if(B.DotVV(B.SubVV(s,this.m_upperLimit,B.s_t0),this.m_normal)<-i)continue}else if(B.DotVV(B.SubVV(s,this.m_lowerLimit,B.s_t0),this.m_normal)<-i)continue;f>t.separation&&(t.type=2,t.index=o,t.separation=f)}return t}}kt.s_edge1=new B,kt.s_edge0=new B,kt.s_edge2=new B,kt.s_ie=ro.MakeArray(2),kt.s_rf=new class{constructor(){this.i1=0,this.i2=0,this.v1=new B,this.v2=new B,this.normal=new B,this.sideNormal1=new B,this.sideOffset1=0,this.sideNormal2=new B,this.sideOffset2=0}},kt.s_clipPoints1=ro.MakeArray(2),kt.s_clipPoints2=ro.MakeArray(2),kt.s_edgeAxis=new Ft,kt.s_polygonAxis=new Ft,kt.s_n=new B,kt.s_perp=new B;const zt=new kt;function qt(o,t,e,i,s){zt.Collide(o,t,e,i,s)}class Et{constructor(){this.mass=0,this.center=new B(0,0),this.I=0}}var Jt,jt,Nt,Ot,Ut,Xt;(Jt=o.b2ShapeType||(o.b2ShapeType={}))[Jt.e_unknown=-1]="e_unknown",Jt[Jt.e_circleShape=0]="e_circleShape",Jt[Jt.e_edgeShape=1]="e_edgeShape",Jt[Jt.e_polygonShape=2]="e_polygonShape",Jt[Jt.e_chainShape=3]="e_chainShape",Jt[Jt.e_shapeTypeCount=4]="e_shapeTypeCount";class Wt{constructor(t,e){this.m_type=o.b2ShapeType.e_unknown,this.m_radius=0,this.m_type=t,this.m_radius=e}Copy(o){return this.m_radius=o.m_radius,this}GetType(){return this.m_type}}class Zt extends Wt{constructor(t=0){super(o.b2ShapeType.e_circleShape,t),this.m_p=new B}Set(o,t=this.m_radius){return this.m_p.Copy(o),this.m_radius=t,this}Clone(){return(new Zt).Copy(this)}Copy(o){return super.Copy(o),this.m_p.Copy(o.m_p),this}GetChildCount(){return 1}TestPoint(o,t){const e=M.MulXV(o,this.m_p,Zt.TestPoint_s_center),i=B.SubVV(t,e,Zt.TestPoint_s_d);return B.DotVV(i,i)<=l(this.m_radius)}ComputeDistance(o,t,e,i){const s=M.MulXV(o,this.m_p,Zt.ComputeDistance_s_center);return B.SubVV(t,s,e),e.Normalize()-this.m_radius}RayCast(o,t,e,i){const s=M.MulXV(e,this.m_p,Zt.RayCast_s_position),y=B.SubVV(t.p1,s,Zt.RayCast_s_s),p=B.DotVV(y,y)-l(this.m_radius),f=B.SubVV(t.p2,t.p1,Zt.RayCast_s_r),a=B.DotVV(y,f),n=B.DotVV(f,f),C=a*a-n*p;if(C<0||n<1e-5)return!1;let r=-(a+_(C));return 0<=r&&r<=t.maxFraction*n&&(r/=n,o.fraction=r,B.AddVMulSV(y,r,f,o.normal).SelfNormalize(),!0)}ComputeAABB(o,t,e){const i=M.MulXV(t,this.m_p,Zt.ComputeAABB_s_p);o.lowerBound.Set(i.x-this.m_radius,i.y-this.m_radius),o.upperBound.Set(i.x+this.m_radius,i.y+this.m_radius)}ComputeMass(o,t){const i=l(this.m_radius);o.mass=t*e*i,o.center.Copy(this.m_p),o.I=o.mass*(.5*i+B.DotVV(this.m_p,this.m_p))}SetupDistanceProxy(o,t){o.m_vertices=o.m_buffer,o.m_vertices[0].Copy(this.m_p),o.m_count=1,o.m_radius=this.m_radius}ComputeSubmergedArea(o,t,i,s){const y=M.MulXV(i,this.m_p,new B),p=-(B.DotVV(o,y)-t);if(p<1e-5-this.m_radius)return 0;if(p>this.m_radius)return s.Copy(y),e*this.m_radius*this.m_radius;const f=this.m_radius*this.m_radius,a=p*p,n=f*(x(p/this.m_radius)+e/2)+p*_(f-a),C=-2/3*c(f-a,1.5)/n;return s.x=y.x+o.x*C,s.y=y.y+o.y*C,n}Dump(o){o("    const shape: b2CircleShape = new b2CircleShape();\n"),o("    shape.m_radius = %.15f;\n",this.m_radius),o("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)}}Zt.TestPoint_s_center=new B,Zt.TestPoint_s_d=new B,Zt.ComputeDistance_s_center=new B,Zt.RayCast_s_position=new B,Zt.RayCast_s_s=new B,Zt.RayCast_s_r=new B,Zt.ComputeAABB_s_p=new B;class Ht extends Wt{constructor(){super(o.b2ShapeType.e_polygonShape,.016),this.m_centroid=new B(0,0),this.m_vertices=[],this.m_normals=[],this.m_count=0}Clone(){return(new Ht).Copy(this)}Copy(o){super.Copy(o),this.m_centroid.Copy(o.m_centroid),this.m_count=o.m_count,this.m_vertices=B.MakeArray(this.m_count),this.m_normals=B.MakeArray(this.m_count);for(let t=0;t<this.m_count;++t)this.m_vertices[t].Copy(o.m_vertices[t]),this.m_normals[t].Copy(o.m_normals[t]);return this}GetChildCount(){return 1}Set(o,t=o.length,e=0){if(t<3)return this.SetAsBox(1,1);let i=t;const s=[];for(let t=0;t<i;++t){const i=o[e+t];let y=!0;for(let o=0;o<s.length;++o)if(B.DistanceSquaredVV(i,s[o])<16e-6){y=!1;break}y&&s.push(i)}if(i=s.length,i<3)return this.SetAsBox(1,1);let y=0,p=s[0].x;for(let o=1;o<i;++o){const t=s[o].x;(t>p||t===p&&s[o].y<s[y].y)&&(y=o,p=t)}const f=[];let a=0,n=y;for(;;){f[a]=n;let o=0;for(let t=1;t<i;++t){if(o===n){o=t;continue}const e=B.SubVV(s[o],s[f[a]],Ht.Set_s_r),i=B.SubVV(s[t],s[f[a]],Ht.Set_s_v),y=B.CrossVV(e,i);y<0&&(o=t),0===y&&i.LengthSquared()>e.LengthSquared()&&(o=t)}if(++a,n=o,o===y)break}this.m_count=a,this.m_vertices=B.MakeArray(this.m_count),this.m_normals=B.MakeArray(this.m_count);for(let o=0;o<a;++o)this.m_vertices[o].Copy(s[f[o]]);for(let o=0;o<a;++o){const t=this.m_vertices[o],e=this.m_vertices[(o+1)%a],i=B.SubVV(e,t,B.s_t0);B.CrossVOne(i,this.m_normals[o]).SelfNormalize()}return Ht.ComputeCentroid(this.m_vertices,a,this.m_centroid),this}SetAsArray(o,t=o.length){return this.Set(o,t)}SetAsBox(o,t,e,i=0){if(this.m_count=4,this.m_vertices=B.MakeArray(this.m_count),this.m_normals=B.MakeArray(this.m_count),this.m_vertices[0].Set(-o,-t),this.m_vertices[1].Set(o,-t),this.m_vertices[2].Set(o,t),this.m_vertices[3].Set(-o,t),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),e){this.m_centroid.Copy(e);const o=new M;o.SetPosition(e),o.SetRotationAngle(i);for(let t=0;t<this.m_count;++t)M.MulXV(o,this.m_vertices[t],this.m_vertices[t]),V.MulRV(o.q,this.m_normals[t],this.m_normals[t])}return this}TestPoint(o,t){const e=M.MulTXV(o,t,Ht.TestPoint_s_pLocal);for(let o=0;o<this.m_count;++o)if(B.DotVV(this.m_normals[o],B.SubVV(e,this.m_vertices[o],B.s_t0))>0)return!1;return!0}ComputeDistance(o,t,e,i){const s=M.MulTXV(o,t,Ht.ComputeDistance_s_pLocal);let y=-1e37;const p=Ht.ComputeDistance_s_normalForMaxDistance.Copy(s);for(let o=0;o<this.m_count;++o){const t=B.DotVV(this.m_normals[o],B.SubVV(s,this.m_vertices[o],B.s_t0));t>y&&(y=t,p.Copy(this.m_normals[o]))}if(y>0){const t=Ht.ComputeDistance_s_minDistance.Copy(p);let i=y*y;for(let o=0;o<this.m_count;++o){const e=B.SubVV(s,this.m_vertices[o],Ht.ComputeDistance_s_distance),y=e.LengthSquared();i>y&&(t.Copy(e),i=y)}return V.MulRV(o.q,t,e),e.Normalize(),Math.sqrt(i)}return V.MulRV(o.q,p,e),y}RayCast(o,t,e,i){const s=M.MulTXV(e,t.p1,Ht.RayCast_s_p1),y=M.MulTXV(e,t.p2,Ht.RayCast_s_p2),p=B.SubVV(y,s,Ht.RayCast_s_d);let f=0,a=t.maxFraction,n=-1;for(let o=0;o<this.m_count;++o){const t=B.DotVV(this.m_normals[o],B.SubVV(this.m_vertices[o],s,B.s_t0)),e=B.DotVV(this.m_normals[o],p);if(0===e){if(t<0)return!1}else e<0&&t<f*e?(f=t/e,n=o):e>0&&t<a*e&&(a=t/e);if(a<f)return!1}return n>=0&&(o.fraction=f,V.MulRV(e.q,this.m_normals[n],o.normal),!0)}ComputeAABB(o,t,e){const i=M.MulXV(t,this.m_vertices[0],o.lowerBound),s=o.upperBound.Copy(i);for(let o=0;o<this.m_count;++o){const e=M.MulXV(t,this.m_vertices[o],Ht.ComputeAABB_s_v);B.MinV(e,i,i),B.MaxV(e,s,s)}const y=this.m_radius;i.SelfSubXY(y,y),s.SelfAddXY(y,y)}ComputeMass(o,t){const e=Ht.ComputeMass_s_center.SetZero();let i=0,s=0;const y=Ht.ComputeMass_s_s.SetZero();for(let o=0;o<this.m_count;++o)y.SelfAdd(this.m_vertices[o]);y.SelfMul(1/this.m_count);for(let o=0;o<this.m_count;++o){const t=B.SubVV(this.m_vertices[o],y,Ht.ComputeMass_s_e1),p=B.SubVV(this.m_vertices[(o+1)%this.m_count],y,Ht.ComputeMass_s_e2),f=B.CrossVV(t,p),a=.5*f;i+=a,e.SelfAdd(B.MulSV(a*(1/3),B.AddVV(t,p,B.s_t0),B.s_t1));const n=t.x,C=t.y,r=p.x,m=p.y;s+=1/3*.25*f*(n*n+r*n+r*r+(C*C+m*C+m*m))}o.mass=t*i,e.SelfMul(1/i),B.AddVV(e,y,o.center),o.I=t*s,o.I+=o.mass*(B.DotVV(o.center,o.center)-B.DotVV(e,e))}Validate(){for(let o=0;o<this.m_count;++o){const t=o,e=(o+1)%this.m_count,i=this.m_vertices[t],s=B.SubVV(this.m_vertices[e],i,Ht.Validate_s_e);for(let o=0;o<this.m_count;++o){if(o===t||o===e)continue;const y=B.SubVV(this.m_vertices[o],i,Ht.Validate_s_v);if(B.CrossVV(s,y)<0)return!1}}return!0}SetupDistanceProxy(o,t){o.m_vertices=this.m_vertices,o.m_count=this.m_count,o.m_radius=this.m_radius}ComputeSubmergedArea(o,t,e,i){const s=V.MulTRV(e.q,o,Ht.ComputeSubmergedArea_s_normalL),y=t-B.DotVV(o,e.p),p=[];let f=0,a=-1,n=-1,C=!1;for(let o=0;o<this.m_count;++o){p[o]=B.DotVV(s,this.m_vertices[o])-y;const t=p[o]<-1e-5;o>0&&(t?C||(a=o-1,f++):C&&(n=o-1,f++)),C=t}switch(f){case 0:if(C){const o=Ht.ComputeSubmergedArea_s_md;return this.ComputeMass(o,1),M.MulXV(e,o.center,i),o.mass}return 0;case 1:-1===a?a=this.m_count-1:n=this.m_count-1}const r=(a+1)%this.m_count,m=(n+1)%this.m_count,l=(0-p[a])/(p[r]-p[a]),h=(0-p[n])/(p[m]-p[n]),_=Ht.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[a].x*(1-l)+this.m_vertices[r].x*l,this.m_vertices[a].y*(1-l)+this.m_vertices[r].y*l),c=Ht.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[n].x*(1-h)+this.m_vertices[m].x*h,this.m_vertices[n].y*(1-h)+this.m_vertices[m].y*h);let u=0;const d=Ht.ComputeSubmergedArea_s_center.SetZero();let g,x=this.m_vertices[r],b=r;for(;b!==m;){b=(b+1)%this.m_count,g=b===m?c:this.m_vertices[b];const o=.5*((x.x-_.x)*(g.y-_.y)-(x.y-_.y)*(g.x-_.x));u+=o,d.x+=o*(_.x+x.x+g.x)/3,d.y+=o*(_.y+x.y+g.y)/3,x=g}return d.SelfMul(1/u),M.MulXV(e,d,i),u}Dump(o){o("    const shape: b2PolygonShape = new b2PolygonShape();\n"),o("    const vs: b2Vec2[] = [];\n");for(let t=0;t<this.m_count;++t)o("    vs[%d] = new b2Vec2(%.15f, %.15f);\n",t,this.m_vertices[t].x,this.m_vertices[t].y);o("    shape.Set(vs, %d);\n",this.m_count)}static ComputeCentroid(o,t,e){const i=e;i.SetZero();let s=0;const y=Ht.ComputeCentroid_s_pRef.SetZero();for(let e=0;e<t;++e){const p=y,f=o[e],a=o[(e+1)%t],n=B.SubVV(f,p,Ht.ComputeCentroid_s_e1),C=B.SubVV(a,p,Ht.ComputeCentroid_s_e2),r=.5*B.CrossVV(n,C);s+=r,i.x+=r*(1/3)*(p.x+f.x+a.x),i.y+=r*(1/3)*(p.y+f.y+a.y)}return i.SelfMul(1/s),i}}Ht.Set_s_r=new B,Ht.Set_s_v=new B,Ht.TestPoint_s_pLocal=new B,Ht.ComputeDistance_s_pLocal=new B,Ht.ComputeDistance_s_normalForMaxDistance=new B,Ht.ComputeDistance_s_minDistance=new B,Ht.ComputeDistance_s_distance=new B,Ht.RayCast_s_p1=new B,Ht.RayCast_s_p2=new B,Ht.RayCast_s_d=new B,Ht.ComputeAABB_s_v=new B,Ht.ComputeMass_s_center=new B,Ht.ComputeMass_s_s=new B,Ht.ComputeMass_s_e1=new B,Ht.ComputeMass_s_e2=new B,Ht.Validate_s_e=new B,Ht.Validate_s_v=new B,Ht.ComputeSubmergedArea_s_normalL=new B,Ht.ComputeSubmergedArea_s_md=new Et,Ht.ComputeSubmergedArea_s_intoVec=new B,Ht.ComputeSubmergedArea_s_outoVec=new B,Ht.ComputeSubmergedArea_s_center=new B,Ht.ComputeCentroid_s_pRef=new B,Ht.ComputeCentroid_s_e1=new B,Ht.ComputeCentroid_s_e2=new B;class Qt extends Wt{constructor(){super(o.b2ShapeType.e_edgeShape,.016),this.m_vertex1=new B,this.m_vertex2=new B,this.m_vertex0=new B,this.m_vertex3=new B,this.m_hasVertex0=!1,this.m_hasVertex3=!1}Set(o,t){return this.m_vertex1.Copy(o),this.m_vertex2.Copy(t),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this}Clone(){return(new Qt).Copy(this)}Copy(o){return super.Copy(o),this.m_vertex1.Copy(o.m_vertex1),this.m_vertex2.Copy(o.m_vertex2),this.m_vertex0.Copy(o.m_vertex0),this.m_vertex3.Copy(o.m_vertex3),this.m_hasVertex0=o.m_hasVertex0,this.m_hasVertex3=o.m_hasVertex3,this}GetChildCount(){return 1}TestPoint(o,t){return!1}ComputeDistance(o,t,e,i){const s=M.MulXV(o,this.m_vertex1,Qt.ComputeDistance_s_v1),y=M.MulXV(o,this.m_vertex2,Qt.ComputeDistance_s_v2),p=B.SubVV(t,s,Qt.ComputeDistance_s_d),f=B.SubVV(y,s,Qt.ComputeDistance_s_s),a=B.DotVV(p,f);if(a>0){const o=B.DotVV(f,f);a>o?B.SubVV(t,y,p):p.SelfMulSub(a/o,f)}return e.Copy(p),e.Normalize()}RayCast(o,t,e,i){const s=M.MulTXV(e,t.p1,Qt.RayCast_s_p1),y=M.MulTXV(e,t.p2,Qt.RayCast_s_p2),p=B.SubVV(y,s,Qt.RayCast_s_d),f=this.m_vertex1,a=this.m_vertex2,n=B.SubVV(a,f,Qt.RayCast_s_e),C=o.normal.Set(n.y,-n.x).SelfNormalize(),r=B.DotVV(C,B.SubVV(f,s,B.s_t0)),m=B.DotVV(C,p);if(0===m)return!1;const l=r/m;if(l<0||t.maxFraction<l)return!1;const h=B.AddVMulSV(s,l,p,Qt.RayCast_s_q),_=B.SubVV(a,f,Qt.RayCast_s_r),c=B.DotVV(_,_);if(0===c)return!1;const u=B.DotVV(B.SubVV(h,f,B.s_t0),_)/c;return!(u<0||1<u||(o.fraction=l,V.MulRV(e.q,o.normal,o.normal),r>0&&o.normal.SelfNeg(),0))}ComputeAABB(o,t,e){const i=M.MulXV(t,this.m_vertex1,Qt.ComputeAABB_s_v1),s=M.MulXV(t,this.m_vertex2,Qt.ComputeAABB_s_v2);B.MinV(i,s,o.lowerBound),B.MaxV(i,s,o.upperBound);const y=this.m_radius;o.lowerBound.SelfSubXY(y,y),o.upperBound.SelfAddXY(y,y)}ComputeMass(o,t){o.mass=0,B.MidVV(this.m_vertex1,this.m_vertex2,o.center),o.I=0}SetupDistanceProxy(o,t){o.m_vertices=o.m_buffer,o.m_vertices[0].Copy(this.m_vertex1),o.m_vertices[1].Copy(this.m_vertex2),o.m_count=2,o.m_radius=this.m_radius}ComputeSubmergedArea(o,t,e,i){return i.SetZero(),0}Dump(o){o("    const shape: b2EdgeShape = new b2EdgeShape();\n"),o("    shape.m_radius = %.15f;\n",this.m_radius),o("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),o("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),o("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),o("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),o("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),o("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)}}Qt.ComputeDistance_s_v1=new B,Qt.ComputeDistance_s_v2=new B,Qt.ComputeDistance_s_d=new B,Qt.ComputeDistance_s_s=new B,Qt.RayCast_s_p1=new B,Qt.RayCast_s_p2=new B,Qt.RayCast_s_d=new B,Qt.RayCast_s_e=new B,Qt.RayCast_s_q=new B,Qt.RayCast_s_r=new B,Qt.ComputeAABB_s_v1=new B,Qt.ComputeAABB_s_v2=new B;class Yt extends Wt{constructor(){super(o.b2ShapeType.e_chainShape,.016),this.m_vertices=[],this.m_count=0,this.m_prevVertex=new B,this.m_nextVertex=new B,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1}CreateLoop(o,t=o.length,e=0){if(t<3)return this;this.m_count=t+1,this.m_vertices=B.MakeArray(this.m_count);for(let i=0;i<t;++i)this.m_vertices[i].Copy(o[e+i]);return this.m_vertices[t].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}CreateChain(o,t=o.length,e=0){this.m_count=t,this.m_vertices=B.MakeArray(t);for(let i=0;i<t;++i)this.m_vertices[i].Copy(o[e+i]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this}SetPrevVertex(o){return this.m_prevVertex.Copy(o),this.m_hasPrevVertex=!0,this}SetNextVertex(o){return this.m_nextVertex.Copy(o),this.m_hasNextVertex=!0,this}Clone(){return(new Yt).Copy(this)}Copy(o){return super.Copy(o),this.CreateChain(o.m_vertices,o.m_count),this.m_prevVertex.Copy(o.m_prevVertex),this.m_nextVertex.Copy(o.m_nextVertex),this.m_hasPrevVertex=o.m_hasPrevVertex,this.m_hasNextVertex=o.m_hasNextVertex,this}GetChildCount(){return this.m_count-1}GetChildEdge(t,e){t.m_type=o.b2ShapeType.e_edgeShape,t.m_radius=this.m_radius,t.m_vertex1.Copy(this.m_vertices[e]),t.m_vertex2.Copy(this.m_vertices[e+1]),e>0?(t.m_vertex0.Copy(this.m_vertices[e-1]),t.m_hasVertex0=!0):(t.m_vertex0.Copy(this.m_prevVertex),t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3.Copy(this.m_vertices[e+2]),t.m_hasVertex3=!0):(t.m_vertex3.Copy(this.m_nextVertex),t.m_hasVertex3=this.m_hasNextVertex)}TestPoint(o,t){return!1}ComputeDistance(o,t,e,i){const s=Yt.ComputeDistance_s_edgeShape;return this.GetChildEdge(s,i),s.ComputeDistance(o,t,e,0)}RayCast(o,t,e,i){const s=Yt.RayCast_s_edgeShape;return s.m_vertex1.Copy(this.m_vertices[i]),s.m_vertex2.Copy(this.m_vertices[(i+1)%this.m_count]),s.RayCast(o,t,e,0)}ComputeAABB(o,t,e){const i=this.m_vertices[e],s=this.m_vertices[(e+1)%this.m_count],y=M.MulXV(t,i,Yt.ComputeAABB_s_v1),p=M.MulXV(t,s,Yt.ComputeAABB_s_v2);B.MinV(y,p,o.lowerBound),B.MaxV(y,p,o.upperBound)}ComputeMass(o,t){o.mass=0,o.center.SetZero(),o.I=0}SetupDistanceProxy(o,t){o.m_vertices=o.m_buffer,o.m_vertices[0].Copy(this.m_vertices[t]),t+1<this.m_count?o.m_vertices[1].Copy(this.m_vertices[t+1]):o.m_vertices[1].Copy(this.m_vertices[0]),o.m_count=2,o.m_radius=this.m_radius}ComputeSubmergedArea(o,t,e,i){return i.SetZero(),0}Dump(o){o("    const shape: b2ChainShape = new b2ChainShape();\n"),o("    const vs: b2Vec2[] = [];\n");for(let t=0;t<this.m_count;++t)o("    vs[%d] = new bVec2(%.15f, %.15f);\n",t,this.m_vertices[t].x,this.m_vertices[t].y);o("    shape.CreateChain(vs, %d);\n",this.m_count),o("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),o("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),o("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),o("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")}}Yt.ComputeDistance_s_edgeShape=new Qt,Yt.RayCast_s_edgeShape=new Qt,Yt.ComputeAABB_s_v1=new B,Yt.ComputeAABB_s_v2=new B;class Kt{constructor(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}Clone(){return(new Kt).Copy(this)}Copy(o){return this.categoryBits=o.categoryBits,this.maskBits=o.maskBits,this.groupIndex=o.groupIndex||0,this}}Kt.DEFAULT=new Kt;class $t{constructor(){this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new Kt}}class oe{constructor(o){this.aabb=new ho,this.childIndex=0,this.fixture=o}}class te{constructor(o,t){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=[],this.m_proxyCount=0,this.m_filter=new Kt,this.m_isSensor=!1,this.m_userData=null,this.m_body=t,this.m_shape=o.shape.Clone()}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(o){o!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=o)}IsSensor(){return this.m_isSensor}SetFilterData(o){this.m_filter.Copy(o),this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){let o=this.m_body.GetContactList();for(;o;){const t=o.contact,e=t.GetFixtureA(),i=t.GetFixtureB();e!==this&&i!==this||t.FlagForFiltering(),o=o.next}const t=this.m_body.GetWorld();if(null===t)return;const e=t.m_contactManager.m_broadPhase;for(let o=0;o<this.m_proxyCount;++o)e.TouchProxy(this.m_proxies[o].treeNode)}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(o){this.m_userData=o}TestPoint(o){return this.m_shape.TestPoint(this.m_body.GetTransform(),o)}ComputeDistance(o,t,e){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),o,t,e)}RayCast(o,t,e){return this.m_shape.RayCast(o,t,this.m_body.GetTransform(),e)}GetMassData(o=new Et){return this.m_shape.ComputeMass(o,this.m_density),o}SetDensity(o){this.m_density=o}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(o){this.m_friction=o}GetRestitution(){return this.m_restitution}SetRestitution(o){this.m_restitution=o}GetAABB(o){return this.m_proxies[o].aabb}Dump(o,t){o("    const fd: b2FixtureDef = new b2FixtureDef();\n"),o("    fd.friction = %.15f;\n",this.m_friction),o("    fd.restitution = %.15f;\n",this.m_restitution),o("    fd.density = %.15f;\n",this.m_density),o("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),o("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),o("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),o("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(o),o("\n"),o("    fd.shape = shape;\n"),o("\n"),o("    bodies[%d].CreateFixture(fd);\n",t)}Create(o){this.m_userData=o.userData,this.m_friction=t(o.friction,.2),this.m_restitution=t(o.restitution,0),this.m_next=null,this.m_filter.Copy(t(o.filter,Kt.DEFAULT)),this.m_isSensor=t(o.isSensor,!1),this.m_proxies=p(this.m_shape.GetChildCount(),o=>new oe(this)),this.m_proxyCount=0,this.m_density=t(o.density,0)}Destroy(){}CreateProxies(o){const t=this.m_body.m_world.m_contactManager.m_broadPhase;this.m_proxyCount=this.m_shape.GetChildCount();for(let e=0;e<this.m_proxyCount;++e){const i=this.m_proxies[e]=new oe(this);this.m_shape.ComputeAABB(i.aabb,o,e),i.treeNode=t.CreateProxy(i.aabb,i),i.childIndex=e}}DestroyProxies(){const o=this.m_body.m_world.m_contactManager.m_broadPhase;for(let t=0;t<this.m_proxyCount;++t){const e=this.m_proxies[t];delete e.treeNode.userData,o.DestroyProxy(e.treeNode),delete e.treeNode}this.m_proxyCount=0}TouchProxies(){const o=this.m_body.m_world.m_contactManager.m_broadPhase,t=this.m_proxyCount;for(let e=0;e<t;++e)o.TouchProxy(this.m_proxies[e].treeNode)}Synchronize(o,t){if(0===this.m_proxyCount)return;const e=this.m_body.m_world.m_contactManager.m_broadPhase;for(let i=0;i<this.m_proxyCount;++i){const s=this.m_proxies[i],y=te.Synchronize_s_aabb1,p=te.Synchronize_s_aabb2;this.m_shape.ComputeAABB(y,o,i),this.m_shape.ComputeAABB(p,t,i),s.aabb.Combine2(y,p);const f=B.SubVV(t.p,o.p,te.Synchronize_s_displacement);e.MoveProxy(s.treeNode,s.aabb,f)}}}te.Synchronize_s_aabb1=new ho,te.Synchronize_s_aabb2=new ho,te.Synchronize_s_displacement=new B,(jt=o.b2BodyType||(o.b2BodyType={}))[jt.b2_unknown=-1]="b2_unknown",jt[jt.b2_staticBody=0]="b2_staticBody",jt[jt.b2_kinematicBody=1]="b2_kinematicBody",jt[jt.b2_dynamicBody=2]="b2_dynamicBody";class ee{constructor(e,i){this.m_type=o.b2BodyType.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new M,this.m_xf0=new M,this.m_sweep=new I,this.m_linearVelocity=new B,this.m_angularVelocity=0,this.m_force=new B,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,this.m_bulletFlag=t(e.bullet,!1),this.m_fixedRotationFlag=t(e.fixedRotation,!1),this.m_autoSleepFlag=t(e.allowSleep,!0),this.m_awakeFlag=t(e.awake,!0),this.m_activeFlag=t(e.active,!0),this.m_world=i,this.m_xf.p.Copy(t(e.position,B.ZERO)),this.m_xf.q.SetAngle(t(e.angle,0)),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=this.m_sweep.a=this.m_xf.q.GetAngle(),this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(t(e.linearVelocity,B.ZERO)),this.m_angularVelocity=t(e.angularVelocity,0),this.m_linearDamping=t(e.linearDamping,0),this.m_angularDamping=t(e.angularDamping,0),this.m_gravityScale=t(e.gravityScale,1),this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=t(e.type,o.b2BodyType.b2_staticBody),e.type===o.b2BodyType.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=e.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}CreateFixture(o,t=0){return o instanceof Wt?this.CreateFixtureShapeDensity(o,t):this.CreateFixtureDef(o)}CreateFixtureDef(o){if(this.m_world.IsLocked())throw new Error;const t=new te(o,this);return t.Create(o),this.m_activeFlag&&t.CreateProxies(this.m_xf),t.m_next=this.m_fixtureList,this.m_fixtureList=t,++this.m_fixtureCount,t.m_density>0&&this.ResetMassData(),this.m_world.m_newFixture=!0,t}CreateFixtureShapeDensity(o,t=0){const e=ee.CreateFixtureShapeDensity_s_def;return e.shape=o,e.density=t,this.CreateFixtureDef(e)}DestroyFixture(o){if(this.m_world.IsLocked())throw new Error;let t=this.m_fixtureList,e=null;for(;null!==t;){if(t===o){e?e.m_next=o.m_next:this.m_fixtureList=o.m_next;break}e=t,t=t.m_next}let i=this.m_contactList;for(;i;){const t=i.contact;i=i.next;const e=t.GetFixtureA(),s=t.GetFixtureB();o!==e&&o!==s||this.m_world.m_contactManager.Destroy(t)}this.m_activeFlag&&o.DestroyProxies(),o.m_next=null,o.Destroy(),--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(o,t){this.SetTransformXY(o.x,o.y,t)}SetTransformXY(o,t,e){if(this.m_world.IsLocked())throw new Error;this.m_xf.q.SetAngle(e),this.m_xf.p.Set(o,t),this.m_xf0.Copy(this.m_xf),M.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=e,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=e;for(let o=this.m_fixtureList;o;o=o.m_next)o.Synchronize(this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}SetTransform(o){this.SetTransformVec(o.p,o.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}SetPosition(o){this.SetTransformVec(o,this.GetAngle())}SetPositionXY(o,t){this.SetTransformXY(o,t,this.GetAngle())}GetAngle(){return this.m_sweep.a}SetAngle(o){this.SetTransformVec(this.GetPosition(),o)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(t){this.m_type!==o.b2BodyType.b2_staticBody&&(B.DotVV(t,t)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(t))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(t){this.m_type!==o.b2BodyType.b2_staticBody&&(t*t>0&&this.SetAwake(!0),this.m_angularVelocity=t)}GetAngularVelocity(){return this.m_angularVelocity}GetDefinition(o){return o.type=this.GetType(),o.allowSleep=this.m_autoSleepFlag,o.angle=this.GetAngle(),o.angularDamping=this.m_angularDamping,o.gravityScale=this.m_gravityScale,o.angularVelocity=this.m_angularVelocity,o.fixedRotation=this.m_fixedRotationFlag,o.bullet=this.m_bulletFlag,o.awake=this.m_awakeFlag,o.linearDamping=this.m_linearDamping,o.linearVelocity.Copy(this.GetLinearVelocity()),o.position.Copy(this.GetPosition()),o.userData=this.GetUserData(),o}ApplyForce(t,e,i=!0){this.m_type===o.b2BodyType.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))}ApplyForceToCenter(t,e=!0){this.m_type===o.b2BodyType.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y))}ApplyTorque(t,e=!0){this.m_type===o.b2BodyType.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))}ApplyLinearImpulse(t,e,i=!0){this.m_type===o.b2BodyType.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)))}ApplyLinearImpulseToCenter(t,e=!0){this.m_type===o.b2BodyType.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y))}ApplyAngularImpulse(t,e=!0){this.m_type===o.b2BodyType.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*B.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(o){return o.mass=this.m_mass,o.I=this.m_I+this.m_mass*B.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),o.center.Copy(this.m_sweep.localCenter),o}SetMassData(t){if(this.m_world.IsLocked())throw new Error;if(this.m_type!==o.b2BodyType.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&!this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*B.DotVV(t.center,t.center),this.m_invI=1/this.m_I);const e=ee.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(t.center),M.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),B.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,B.SubVV(this.m_sweep.c,e,B.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===o.b2BodyType.b2_staticBody||this.m_type===o.b2BodyType.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const t=ee.ResetMassData_s_localCenter.SetZero();for(let o=this.m_fixtureList;o;o=o.m_next){if(0===o.m_density)continue;const e=o.GetMassData(ee.ResetMassData_s_massData);this.m_mass+=e.mass,t.x+=e.center.x*e.mass,t.y+=e.center.y*e.mass,this.m_I+=e.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.x*=this.m_invMass,t.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*B.DotVV(t,t),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const e=ee.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(t),M.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),B.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,B.SubVV(this.m_sweep.c,e,B.s_t0),this.m_linearVelocity)}GetWorldPoint(o,t){return M.MulXV(this.m_xf,o,t)}GetWorldVector(o,t){return V.MulRV(this.m_xf.q,o,t)}GetLocalPoint(o,t){return M.MulTXV(this.m_xf,o,t)}GetLocalVector(o,t){return V.MulTRV(this.m_xf.q,o,t)}GetLinearVelocityFromWorldPoint(o,t){return B.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,B.SubVV(o,this.m_sweep.c,B.s_t0),t)}GetLinearVelocityFromLocalPoint(o,t){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(o,t),t)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(o){this.m_linearDamping=o}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(o){this.m_angularDamping=o}GetGravityScale(){return this.m_gravityScale}SetGravityScale(o){this.m_gravityScale=o}SetType(t){if(this.m_world.IsLocked())throw new Error;if(this.m_type===t)return;this.m_type=t,this.ResetMassData(),this.m_type===o.b2BodyType.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let e=this.m_contactList;for(;e;){const o=e;e=e.next,this.m_world.m_contactManager.Destroy(o.contact)}this.m_contactList=null;for(let o=this.m_fixtureList;o;o=o.m_next)o.TouchProxies()}GetType(){return this.m_type}SetBullet(o){this.m_bulletFlag=o}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(o){this.m_autoSleepFlag=o,o||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(o){o?(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)}IsAwake(){return this.m_awakeFlag}SetActive(o){if(this.m_world.IsLocked())throw new Error;if(o!==this.IsActive())if(this.m_activeFlag=o,o)for(let o=this.m_fixtureList;o;o=o.m_next)o.CreateProxies(this.m_xf);else{for(let o=this.m_fixtureList;o;o=o.m_next)o.DestroyProxies();let o=this.m_contactList;for(;o;){const t=o;o=o.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null}}IsActive(){return this.m_activeFlag}SetFixedRotation(o){this.m_fixedRotationFlag!==o&&(this.m_fixedRotationFlag=o,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(o){this.m_userData=o}GetWorld(){return this.m_world}Dump(t){const e=this.m_islandIndex;t("{\n"),t("  const bd: b2BodyDef = new b2BodyDef();\n");let i="";switch(this.m_type){case o.b2BodyType.b2_staticBody:i="b2BodyType.b2_staticBody";break;case o.b2BodyType.b2_kinematicBody:i="b2BodyType.b2_kinematicBody";break;case o.b2BodyType.b2_dynamicBody:i="b2BodyType.b2_dynamicBody"}t("  bd.type = %s;\n",i),t("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),t("  bd.angle = %.15f;\n",this.m_sweep.a),t("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),t("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),t("  bd.linearDamping = %.15f;\n",this.m_linearDamping),t("  bd.angularDamping = %.15f;\n",this.m_angularDamping),t("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),t("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),t("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),t("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),t("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),t("  bd.gravityScale = %.15f;\n",this.m_gravityScale),t("\n"),t("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),t("\n");for(let o=this.m_fixtureList;o;o=o.m_next)t("  {\n"),o.Dump(t,e),t("  }\n");t("}\n")}SynchronizeFixtures(){const o=ee.SynchronizeFixtures_s_xf1;o.q.SetAngle(this.m_sweep.a0),V.MulRV(o.q,this.m_sweep.localCenter,o.p),B.SubVV(this.m_sweep.c0,o.p,o.p);for(let t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(o,this.m_xf)}SynchronizeTransform(){this.m_xf.q.SetAngle(this.m_sweep.a),V.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),B.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(t){return(this.m_type!==o.b2BodyType.b2_staticBody||t.m_type!==o.b2BodyType.b2_staticBody)&&this.ShouldCollideConnected(t)}ShouldCollideConnected(o){for(let t=this.m_jointList;t;t=t.next)if(t.other===o&&!t.joint.m_collideConnected)return!1;return!0}Advance(o){this.m_sweep.Advance(o),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),V.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),B.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}GetControllerList(){return this.m_controllerList}GetControllerCount(){return this.m_controllerCount}}ee.CreateFixtureShapeDensity_s_def=new $t,ee.SetMassData_s_oldCenter=new B,ee.ResetMassData_s_localCenter=new B,ee.ResetMassData_s_oldCenter=new B,ee.ResetMassData_s_massData=new Et,ee.SynchronizeFixtures_s_xf1=new M,(Ot=o.b2JointType||(o.b2JointType={}))[Ot.e_unknownJoint=0]="e_unknownJoint",Ot[Ot.e_revoluteJoint=1]="e_revoluteJoint",Ot[Ot.e_prismaticJoint=2]="e_prismaticJoint",Ot[Ot.e_distanceJoint=3]="e_distanceJoint",Ot[Ot.e_pulleyJoint=4]="e_pulleyJoint",Ot[Ot.e_mouseJoint=5]="e_mouseJoint",Ot[Ot.e_gearJoint=6]="e_gearJoint",Ot[Ot.e_wheelJoint=7]="e_wheelJoint",Ot[Ot.e_weldJoint=8]="e_weldJoint",Ot[Ot.e_frictionJoint=9]="e_frictionJoint",Ot[Ot.e_ropeJoint=10]="e_ropeJoint",Ot[Ot.e_motorJoint=11]="e_motorJoint",Ot[Ot.e_areaJoint=12]="e_areaJoint",(Nt=o.b2LimitState||(o.b2LimitState={}))[Nt.e_inactiveLimit=0]="e_inactiveLimit",Nt[Nt.e_atLowerLimit=1]="e_atLowerLimit",Nt[Nt.e_atUpperLimit=2]="e_atUpperLimit",Nt[Nt.e_equalLimits=3]="e_equalLimits";class ie{constructor(o,t){this.prev=null,this.next=null,this.joint=o,this.other=t}}class se{constructor(t){this.type=o.b2JointType.e_unknownJoint,this.userData=null,this.collideConnected=!1,this.type=t}}class ye{constructor(e){this.m_type=o.b2JointType.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=e.type,this.m_edgeA=new ie(this,e.bodyB),this.m_edgeB=new ie(this,e.bodyA),this.m_bodyA=e.bodyA,this.m_bodyB=e.bodyB,this.m_collideConnected=t(e.collideConnected,!1),this.m_userData=e.userData}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(o){this.m_userData=o}IsActive(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()}GetCollideConnected(){return this.m_collideConnected}Dump(o){o("// Dump is not supported for this joint type.\n")}ShiftOrigin(o){}}class pe extends se{constructor(){super(o.b2JointType.e_distanceJoint),this.localAnchorA=new B,this.localAnchorB=new B,this.length=1,this.frequencyHz=0,this.dampingRatio=0}Initialize(o,t,e,i){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.length=B.DistanceVV(e,i),this.frequencyHz=0,this.dampingRatio=0}}class fe extends ye{constructor(o){super(o),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_gamma=0,this.m_impulse=0,this.m_length=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new B,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_frequencyHz=t(o.frequencyHz,0),this.m_dampingRatio=t(o.dampingRatio,0),this.m_localAnchorA.Copy(o.localAnchorA),this.m_localAnchorB.Copy(o.localAnchorB),this.m_length=o.length}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*this.m_impulse*this.m_u.x,t.y=o*this.m_impulse*this.m_u.y,t}GetReactionTorque(o){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(o){this.m_length=o}Length(){return this.m_length}SetFrequency(o){this.m_frequencyHz=o}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(o){this.m_dampingRatio=o}GetDampingRatio(){return this.m_dampingRatio}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.length = %.15f;\n",this.m_length),o("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),o("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}InitVelocityConstraints(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=o.positions[this.m_indexA].c,i=o.positions[this.m_indexA].a,s=o.velocities[this.m_indexA].v;let y=o.velocities[this.m_indexA].w;const p=o.positions[this.m_indexB].c,f=o.positions[this.m_indexB].a,a=o.velocities[this.m_indexB].v;let n=o.velocities[this.m_indexB].w;const C=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(f);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),V.MulRV(C,this.m_lalcA,this.m_rA),B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),V.MulRV(r,this.m_lalcB,this.m_rB),this.m_u.x=p.x+this.m_rB.x-t.x-this.m_rA.x,this.m_u.y=p.y+this.m_rB.y-t.y-this.m_rA.y;const m=this.m_u.Length();m>.008?this.m_u.SelfMul(1/m):this.m_u.SetZero();const l=B.CrossVV(this.m_rA,this.m_u),h=B.CrossVV(this.m_rB,this.m_u);let _=this.m_invMassA+this.m_invIA*l*l+this.m_invMassB+this.m_invIB*h*h;if(this.m_mass=0!==_?1/_:0,this.m_frequencyHz>0){const t=m-this.m_length,i=2*e*this.m_frequencyHz,s=2*this.m_mass*this.m_dampingRatio*i,y=this.m_mass*i*i,p=o.step.dt;this.m_gamma=p*(s+p*y),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=t*p*y*this.m_gamma,_+=this.m_gamma,this.m_mass=0!==_?1/_:0}else this.m_gamma=0,this.m_bias=0;if(o.step.warmStarting){this.m_impulse*=o.step.dtRatio;const t=B.MulSV(this.m_impulse,this.m_u,fe.InitVelocityConstraints_s_P);s.SelfMulSub(this.m_invMassA,t),y-=this.m_invIA*B.CrossVV(this.m_rA,t),a.SelfMulAdd(this.m_invMassB,t),n+=this.m_invIB*B.CrossVV(this.m_rB,t)}else this.m_impulse=0;o.velocities[this.m_indexA].w=y,o.velocities[this.m_indexB].w=n}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=B.AddVCrossSV(t,e,this.m_rA,fe.SolveVelocityConstraints_s_vpA),p=B.AddVCrossSV(i,s,this.m_rB,fe.SolveVelocityConstraints_s_vpB),f=B.DotVV(this.m_u,B.SubVV(p,y,B.s_t0)),a=-this.m_mass*(f+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=a;const n=B.MulSV(a,this.m_u,fe.SolveVelocityConstraints_s_P);t.SelfMulSub(this.m_invMassA,n),e-=this.m_invIA*B.CrossVV(this.m_rA,n),i.SelfMulAdd(this.m_invMassB,n),s+=this.m_invIB*B.CrossVV(this.m_rB,n),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s}SolvePositionConstraints(o){if(this.m_frequencyHz>0)return!0;const t=o.positions[this.m_indexA].c;let e=o.positions[this.m_indexA].a;const i=o.positions[this.m_indexB].c;let s=o.positions[this.m_indexB].a;const y=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(s),f=V.MulRV(y,this.m_lalcA,this.m_rA),n=V.MulRV(p,this.m_lalcB,this.m_rB),C=this.m_u;C.x=i.x+n.x-t.x-f.x,C.y=i.y+n.y-t.y-f.y;let m=this.m_u.Normalize()-this.m_length;m=r(m,-.2,.2);const l=-this.m_mass*m,h=B.MulSV(l,C,fe.SolvePositionConstraints_s_P);return t.SelfMulSub(this.m_invMassA,h),e-=this.m_invIA*B.CrossVV(f,h),i.SelfMulAdd(this.m_invMassB,h),s+=this.m_invIB*B.CrossVV(n,h),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=s,a(m)<.008}}fe.InitVelocityConstraints_s_P=new B,fe.SolveVelocityConstraints_s_vpA=new B,fe.SolveVelocityConstraints_s_vpB=new B,fe.SolveVelocityConstraints_s_P=new B,fe.SolvePositionConstraints_s_P=new B;class ae extends ye{constructor(o){super(o),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_impulse=0,this.m_targetArea=0,this.m_bodies=o.bodies,this.m_frequencyHz=t(o.frequencyHz,0),this.m_dampingRatio=t(o.dampingRatio,0),this.m_targetLengths=f(o.bodies.length),this.m_normals=B.MakeArray(o.bodies.length),this.m_joints=[],this.m_deltas=B.MakeArray(o.bodies.length),this.m_delta=new B;const e=new pe;e.frequencyHz=this.m_frequencyHz,e.dampingRatio=this.m_dampingRatio,this.m_targetArea=0;for(let o=0;o<this.m_bodies.length;++o){const t=this.m_bodies[o],i=this.m_bodies[(o+1)%this.m_bodies.length],s=t.GetWorldCenter(),y=i.GetWorldCenter();this.m_targetLengths[o]=B.DistanceVV(s,y),this.m_targetArea+=B.CrossVV(s,y),e.Initialize(t,i,s,y),this.m_joints[o]=t.GetWorld().CreateJoint(e)}this.m_targetArea*=.5}GetAnchorA(o){return o}GetAnchorB(o){return o}GetReactionForce(o,t){return t}GetReactionTorque(o){return 0}SetFrequency(o){this.m_frequencyHz=o;for(let t=0;t<this.m_joints.length;++t)this.m_joints[t].SetFrequency(o)}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(o){this.m_dampingRatio=o;for(let t=0;t<this.m_joints.length;++t)this.m_joints[t].SetDampingRatio(o)}GetDampingRatio(){return this.m_dampingRatio}Dump(o){o("Area joint dumping is not supported.\n")}InitVelocityConstraints(o){for(let t=0;t<this.m_bodies.length;++t){const e=this.m_bodies[(t+this.m_bodies.length-1)%this.m_bodies.length],i=this.m_bodies[(t+1)%this.m_bodies.length],s=o.positions[e.m_islandIndex].c,y=o.positions[i.m_islandIndex].c,p=this.m_deltas[t];B.SubVV(y,s,p)}if(o.step.warmStarting){this.m_impulse*=o.step.dtRatio;for(let t=0;t<this.m_bodies.length;++t){const e=this.m_bodies[t],i=o.velocities[e.m_islandIndex].v,s=this.m_deltas[t];i.x+=e.m_invMass*s.y*.5*this.m_impulse,i.y+=e.m_invMass*-s.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(o){let t=0,e=0;for(let i=0;i<this.m_bodies.length;++i){const s=this.m_bodies[i],y=o.velocities[s.m_islandIndex].v,p=this.m_deltas[i];t+=p.LengthSquared()/s.GetMass(),e+=B.CrossVV(y,p)}const i=-2*e/t;this.m_impulse+=i;for(let t=0;t<this.m_bodies.length;++t){const e=this.m_bodies[t],s=o.velocities[e.m_islandIndex].v,y=this.m_deltas[t];s.x+=e.m_invMass*y.y*.5*i,s.y+=e.m_invMass*-y.x*.5*i}}SolvePositionConstraints(o){let t=0,e=0;for(let i=0;i<this.m_bodies.length;++i){const s=this.m_bodies[i],y=this.m_bodies[(i+1)%this.m_bodies.length],p=o.positions[s.m_islandIndex].c,f=o.positions[y.m_islandIndex].c,a=B.SubVV(f,p,this.m_delta);let n=a.Length();n<1e-5&&(n=1),this.m_normals[i].x=a.y/n,this.m_normals[i].y=-a.x/n,t+=n,e+=B.CrossVV(p,f)}e*=.5;const i=.5*(this.m_targetArea-e)/t;let s=!0;for(let t=0;t<this.m_bodies.length;++t){const e=this.m_bodies[t],y=o.positions[e.m_islandIndex].c,p=(t+1)%this.m_bodies.length,f=B.AddVV(this.m_normals[t],this.m_normals[p],this.m_delta);f.SelfMul(i);const a=f.LengthSquared();a>l(.2)&&f.SelfMul(.2/_(a)),a>l(.008)&&(s=!1),y.x+=f.x,y.y+=f.y}return s}}class ne extends ye{constructor(o){super(o),this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_linearImpulse=new B,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new A,this.m_angularMass=0,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_K=new A,this.m_localAnchorA.Copy(o.localAnchorA),this.m_localAnchorB.Copy(o.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=t(o.maxForce,0),this.m_maxTorque=t(o.maxTorque,0),this.m_linearMass.SetZero()}InitVelocityConstraints(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=o.positions[this.m_indexA].a,e=o.velocities[this.m_indexA].v;let i=o.velocities[this.m_indexA].w;const s=o.positions[this.m_indexB].a,y=o.velocities[this.m_indexB].v;let p=o.velocities[this.m_indexB].w;const f=this.m_qA.SetAngle(t),a=this.m_qB.SetAngle(s);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const n=V.MulRV(f,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const C=V.MulRV(a,this.m_lalcB,this.m_rB),r=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,h=this.m_invIB,_=this.m_K;if(_.ex.x=r+m+l*n.y*n.y+h*C.y*C.y,_.ex.y=-l*n.x*n.y-h*C.x*C.y,_.ey.x=_.ex.y,_.ey.y=r+m+l*n.x*n.x+h*C.x*C.x,_.GetInverse(this.m_linearMass),this.m_angularMass=l+h,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),o.step.warmStarting){this.m_linearImpulse.SelfMul(o.step.dtRatio),this.m_angularImpulse*=o.step.dtRatio;const t=this.m_linearImpulse;e.SelfMulSub(r,t),i-=l*(B.CrossVV(this.m_rA,t)+this.m_angularImpulse),y.SelfMulAdd(m,t),p+=h*(B.CrossVV(this.m_rB,t)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;o.velocities[this.m_indexA].w=i,o.velocities[this.m_indexB].w=p}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=this.m_invMassA,p=this.m_invMassB,f=this.m_invIA,a=this.m_invIB,n=o.step.dt;{const o=s-e;let t=-this.m_angularMass*o;const i=this.m_angularImpulse,y=n*this.m_maxTorque;this.m_angularImpulse=r(this.m_angularImpulse+t,-y,y),t=this.m_angularImpulse-i,e-=f*t,s+=a*t}{const o=B.SubVV(B.AddVCrossSV(i,s,this.m_rB,B.s_t0),B.AddVCrossSV(t,e,this.m_rA,B.s_t1),ne.SolveVelocityConstraints_s_Cdot_v2),C=A.MulMV(this.m_linearMass,o,ne.SolveVelocityConstraints_s_impulseV).SelfNeg(),r=ne.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(C);const m=n*this.m_maxForce;this.m_linearImpulse.LengthSquared()>m*m&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(m)),B.SubVV(this.m_linearImpulse,r,C),t.SelfMulSub(y,C),e-=f*B.CrossVV(this.m_rA,C),i.SelfMulAdd(p,C),s+=a*B.CrossVV(this.m_rB,C)}o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s}SolvePositionConstraints(o){return!0}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*this.m_linearImpulse.x,t.y=o*this.m_linearImpulse.y,t}GetReactionTorque(o){return o*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(o){this.m_maxForce=o}GetMaxForce(){return this.m_maxForce}SetMaxTorque(o){this.m_maxTorque=o}GetMaxTorque(){return this.m_maxTorque}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.maxForce = %.15f;\n",this.m_maxForce),o("  jd.maxTorque = %.15f;\n",this.m_maxTorque),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}ne.SolveVelocityConstraints_s_Cdot_v2=new B,ne.SolveVelocityConstraints_s_impulseV=new B,ne.SolveVelocityConstraints_s_oldImpulseV=new B;class Ce extends ye{constructor(e){let i,s;super(e),this.m_typeA=o.b2JointType.e_unknownJoint,this.m_typeB=o.b2JointType.e_unknownJoint,this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_localAnchorC=new B,this.m_localAnchorD=new B,this.m_localAxisC=new B,this.m_localAxisD=new B,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new B,this.m_lcB=new B,this.m_lcC=new B,this.m_lcD=new B,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new B,this.m_JvBD=new B,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_qA=new V,this.m_qB=new V,this.m_qC=new V,this.m_qD=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_lalcC=new B,this.m_lalcD=new B,this.m_joint1=e.joint1,this.m_joint2=e.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const y=this.m_bodyA.m_xf,p=this.m_bodyA.m_sweep.a,f=this.m_bodyC.m_xf,a=this.m_bodyC.m_sweep.a;if(this.m_typeA===o.b2JointType.e_revoluteJoint){const o=e.joint1;this.m_localAnchorC.Copy(o.m_localAnchorA),this.m_localAnchorA.Copy(o.m_localAnchorB),this.m_referenceAngleA=o.m_referenceAngle,this.m_localAxisC.SetZero(),i=p-a-this.m_referenceAngleA}else{const o=e.joint1;this.m_localAnchorC.Copy(o.m_localAnchorA),this.m_localAnchorA.Copy(o.m_localAnchorB),this.m_referenceAngleA=o.m_referenceAngle,this.m_localAxisC.Copy(o.m_localXAxisA);const t=this.m_localAnchorC,s=V.MulTRV(f.q,B.AddVV(V.MulRV(y.q,this.m_localAnchorA,B.s_t0),B.SubVV(y.p,f.p,B.s_t1),B.s_t0),B.s_t0);i=B.DotVV(B.SubVV(s,t,B.s_t0),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const n=this.m_bodyB.m_xf,C=this.m_bodyB.m_sweep.a,r=this.m_bodyD.m_xf,m=this.m_bodyD.m_sweep.a;if(this.m_typeB===o.b2JointType.e_revoluteJoint){const o=e.joint2;this.m_localAnchorD.Copy(o.m_localAnchorA),this.m_localAnchorB.Copy(o.m_localAnchorB),this.m_referenceAngleB=o.m_referenceAngle,this.m_localAxisD.SetZero(),s=C-m-this.m_referenceAngleB}else{const o=e.joint2;this.m_localAnchorD.Copy(o.m_localAnchorA),this.m_localAnchorB.Copy(o.m_localAnchorB),this.m_referenceAngleB=o.m_referenceAngle,this.m_localAxisD.Copy(o.m_localXAxisA);const t=this.m_localAnchorD,i=V.MulTRV(r.q,B.AddVV(V.MulRV(n.q,this.m_localAnchorB,B.s_t0),B.SubVV(n.p,r.p,B.s_t1),B.s_t0),B.s_t0);s=B.DotVV(B.SubVV(i,t,B.s_t0),this.m_localAxisD)}this.m_ratio=t(e.ratio,1),this.m_constant=i+this.m_ratio*s,this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const y=t.positions[this.m_indexB].a,p=t.velocities[this.m_indexB].v;let f=t.velocities[this.m_indexB].w;const a=t.positions[this.m_indexC].a,n=t.velocities[this.m_indexC].v;let C=t.velocities[this.m_indexC].w;const r=t.positions[this.m_indexD].a,m=t.velocities[this.m_indexD].v;let l=t.velocities[this.m_indexD].w;const h=this.m_qA.SetAngle(e),_=this.m_qB.SetAngle(y),c=this.m_qC.SetAngle(a),u=this.m_qD.SetAngle(r);if(this.m_mass=0,this.m_typeA===o.b2JointType.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const o=V.MulRV(c,this.m_localAxisC,Ce.InitVelocityConstraints_s_u);B.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC);const t=V.MulRV(c,this.m_lalcC,Ce.InitVelocityConstraints_s_rC);B.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA);const e=V.MulRV(h,this.m_lalcA,Ce.InitVelocityConstraints_s_rA);this.m_JvAC.Copy(o),this.m_JwC=B.CrossVV(t,o),this.m_JwA=B.CrossVV(e,o),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===o.b2JointType.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const o=V.MulRV(u,this.m_localAxisD,Ce.InitVelocityConstraints_s_u);B.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD);const t=V.MulRV(u,this.m_lalcD,Ce.InitVelocityConstraints_s_rD);B.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB);const e=V.MulRV(_,this.m_lalcB,Ce.InitVelocityConstraints_s_rB);B.MulSV(this.m_ratio,o,this.m_JvBD),this.m_JwD=this.m_ratio*B.CrossVV(t,o),this.m_JwB=this.m_ratio*B.CrossVV(e,o),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.step.warmStarting?(i.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),s+=this.m_iA*this.m_impulse*this.m_JwA,p.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),f+=this.m_iB*this.m_impulse*this.m_JwB,n.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),C-=this.m_iC*this.m_impulse*this.m_JwC,m.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),l-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=f,t.velocities[this.m_indexC].w=C,t.velocities[this.m_indexD].w=l}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=o.velocities[this.m_indexC].v;let p=o.velocities[this.m_indexC].w;const f=o.velocities[this.m_indexD].v;let a=o.velocities[this.m_indexD].w,n=B.DotVV(this.m_JvAC,B.SubVV(t,y,B.s_t0))+B.DotVV(this.m_JvBD,B.SubVV(i,f,B.s_t0));n+=this.m_JwA*e-this.m_JwC*p+(this.m_JwB*s-this.m_JwD*a);const C=-this.m_mass*n;this.m_impulse+=C,t.SelfMulAdd(this.m_mA*C,this.m_JvAC),e+=this.m_iA*C*this.m_JwA,i.SelfMulAdd(this.m_mB*C,this.m_JvBD),s+=this.m_iB*C*this.m_JwB,y.SelfMulSub(this.m_mC*C,this.m_JvAC),p-=this.m_iC*C*this.m_JwC,f.SelfMulSub(this.m_mD*C,this.m_JvBD),a-=this.m_iD*C*this.m_JwD,o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s,o.velocities[this.m_indexC].w=p,o.velocities[this.m_indexD].w=a}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const s=t.positions[this.m_indexB].c;let y=t.positions[this.m_indexB].a;const p=t.positions[this.m_indexC].c;let f=t.positions[this.m_indexC].a;const a=t.positions[this.m_indexD].c;let n=t.positions[this.m_indexD].a;const C=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(y),m=this.m_qC.SetAngle(f),l=this.m_qD.SetAngle(n);let h,_;const c=this.m_JvAC,u=this.m_JvBD;let d,g,x,b,v=0;if(this.m_typeA===o.b2JointType.e_revoluteJoint)c.SetZero(),d=1,x=1,v+=this.m_iA+this.m_iC,h=i-f-this.m_referenceAngleA;else{const o=V.MulRV(m,this.m_localAxisC,Ce.SolvePositionConstraints_s_u),t=V.MulRV(m,this.m_lalcC,Ce.SolvePositionConstraints_s_rC),i=V.MulRV(C,this.m_lalcA,Ce.SolvePositionConstraints_s_rA);c.Copy(o),x=B.CrossVV(t,o),d=B.CrossVV(i,o),v+=this.m_mC+this.m_mA+this.m_iC*x*x+this.m_iA*d*d;const s=this.m_lalcC,y=V.MulTRV(m,B.AddVV(i,B.SubVV(e,p,B.s_t0),B.s_t0),B.s_t0);h=B.DotVV(B.SubVV(y,s,B.s_t0),this.m_localAxisC)}if(this.m_typeB===o.b2JointType.e_revoluteJoint)u.SetZero(),g=this.m_ratio,b=this.m_ratio,v+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),_=y-n-this.m_referenceAngleB;else{const o=V.MulRV(l,this.m_localAxisD,Ce.SolvePositionConstraints_s_u),t=V.MulRV(l,this.m_lalcD,Ce.SolvePositionConstraints_s_rD),e=V.MulRV(r,this.m_lalcB,Ce.SolvePositionConstraints_s_rB);B.MulSV(this.m_ratio,o,u),b=this.m_ratio*B.CrossVV(t,o),g=this.m_ratio*B.CrossVV(e,o),v+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*b*b+this.m_iB*g*g;const i=this.m_lalcD,y=V.MulTRV(l,B.AddVV(e,B.SubVV(s,a,B.s_t0),B.s_t0),B.s_t0);_=B.DotVV(B.SubVV(y,i,B.s_t0),this.m_localAxisD)}const S=h+this.m_ratio*_-this.m_constant;let A=0;return v>0&&(A=-S/v),e.SelfMulAdd(this.m_mA*A,c),i+=this.m_iA*A*d,s.SelfMulAdd(this.m_mB*A,u),y+=this.m_iB*A*g,p.SelfMulSub(this.m_mC*A,c),f-=this.m_iC*A*x,a.SelfMulSub(this.m_mD*A,u),n-=this.m_iD*A*b,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=y,t.positions[this.m_indexC].a=f,t.positions[this.m_indexD].a=n,!0}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return B.MulSV(o*this.m_impulse,this.m_JvAC,t)}GetReactionTorque(o){return o*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(o){this.m_ratio=o}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex,i=this.m_joint1.m_index,s=this.m_joint2.m_index;o("  const jd: b2GearJointDef = new b2GearJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.joint1 = joints[%d];\n",i),o("  jd.joint2 = joints[%d];\n",s),o("  jd.ratio = %.15f;\n",this.m_ratio),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Ce.InitVelocityConstraints_s_u=new B,Ce.InitVelocityConstraints_s_rA=new B,Ce.InitVelocityConstraints_s_rB=new B,Ce.InitVelocityConstraints_s_rC=new B,Ce.InitVelocityConstraints_s_rD=new B,Ce.SolvePositionConstraints_s_u=new B,Ce.SolvePositionConstraints_s_rA=new B,Ce.SolvePositionConstraints_s_rB=new B,Ce.SolvePositionConstraints_s_rC=new B,Ce.SolvePositionConstraints_s_rD=new B;class re extends ye{constructor(o){super(o),this.m_linearOffset=new B,this.m_angularOffset=0,this.m_linearImpulse=new B,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_correctionFactor=.3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_linearError=new B,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new A,this.m_angularMass=0,this.m_qA=new V,this.m_qB=new V,this.m_K=new A,this.m_linearOffset.Copy(t(o.linearOffset,B.ZERO)),this.m_linearImpulse.SetZero(),this.m_maxForce=t(o.maxForce,0),this.m_maxTorque=t(o.maxTorque,0),this.m_correctionFactor=t(o.correctionFactor,.3)}GetAnchorA(o){const t=this.m_bodyA.GetPosition();return o.x=t.x,o.y=t.y,o}GetAnchorB(o){const t=this.m_bodyB.GetPosition();return o.x=t.x,o.y=t.y,o}GetReactionForce(o,t){return B.MulSV(o,this.m_linearImpulse,t)}GetReactionTorque(o){return o*this.m_angularImpulse}SetLinearOffset(o){B.IsEqualToV(o,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(o))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(o){o!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=o)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(o){this.m_maxForce=o}GetMaxForce(){return this.m_maxForce}SetMaxTorque(o){this.m_maxTorque=o}GetMaxTorque(){return this.m_maxTorque}InitVelocityConstraints(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,i=o.velocities[this.m_indexA].v;let s=o.velocities[this.m_indexA].w;const y=o.positions[this.m_indexB].c,p=o.positions[this.m_indexB].a,f=o.velocities[this.m_indexB].v;let a=o.velocities[this.m_indexB].w;const n=this.m_qA.SetAngle(e),C=this.m_qB.SetAngle(p),r=V.MulRV(n,B.SubVV(this.m_linearOffset,this.m_localCenterA,B.s_t0),this.m_rA),m=V.MulRV(C,B.NegV(this.m_localCenterB,B.s_t0),this.m_rB),l=this.m_invMassA,h=this.m_invMassB,_=this.m_invIA,c=this.m_invIB,u=this.m_K;if(u.ex.x=l+h+_*r.y*r.y+c*m.y*m.y,u.ex.y=-_*r.x*r.y-c*m.x*m.y,u.ey.x=u.ex.y,u.ey.y=l+h+_*r.x*r.x+c*m.x*m.x,u.GetInverse(this.m_linearMass),this.m_angularMass=_+c,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),B.SubVV(B.AddVV(y,m,B.s_t0),B.AddVV(t,r,B.s_t1),this.m_linearError),this.m_angularError=p-e-this.m_angularOffset,o.step.warmStarting){this.m_linearImpulse.SelfMul(o.step.dtRatio),this.m_angularImpulse*=o.step.dtRatio;const t=this.m_linearImpulse;i.SelfMulSub(l,t),s-=_*(B.CrossVV(r,t)+this.m_angularImpulse),f.SelfMulAdd(h,t),a+=c*(B.CrossVV(m,t)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;o.velocities[this.m_indexA].w=s,o.velocities[this.m_indexB].w=a}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=this.m_invMassA,p=this.m_invMassB,f=this.m_invIA,a=this.m_invIB,n=o.step.dt,C=o.step.inv_dt;{const o=s-e+C*this.m_correctionFactor*this.m_angularError;let t=-this.m_angularMass*o;const i=this.m_angularImpulse,y=n*this.m_maxTorque;this.m_angularImpulse=r(this.m_angularImpulse+t,-y,y),t=this.m_angularImpulse-i,e-=f*t,s+=a*t}{const o=this.m_rA,r=this.m_rB,m=B.AddVV(B.SubVV(B.AddVV(i,B.CrossSV(s,r,B.s_t0),B.s_t0),B.AddVV(t,B.CrossSV(e,o,B.s_t1),B.s_t1),B.s_t2),B.MulSV(C*this.m_correctionFactor,this.m_linearError,B.s_t3),re.SolveVelocityConstraints_s_Cdot_v2),l=A.MulMV(this.m_linearMass,m,re.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),h=re.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(l);const _=n*this.m_maxForce;this.m_linearImpulse.LengthSquared()>_*_&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(_)),B.SubVV(this.m_linearImpulse,h,l),t.SelfMulSub(y,l),e-=f*B.CrossVV(o,l),i.SelfMulAdd(p,l),s+=a*B.CrossVV(r,l)}o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s}SolvePositionConstraints(o){return!0}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),o("  jd.angularOffset = %.15f;\n",this.m_angularOffset),o("  jd.maxForce = %.15f;\n",this.m_maxForce),o("  jd.maxTorque = %.15f;\n",this.m_maxTorque),o("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}re.SolveVelocityConstraints_s_Cdot_v2=new B,re.SolveVelocityConstraints_s_impulse_v2=new B,re.SolveVelocityConstraints_s_oldImpulse_v2=new B;class me extends ye{constructor(o){super(o),this.m_localAnchorB=new B,this.m_targetA=new B,this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_beta=0,this.m_impulse=new B,this.m_maxForce=0,this.m_gamma=0,this.m_indexA=0,this.m_indexB=0,this.m_rB=new B,this.m_localCenterB=new B,this.m_invMassB=0,this.m_invIB=0,this.m_mass=new A,this.m_C=new B,this.m_qB=new V,this.m_lalcB=new B,this.m_K=new A,this.m_targetA.Copy(t(o.target,B.ZERO)),M.MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=t(o.maxForce,0),this.m_impulse.SetZero(),this.m_frequencyHz=t(o.frequencyHz,0),this.m_dampingRatio=t(o.dampingRatio,0),this.m_beta=0,this.m_gamma=0}SetTarget(o){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(o)}GetTarget(){return this.m_targetA}SetMaxForce(o){this.m_maxForce=o}GetMaxForce(){return this.m_maxForce}SetFrequency(o){this.m_frequencyHz=o}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(o){this.m_dampingRatio=o}GetDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(o){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const t=o.positions[this.m_indexB].c,i=o.positions[this.m_indexB].a,s=o.velocities[this.m_indexB].v;let y=o.velocities[this.m_indexB].w;const p=this.m_qB.SetAngle(i),f=this.m_bodyB.GetMass(),a=2*e*this.m_frequencyHz,n=2*f*this.m_dampingRatio*a,C=f*(a*a),r=o.step.dt;this.m_gamma=r*(n+r*C),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=r*C*this.m_gamma,B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),V.MulRV(p,this.m_lalcB,this.m_rB);const m=this.m_K;m.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,m.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,m.ey.x=m.ex.y,m.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,m.GetInverse(this.m_mass),this.m_C.x=t.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=t.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),y*=.98,o.step.warmStarting?(this.m_impulse.SelfMul(o.step.dtRatio),s.x+=this.m_invMassB*this.m_impulse.x,s.y+=this.m_invMassB*this.m_impulse.y,y+=this.m_invIB*B.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),o.velocities[this.m_indexB].w=y}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexB].v;let e=o.velocities[this.m_indexB].w;const i=B.AddVCrossSV(t,e,this.m_rB,me.SolveVelocityConstraints_s_Cdot),s=A.MulMV(this.m_mass,B.AddVV(i,B.AddVV(this.m_C,B.MulSV(this.m_gamma,this.m_impulse,B.s_t0),B.s_t0),B.s_t0).SelfNeg(),me.SolveVelocityConstraints_s_impulse),y=me.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(s);const p=o.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>p*p&&this.m_impulse.SelfMul(p/this.m_impulse.Length()),B.SubVV(this.m_impulse,y,s),t.SelfMulAdd(this.m_invMassB,s),e+=this.m_invIB*B.CrossVV(this.m_rB,s),o.velocities[this.m_indexB].w=e}SolvePositionConstraints(o){return!0}GetAnchorA(o){return o.x=this.m_targetA.x,o.y=this.m_targetA.y,o}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return B.MulSV(o,this.m_impulse,t)}GetReactionTorque(o){return 0}Dump(o){o("Mouse joint dumping is not supported.\n")}ShiftOrigin(o){this.m_targetA.SelfSub(o)}}me.SolveVelocityConstraints_s_Cdot=new B,me.SolveVelocityConstraints_s_impulse=new B,me.SolveVelocityConstraints_s_oldImpulse=new B;class le extends ye{constructor(e){super(e),this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_localXAxisA=new B,this.m_localYAxisA=new B,this.m_referenceAngle=0,this.m_impulse=new S(0,0,0),this.m_motorImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_limitState=o.b2LimitState.e_inactiveLimit,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new B(0,0),this.m_perp=new B(0,0),this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new w,this.m_K3=new w,this.m_K2=new A,this.m_motorMass=0,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_rA=new B,this.m_rB=new B,this.m_localAnchorA.Copy(t(e.localAnchorA,B.ZERO)),this.m_localAnchorB.Copy(t(e.localAnchorB,B.ZERO)),this.m_localXAxisA.Copy(t(e.localAxisA,new B(1,0))).SelfNormalize(),B.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=t(e.referenceAngle,0),this.m_lowerTranslation=t(e.lowerTranslation,0),this.m_upperTranslation=t(e.upperTranslation,0),this.m_maxMotorForce=t(e.maxMotorForce,0),this.m_motorSpeed=t(e.motorSpeed,0),this.m_enableLimit=t(e.enableLimit,!1),this.m_enableMotor=t(e.enableMotor,!1)}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let y=t.velocities[this.m_indexA].w;const p=t.positions[this.m_indexB].c,f=t.positions[this.m_indexB].a,n=t.velocities[this.m_indexB].v;let C=t.velocities[this.m_indexB].w;const r=this.m_qA.SetAngle(i),m=this.m_qB.SetAngle(f);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const l=V.MulRV(r,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const h=V.MulRV(m,this.m_lalcB,this.m_rB),_=B.AddVV(B.SubVV(p,e,B.s_t0),B.SubVV(h,l,B.s_t1),le.InitVelocityConstraints_s_d),c=this.m_invMassA,u=this.m_invMassB,d=this.m_invIA,g=this.m_invIB;if(V.MulRV(r,this.m_localXAxisA,this.m_axis),this.m_a1=B.CrossVV(B.AddVV(_,l,B.s_t0),this.m_axis),this.m_a2=B.CrossVV(h,this.m_axis),this.m_motorMass=c+u+d*this.m_a1*this.m_a1+g*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),V.MulRV(r,this.m_localYAxisA,this.m_perp),this.m_s1=B.CrossVV(B.AddVV(_,l,B.s_t0),this.m_perp),this.m_s2=B.CrossVV(h,this.m_perp),this.m_K.ex.x=c+u+d*this.m_s1*this.m_s1+g*this.m_s2*this.m_s2,this.m_K.ex.y=d*this.m_s1+g*this.m_s2,this.m_K.ex.z=d*this.m_s1*this.m_a1+g*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=d+g,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=d*this.m_a1+g*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=c+u+d*this.m_a1*this.m_a1+g*this.m_a2*this.m_a2,this.m_enableLimit){const t=B.DotVV(this.m_axis,_);a(this.m_upperTranslation-this.m_lowerTranslation)<.016?this.m_limitState=o.b2LimitState.e_equalLimits:t<=this.m_lowerTranslation?this.m_limitState!==o.b2LimitState.e_atLowerLimit&&(this.m_limitState=o.b2LimitState.e_atLowerLimit,this.m_impulse.z=0):t>=this.m_upperTranslation?this.m_limitState!==o.b2LimitState.e_atUpperLimit&&(this.m_limitState=o.b2LimitState.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=o.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=o.b2LimitState.e_inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor||(this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse.SelfMul(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio;const o=B.AddVV(B.MulSV(this.m_impulse.x,this.m_perp,B.s_t0),B.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,B.s_t1),le.InitVelocityConstraints_s_P),e=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,i=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;s.SelfMulSub(c,o),y-=d*e,n.SelfMulAdd(u,o),C+=g*i}else this.m_impulse.SetZero(),this.m_motorImpulse=0;t.velocities[this.m_indexA].w=y,t.velocities[this.m_indexB].w=C}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let y=t.velocities[this.m_indexB].w;const p=this.m_invMassA,f=this.m_invMassB,a=this.m_invIA,m=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==o.b2LimitState.e_equalLimits){const o=B.DotVV(this.m_axis,B.SubVV(s,e,B.s_t0))+this.m_a2*y-this.m_a1*i;let n=this.m_motorMass*(this.m_motorSpeed-o);const C=this.m_motorImpulse,l=t.step.dt*this.m_maxMotorForce;this.m_motorImpulse=r(this.m_motorImpulse+n,-l,l),n=this.m_motorImpulse-C;const h=B.MulSV(n,this.m_axis,le.SolveVelocityConstraints_s_P),_=n*this.m_a1,c=n*this.m_a2;e.SelfMulSub(p,h),i-=a*_,s.SelfMulAdd(f,h),y+=m*c}const l=B.DotVV(this.m_perp,B.SubVV(s,e,B.s_t0))+this.m_s2*y-this.m_s1*i,h=y-i;if(this.m_enableLimit&&this.m_limitState!==o.b2LimitState.e_inactiveLimit){const t=B.DotVV(this.m_axis,B.SubVV(s,e,B.s_t0))+this.m_a2*y-this.m_a1*i,r=le.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),_=this.m_K.Solve33(-l,-h,-t,le.SolveVelocityConstraints_s_df3);this.m_impulse.SelfAdd(_),this.m_limitState===o.b2LimitState.e_atLowerLimit?this.m_impulse.z=C(this.m_impulse.z,0):this.m_limitState===o.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=n(this.m_impulse.z,0));const c=-l-(this.m_impulse.z-r.z)*this.m_K.ez.x,u=-h-(this.m_impulse.z-r.z)*this.m_K.ez.y,d=this.m_K.Solve22(c,u,le.SolveVelocityConstraints_s_f2r);d.x+=r.x,d.y+=r.y,this.m_impulse.x=d.x,this.m_impulse.y=d.y,_.x=this.m_impulse.x-r.x,_.y=this.m_impulse.y-r.y,_.z=this.m_impulse.z-r.z;const g=B.AddVV(B.MulSV(_.x,this.m_perp,B.s_t0),B.MulSV(_.z,this.m_axis,B.s_t1),le.SolveVelocityConstraints_s_P),x=_.x*this.m_s1+_.y+_.z*this.m_a1,b=_.x*this.m_s2+_.y+_.z*this.m_a2;e.SelfMulSub(p,g),i-=a*x,s.SelfMulAdd(f,g),y+=m*b}else{const o=this.m_K.Solve22(-l,-h,le.SolveVelocityConstraints_s_df2);this.m_impulse.x+=o.x,this.m_impulse.y+=o.y;const t=B.MulSV(o.x,this.m_perp,le.SolveVelocityConstraints_s_P),n=o.x*this.m_s1+o.y,C=o.x*this.m_s2+o.y;e.SelfMulSub(p,t),i-=a*n,s.SelfMulAdd(f,t),y+=m*C}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=y}SolvePositionConstraints(o){const t=o.positions[this.m_indexA].c;let e=o.positions[this.m_indexA].a;const s=o.positions[this.m_indexB].c;let y=o.positions[this.m_indexB].a;const p=this.m_qA.SetAngle(e),f=this.m_qB.SetAngle(y),n=this.m_invMassA,m=this.m_invMassB,l=this.m_invIA,h=this.m_invIB,_=V.MulRV(p,this.m_lalcA,this.m_rA),c=V.MulRV(f,this.m_lalcB,this.m_rB),u=B.SubVV(B.AddVV(s,c,B.s_t0),B.AddVV(t,_,B.s_t1),le.SolvePositionConstraints_s_d),d=V.MulRV(p,this.m_localXAxisA,this.m_axis),g=B.CrossVV(B.AddVV(u,_,B.s_t0),d),x=B.CrossVV(c,d),b=V.MulRV(p,this.m_localYAxisA,this.m_perp),v=B.CrossVV(B.AddVV(u,_,B.s_t0),b),S=B.CrossVV(c,b);let A=le.SolvePositionConstraints_s_impulse;const w=B.DotVV(b,u),M=y-e-this.m_referenceAngle;let I=a(w);const P=a(M);let G=!1,D=0;if(this.m_enableLimit){const o=B.DotVV(d,u);a(this.m_upperTranslation-this.m_lowerTranslation)<.016?(D=r(o,-.2,.2),I=C(I,a(o)),G=!0):o<=this.m_lowerTranslation?(D=r(o-this.m_lowerTranslation+.008,-.2,0),I=C(I,this.m_lowerTranslation-o),G=!0):o>=this.m_upperTranslation&&(D=r(o-this.m_upperTranslation-.008,0,.2),I=C(I,o-this.m_upperTranslation),G=!0)}if(G){const o=n+m+l*v*v+h*S*S,t=l*v+h*S,e=l*v*g+h*S*x;let i=l+h;0===i&&(i=1);const s=l*g+h*x,y=n+m+l*g*g+h*x*x,p=this.m_K3;p.ex.SetXYZ(o,t,e),p.ey.SetXYZ(t,i,s),p.ez.SetXYZ(e,s,y),A=p.Solve33(-w,-M,-D,A)}else{const o=n+m+l*v*v+h*S*S,t=l*v+h*S;let e=l+h;0===e&&(e=1);const i=this.m_K2;i.ex.Set(o,t),i.ey.Set(t,e);const s=i.Solve(-w,-M,le.SolvePositionConstraints_s_impulse1);A.x=s.x,A.y=s.y,A.z=0}const L=B.AddVV(B.MulSV(A.x,b,B.s_t0),B.MulSV(A.z,d,B.s_t1),le.SolvePositionConstraints_s_P),T=A.x*v+A.y+A.z*g,F=A.x*S+A.y+A.z*x;return t.SelfMulSub(n,L),e-=l*T,s.SelfMulAdd(m,L),y+=h*F,o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=y,I<=.008&&P<=i}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t.y=o*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y),t}GetReactionTorque(o){return o*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const o=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,le.GetJointTranslation_s_pA),t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,le.GetJointTranslation_s_pB),e=B.SubVV(t,o,le.GetJointTranslation_s_d),i=this.m_bodyA.GetWorldVector(this.m_localXAxisA,le.GetJointTranslation_s_axis);return B.DotVV(e,i)}GetJointSpeed(){const o=this.m_bodyA,t=this.m_bodyB;B.SubVV(this.m_localAnchorA,o.m_sweep.localCenter,this.m_lalcA);const e=V.MulRV(o.m_xf.q,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,t.m_sweep.localCenter,this.m_lalcB);const i=V.MulRV(t.m_xf.q,this.m_lalcB,this.m_rB),s=B.AddVV(o.m_sweep.c,e,B.s_t0),y=B.AddVV(t.m_sweep.c,i,B.s_t1),p=B.SubVV(y,s,B.s_t2),f=o.GetWorldVector(this.m_localXAxisA,this.m_axis),a=o.m_linearVelocity,n=t.m_linearVelocity,C=o.m_angularVelocity,r=t.m_angularVelocity;return B.DotVV(p,B.CrossSV(C,f,B.s_t0))+B.DotVV(f,B.SubVV(B.AddVCrossSV(n,r,i,B.s_t0),B.AddVCrossSV(a,C,e,B.s_t1),B.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(o){o!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=o,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(o,t){o===this.m_lowerTranslation&&t===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=o,this.m_upperTranslation=t,this.m_impulse.z=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(o){o!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=o)}SetMotorSpeed(o){o!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=o)}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(o){o!==this.m_maxMotorForce&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=o)}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(o){return o*this.m_motorImpulse}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),o("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),o("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),o("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),o("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),o("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),o("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),o("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}le.InitVelocityConstraints_s_d=new B,le.InitVelocityConstraints_s_P=new B,le.SolveVelocityConstraints_s_P=new B,le.SolveVelocityConstraints_s_f2r=new B,le.SolveVelocityConstraints_s_f1=new S,le.SolveVelocityConstraints_s_df3=new S,le.SolveVelocityConstraints_s_df2=new B,le.SolvePositionConstraints_s_d=new B,le.SolvePositionConstraints_s_impulse=new S,le.SolvePositionConstraints_s_impulse1=new B,le.SolvePositionConstraints_s_P=new B,le.GetJointTranslation_s_pA=new B,le.GetJointTranslation_s_pB=new B,le.GetJointTranslation_s_d=new B,le.GetJointTranslation_s_axis=new B;class he extends ye{constructor(o){super(o),this.m_groundAnchorA=new B,this.m_groundAnchorB=new B,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new B,this.m_uB=new B,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_groundAnchorA.Copy(t(o.groundAnchorA,new B(-1,1))),this.m_groundAnchorB.Copy(t(o.groundAnchorB,new B(1,0))),this.m_localAnchorA.Copy(t(o.localAnchorA,new B(-1,0))),this.m_localAnchorB.Copy(t(o.localAnchorB,new B(1,0))),this.m_lengthA=t(o.lengthA,0),this.m_lengthB=t(o.lengthB,0),this.m_ratio=t(o.ratio,1),this.m_constant=t(o.lengthA,0)+this.m_ratio*t(o.lengthB,0),this.m_impulse=0}InitVelocityConstraints(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=o.positions[this.m_indexA].c,e=o.positions[this.m_indexA].a,i=o.velocities[this.m_indexA].v;let s=o.velocities[this.m_indexA].w;const y=o.positions[this.m_indexB].c,p=o.positions[this.m_indexB].a,f=o.velocities[this.m_indexB].v;let a=o.velocities[this.m_indexB].w;const n=this.m_qA.SetAngle(e),C=this.m_qB.SetAngle(p);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),V.MulRV(n,this.m_lalcA,this.m_rA),B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),V.MulRV(C,this.m_lalcB,this.m_rB),this.m_uA.Copy(t).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(y).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);const r=this.m_uA.Length(),m=this.m_uB.Length();r>.08?this.m_uA.SelfMul(1/r):this.m_uA.SetZero(),m>.08?this.m_uB.SelfMul(1/m):this.m_uB.SetZero();const l=B.CrossVV(this.m_rA,this.m_uA),h=B.CrossVV(this.m_rB,this.m_uB),_=this.m_invMassA+this.m_invIA*l*l,c=this.m_invMassB+this.m_invIB*h*h;if(this.m_mass=_+this.m_ratio*this.m_ratio*c,this.m_mass>0&&(this.m_mass=1/this.m_mass),o.step.warmStarting){this.m_impulse*=o.step.dtRatio;const t=B.MulSV(-this.m_impulse,this.m_uA,he.InitVelocityConstraints_s_PA),e=B.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,he.InitVelocityConstraints_s_PB);i.SelfMulAdd(this.m_invMassA,t),s+=this.m_invIA*B.CrossVV(this.m_rA,t),f.SelfMulAdd(this.m_invMassB,e),a+=this.m_invIB*B.CrossVV(this.m_rB,e)}else this.m_impulse=0;o.velocities[this.m_indexA].w=s,o.velocities[this.m_indexB].w=a}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=B.AddVCrossSV(t,e,this.m_rA,he.SolveVelocityConstraints_s_vpA),p=B.AddVCrossSV(i,s,this.m_rB,he.SolveVelocityConstraints_s_vpB),f=-B.DotVV(this.m_uA,y)-this.m_ratio*B.DotVV(this.m_uB,p),a=-this.m_mass*f;this.m_impulse+=a;const n=B.MulSV(-a,this.m_uA,he.SolveVelocityConstraints_s_PA),C=B.MulSV(-this.m_ratio*a,this.m_uB,he.SolveVelocityConstraints_s_PB);t.SelfMulAdd(this.m_invMassA,n),e+=this.m_invIA*B.CrossVV(this.m_rA,n),i.SelfMulAdd(this.m_invMassB,C),s+=this.m_invIB*B.CrossVV(this.m_rB,C),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s}SolvePositionConstraints(o){const t=o.positions[this.m_indexA].c;let e=o.positions[this.m_indexA].a;const i=o.positions[this.m_indexB].c;let s=o.positions[this.m_indexB].a;const y=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(s);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const f=V.MulRV(y,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const n=V.MulRV(p,this.m_lalcB,this.m_rB),C=this.m_uA.Copy(t).SelfAdd(f).SelfSub(this.m_groundAnchorA),r=this.m_uB.Copy(i).SelfAdd(n).SelfSub(this.m_groundAnchorB),m=C.Length(),l=r.Length();m>.08?C.SelfMul(1/m):C.SetZero(),l>.08?r.SelfMul(1/l):r.SetZero();const h=B.CrossVV(f,C),_=B.CrossVV(n,r),c=this.m_invMassA+this.m_invIA*h*h,u=this.m_invMassB+this.m_invIB*_*_;let d=c+this.m_ratio*this.m_ratio*u;d>0&&(d=1/d);const g=this.m_constant-m-this.m_ratio*l,x=a(g),b=-d*g,v=B.MulSV(-b,C,he.SolvePositionConstraints_s_PA),S=B.MulSV(-this.m_ratio*b,r,he.SolvePositionConstraints_s_PB);return t.SelfMulAdd(this.m_invMassA,v),e+=this.m_invIA*B.CrossVV(f,v),i.SelfMulAdd(this.m_invMassB,S),s+=this.m_invIB*B.CrossVV(n,S),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=s,x<.008}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*this.m_impulse*this.m_uB.x,t.y=o*this.m_impulse*this.m_uB.y,t}GetReactionTorque(o){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const o=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,he.GetCurrentLengthA_s_p),t=this.m_groundAnchorA;return B.DistanceVV(o,t)}GetCurrentLengthB(){const o=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,he.GetCurrentLengthB_s_p),t=this.m_groundAnchorB;return B.DistanceVV(o,t)}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),o("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.lengthA = %.15f;\n",this.m_lengthA),o("  jd.lengthB = %.15f;\n",this.m_lengthB),o("  jd.ratio = %.15f;\n",this.m_ratio),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}ShiftOrigin(o){this.m_groundAnchorA.SelfSub(o),this.m_groundAnchorB.SelfSub(o)}}he.InitVelocityConstraints_s_PA=new B,he.InitVelocityConstraints_s_PB=new B,he.SolveVelocityConstraints_s_vpA=new B,he.SolveVelocityConstraints_s_vpB=new B,he.SolveVelocityConstraints_s_PA=new B,he.SolveVelocityConstraints_s_PB=new B,he.SolvePositionConstraints_s_PA=new B,he.SolvePositionConstraints_s_PB=new B,he.GetCurrentLengthA_s_p=new B,he.GetCurrentLengthB_s_p=new B;class _e extends ye{constructor(e){super(e),this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_impulse=new S,this.m_motorImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new w,this.m_motorMass=0,this.m_limitState=o.b2LimitState.e_inactiveLimit,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_K=new A,this.m_localAnchorA.Copy(t(e.localAnchorA,B.ZERO)),this.m_localAnchorB.Copy(t(e.localAnchorB,B.ZERO)),this.m_referenceAngle=t(e.referenceAngle,0),this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t(e.lowerAngle,0),this.m_upperAngle=t(e.upperAngle,0),this.m_maxMotorTorque=t(e.maxMotorTorque,0),this.m_motorSpeed=t(e.motorSpeed,0),this.m_enableLimit=t(e.enableLimit,!1),this.m_enableMotor=t(e.enableMotor,!1),this.m_limitState=o.b2LimitState.e_inactiveLimit}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let y=t.velocities[this.m_indexA].w;const p=t.positions[this.m_indexB].a,f=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;const C=this.m_qA.SetAngle(e),r=this.m_qB.SetAngle(p);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),V.MulRV(C,this.m_lalcA,this.m_rA),B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),V.MulRV(r,this.m_lalcB,this.m_rB);const m=this.m_invMassA,l=this.m_invMassB,h=this.m_invIA,_=this.m_invIB,c=h+_===0;if(this.m_mass.ex.x=m+l+this.m_rA.y*this.m_rA.y*h+this.m_rB.y*this.m_rB.y*_,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*h-this.m_rB.y*this.m_rB.x*_,this.m_mass.ez.x=-this.m_rA.y*h-this.m_rB.y*_,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=m+l+this.m_rA.x*this.m_rA.x*h+this.m_rB.x*this.m_rB.x*_,this.m_mass.ez.y=this.m_rA.x*h+this.m_rB.x*_,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=h+_,this.m_motorMass=h+_,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!c||(this.m_motorImpulse=0),this.m_enableLimit&&!c){const t=p-e-this.m_referenceAngle;a(this.m_upperAngle-this.m_lowerAngle)<2*i?this.m_limitState=o.b2LimitState.e_equalLimits:t<=this.m_lowerAngle?(this.m_limitState!==o.b2LimitState.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=o.b2LimitState.e_atLowerLimit):t>=this.m_upperAngle?(this.m_limitState!==o.b2LimitState.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=o.b2LimitState.e_atUpperLimit):(this.m_limitState=o.b2LimitState.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=o.b2LimitState.e_inactiveLimit;if(t.step.warmStarting){this.m_impulse.SelfMul(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio;const o=_e.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);s.SelfMulSub(m,o),y-=h*(B.CrossVV(this.m_rA,o)+this.m_motorImpulse+this.m_impulse.z),f.SelfMulAdd(l,o),n+=_*(B.CrossVV(this.m_rB,o)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0;t.velocities[this.m_indexA].w=y,t.velocities[this.m_indexB].w=n}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const s=t.velocities[this.m_indexB].v;let y=t.velocities[this.m_indexB].w;const p=this.m_invMassA,f=this.m_invMassB,a=this.m_invIA,n=this.m_invIB,C=a+n===0;if(this.m_enableMotor&&this.m_limitState!==o.b2LimitState.e_equalLimits&&!C){const o=y-i-this.m_motorSpeed;let e=-this.m_motorMass*o;const s=this.m_motorImpulse,p=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=r(this.m_motorImpulse+e,-p,p),e=this.m_motorImpulse-s,i-=a*e,y+=n*e}if(this.m_enableLimit&&this.m_limitState!==o.b2LimitState.e_inactiveLimit&&!C){const t=B.SubVV(B.AddVCrossSV(s,y,this.m_rB,B.s_t0),B.AddVCrossSV(e,i,this.m_rA,B.s_t1),_e.SolveVelocityConstraints_s_Cdot1),C=y-i,r=this.m_mass.Solve33(t.x,t.y,C,_e.SolveVelocityConstraints_s_impulse_v3).SelfNeg();if(this.m_limitState===o.b2LimitState.e_equalLimits)this.m_impulse.SelfAdd(r);else if(this.m_limitState===o.b2LimitState.e_atLowerLimit)if(this.m_impulse.z+r.z<0){const o=-t.x+this.m_impulse.z*this.m_mass.ez.x,e=-t.y+this.m_impulse.z*this.m_mass.ez.y,i=this.m_mass.Solve22(o,e,_e.SolveVelocityConstraints_s_reduced_v2);r.x=i.x,r.y=i.y,r.z=-this.m_impulse.z,this.m_impulse.x+=i.x,this.m_impulse.y+=i.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(r);else if(this.m_limitState===o.b2LimitState.e_atUpperLimit)if(this.m_impulse.z+r.z>0){const o=-t.x+this.m_impulse.z*this.m_mass.ez.x,e=-t.y+this.m_impulse.z*this.m_mass.ez.y,i=this.m_mass.Solve22(o,e,_e.SolveVelocityConstraints_s_reduced_v2);r.x=i.x,r.y=i.y,r.z=-this.m_impulse.z,this.m_impulse.x+=i.x,this.m_impulse.y+=i.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(r);const m=_e.SolveVelocityConstraints_s_P.Set(r.x,r.y);e.SelfMulSub(p,m),i-=a*(B.CrossVV(this.m_rA,m)+r.z),s.SelfMulAdd(f,m),y+=n*(B.CrossVV(this.m_rB,m)+r.z)}else{const o=B.SubVV(B.AddVCrossSV(s,y,this.m_rB,B.s_t0),B.AddVCrossSV(e,i,this.m_rA,B.s_t1),_e.SolveVelocityConstraints_s_Cdot_v2),t=this.m_mass.Solve22(-o.x,-o.y,_e.SolveVelocityConstraints_s_impulse_v2);this.m_impulse.x+=t.x,this.m_impulse.y+=t.y,e.SelfMulSub(p,t),i-=a*B.CrossVV(this.m_rA,t),s.SelfMulAdd(f,t),y+=n*B.CrossVV(this.m_rB,t)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=y}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let s=t.positions[this.m_indexA].a;const y=t.positions[this.m_indexB].c;let p=t.positions[this.m_indexB].a;const f=this.m_qA.SetAngle(s),n=this.m_qB.SetAngle(p);let C=0,m=0;const l=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&this.m_limitState!==o.b2LimitState.e_inactiveLimit&&!l){const t=p-s-this.m_referenceAngle;let e=0;if(this.m_limitState===o.b2LimitState.e_equalLimits){const o=r(t-this.m_lowerAngle,-.13962634015955555,.13962634015955555);e=-this.m_motorMass*o,C=a(o)}else if(this.m_limitState===o.b2LimitState.e_atLowerLimit){let o=t-this.m_lowerAngle;C=-o,o=r(o+i,-.13962634015955555,0),e=-this.m_motorMass*o}else if(this.m_limitState===o.b2LimitState.e_atUpperLimit){let o=t-this.m_upperAngle;C=o,o=r(o-i,0,.13962634015955555),e=-this.m_motorMass*o}s-=this.m_invIA*e,p+=this.m_invIB*e}{f.SetAngle(s),n.SetAngle(p),B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const o=V.MulRV(f,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const t=V.MulRV(n,this.m_lalcB,this.m_rB),i=B.SubVV(B.AddVV(y,t,B.s_t0),B.AddVV(e,o,B.s_t1),_e.SolvePositionConstraints_s_C_v2);m=i.Length();const a=this.m_invMassA,C=this.m_invMassB,r=this.m_invIA,l=this.m_invIB,h=this.m_K;h.ex.x=a+C+r*o.y*o.y+l*t.y*t.y,h.ex.y=-r*o.x*o.y-l*t.x*t.y,h.ey.x=h.ex.y,h.ey.y=a+C+r*o.x*o.x+l*t.x*t.x;const _=h.Solve(i.x,i.y,_e.SolvePositionConstraints_s_impulse).SelfNeg();e.SelfMulSub(a,_),s-=r*B.CrossVV(o,_),y.SelfMulAdd(C,_),p+=l*B.CrossVV(t,_)}return t.positions[this.m_indexA].a=s,t.positions[this.m_indexB].a=p,m<=.008&&C<=i}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*this.m_impulse.x,t.y=o*this.m_impulse.y,t}GetReactionTorque(o){return o*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(o){o!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=o)}GetMotorTorque(o){return o*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(o){o!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=o)}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(o){o!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=o,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(o,t){o===this.m_lowerAngle&&t===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=o,this.m_upperAngle=t)}SetMotorSpeed(o){o!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=o)}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),o("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),o("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),o("  jd.upperAngle = %.15f;\n",this.m_upperAngle),o("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),o("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),o("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}_e.InitVelocityConstraints_s_P=new B,_e.SolveVelocityConstraints_s_P=new B,_e.SolveVelocityConstraints_s_Cdot_v2=new B,_e.SolveVelocityConstraints_s_Cdot1=new B,_e.SolveVelocityConstraints_s_impulse_v3=new S,_e.SolveVelocityConstraints_s_reduced_v2=new B,_e.SolveVelocityConstraints_s_impulse_v2=new B,_e.SolvePositionConstraints_s_C_v2=new B,_e.SolvePositionConstraints_s_impulse=new B;class ce extends ye{constructor(e){super(e),this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_maxLength=0,this.m_length=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new B,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_state=o.b2LimitState.e_inactiveLimit,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_localAnchorA.Copy(t(e.localAnchorA,new B(-1,0))),this.m_localAnchorB.Copy(t(e.localAnchorB,new B(1,0))),this.m_maxLength=t(e.maxLength,0)}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,s=t.velocities[this.m_indexA].v;let y=t.velocities[this.m_indexA].w;const p=t.positions[this.m_indexB].c,f=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let n=t.velocities[this.m_indexB].w;const C=this.m_qA.SetAngle(i),r=this.m_qB.SetAngle(f);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),V.MulRV(C,this.m_lalcA,this.m_rA),B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),V.MulRV(r,this.m_lalcB,this.m_rB),this.m_u.Copy(p).SelfAdd(this.m_rB).SelfSub(e).SelfSub(this.m_rA),this.m_length=this.m_u.Length();const m=this.m_length-this.m_maxLength;if(this.m_state=m>0?o.b2LimitState.e_atUpperLimit:o.b2LimitState.e_inactiveLimit,!(this.m_length>.008))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);const l=B.CrossVV(this.m_rA,this.m_u),h=B.CrossVV(this.m_rB,this.m_u),_=this.m_invMassA+this.m_invIA*l*l+this.m_invMassB+this.m_invIB*h*h;if(this.m_mass=0!==_?1/_:0,t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const o=B.MulSV(this.m_impulse,this.m_u,ce.InitVelocityConstraints_s_P);s.SelfMulSub(this.m_invMassA,o),y-=this.m_invIA*B.CrossVV(this.m_rA,o),a.SelfMulAdd(this.m_invMassB,o),n+=this.m_invIB*B.CrossVV(this.m_rB,o)}else this.m_impulse=0;t.velocities[this.m_indexA].w=y,t.velocities[this.m_indexB].w=n}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=B.AddVCrossSV(t,e,this.m_rA,ce.SolveVelocityConstraints_s_vpA),p=B.AddVCrossSV(i,s,this.m_rB,ce.SolveVelocityConstraints_s_vpB),f=this.m_length-this.m_maxLength;let a=B.DotVV(this.m_u,B.SubVV(p,y,B.s_t0));f<0&&(a+=o.step.inv_dt*f);let C=-this.m_mass*a;const r=this.m_impulse;this.m_impulse=n(0,this.m_impulse+C),C=this.m_impulse-r;const m=B.MulSV(C,this.m_u,ce.SolveVelocityConstraints_s_P);t.SelfMulSub(this.m_invMassA,m),e-=this.m_invIA*B.CrossVV(this.m_rA,m),i.SelfMulAdd(this.m_invMassB,m),s+=this.m_invIB*B.CrossVV(this.m_rB,m),o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s}SolvePositionConstraints(o){const t=o.positions[this.m_indexA].c;let e=o.positions[this.m_indexA].a;const i=o.positions[this.m_indexB].c;let s=o.positions[this.m_indexB].a;const y=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(s);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const f=V.MulRV(y,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const a=V.MulRV(p,this.m_lalcB,this.m_rB),n=this.m_u.Copy(i).SelfAdd(a).SelfSub(t).SelfSub(f),C=n.Normalize();let m=C-this.m_maxLength;m=r(m,0,.2);const l=-this.m_mass*m,h=B.MulSV(l,n,ce.SolvePositionConstraints_s_P);return t.SelfMulSub(this.m_invMassA,h),e-=this.m_invIA*B.CrossVV(f,h),i.SelfMulAdd(this.m_invMassB,h),s+=this.m_invIB*B.CrossVV(a,h),o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=s,C-this.m_maxLength<.008}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return B.MulSV(o*this.m_impulse,this.m_u,t)}GetReactionTorque(o){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxLength(o){this.m_maxLength=o}GetMaxLength(){return this.m_maxLength}GetLimitState(){return this.m_state}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.maxLength = %.15f;\n",this.m_maxLength),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}ce.InitVelocityConstraints_s_P=new B,ce.SolveVelocityConstraints_s_vpA=new B,ce.SolveVelocityConstraints_s_vpB=new B,ce.SolveVelocityConstraints_s_P=new B,ce.SolvePositionConstraints_s_P=new B;class ue extends ye{constructor(o){super(o),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new S(0,0,0),this.m_indexA=0,this.m_indexB=0,this.m_rA=new B,this.m_rB=new B,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new w,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_K=new w,this.m_frequencyHz=t(o.frequencyHz,0),this.m_dampingRatio=t(o.dampingRatio,0),this.m_localAnchorA.Copy(t(o.localAnchorA,B.ZERO)),this.m_localAnchorB.Copy(t(o.localAnchorB,B.ZERO)),this.m_referenceAngle=t(o.referenceAngle,0),this.m_impulse.SetZero()}InitVelocityConstraints(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=o.positions[this.m_indexA].a,i=o.velocities[this.m_indexA].v;let s=o.velocities[this.m_indexA].w;const y=o.positions[this.m_indexB].a,p=o.velocities[this.m_indexB].v;let f=o.velocities[this.m_indexB].w;const a=this.m_qA.SetAngle(t),n=this.m_qB.SetAngle(y);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),V.MulRV(a,this.m_lalcA,this.m_rA),B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),V.MulRV(n,this.m_lalcB,this.m_rB);const C=this.m_invMassA,r=this.m_invMassB,m=this.m_invIA,l=this.m_invIB,h=this.m_K;if(h.ex.x=C+r+this.m_rA.y*this.m_rA.y*m+this.m_rB.y*this.m_rB.y*l,h.ey.x=-this.m_rA.y*this.m_rA.x*m-this.m_rB.y*this.m_rB.x*l,h.ez.x=-this.m_rA.y*m-this.m_rB.y*l,h.ex.y=h.ey.x,h.ey.y=C+r+this.m_rA.x*this.m_rA.x*m+this.m_rB.x*this.m_rB.x*l,h.ez.y=this.m_rA.x*m+this.m_rB.x*l,h.ex.z=h.ez.x,h.ey.z=h.ez.y,h.ez.z=m+l,this.m_frequencyHz>0){h.GetInverse22(this.m_mass);let i=m+l;const s=i>0?1/i:0,p=y-t-this.m_referenceAngle,f=2*e*this.m_frequencyHz,a=2*s*this.m_dampingRatio*f,n=s*f*f,C=o.step.dt;this.m_gamma=C*(a+C*n),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=p*C*n*this.m_gamma,i+=this.m_gamma,this.m_mass.ez.z=0!==i?1/i:0}else h.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0;if(o.step.warmStarting){this.m_impulse.SelfMul(o.step.dtRatio);const t=ue.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);i.SelfMulSub(C,t),s-=m*(B.CrossVV(this.m_rA,t)+this.m_impulse.z),p.SelfMulAdd(r,t),f+=l*(B.CrossVV(this.m_rB,t)+this.m_impulse.z)}else this.m_impulse.SetZero();o.velocities[this.m_indexA].w=s,o.velocities[this.m_indexB].w=f}SolveVelocityConstraints(o){const t=o.velocities[this.m_indexA].v;let e=o.velocities[this.m_indexA].w;const i=o.velocities[this.m_indexB].v;let s=o.velocities[this.m_indexB].w;const y=this.m_invMassA,p=this.m_invMassB,f=this.m_invIA,a=this.m_invIB;if(this.m_frequencyHz>0){const o=s-e,n=-this.m_mass.ez.z*(o+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=n,e-=f*n,s+=a*n;const C=B.SubVV(B.AddVCrossSV(i,s,this.m_rB,B.s_t0),B.AddVCrossSV(t,e,this.m_rA,B.s_t1),ue.SolveVelocityConstraints_s_Cdot1),r=w.MulM33XY(this.m_mass,C.x,C.y,ue.SolveVelocityConstraints_s_impulse1).SelfNeg();this.m_impulse.x+=r.x,this.m_impulse.y+=r.y;const m=r;t.SelfMulSub(y,m),e-=f*B.CrossVV(this.m_rA,m),i.SelfMulAdd(p,m),s+=a*B.CrossVV(this.m_rB,m)}else{const o=B.SubVV(B.AddVCrossSV(i,s,this.m_rB,B.s_t0),B.AddVCrossSV(t,e,this.m_rA,B.s_t1),ue.SolveVelocityConstraints_s_Cdot1),n=s-e,C=w.MulM33XYZ(this.m_mass,o.x,o.y,n,ue.SolveVelocityConstraints_s_impulse).SelfNeg();this.m_impulse.SelfAdd(C);const r=ue.SolveVelocityConstraints_s_P.Set(C.x,C.y);t.SelfMulSub(y,r),e-=f*(B.CrossVV(this.m_rA,r)+C.z),i.SelfMulAdd(p,r),s+=a*(B.CrossVV(this.m_rB,r)+C.z)}o.velocities[this.m_indexA].w=e,o.velocities[this.m_indexB].w=s}SolvePositionConstraints(o){const t=o.positions[this.m_indexA].c;let e=o.positions[this.m_indexA].a;const s=o.positions[this.m_indexB].c;let y=o.positions[this.m_indexB].a;const p=this.m_qA.SetAngle(e),f=this.m_qB.SetAngle(y),n=this.m_invMassA,C=this.m_invMassB,r=this.m_invIA,m=this.m_invIB;B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const l=V.MulRV(p,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const h=V.MulRV(f,this.m_lalcB,this.m_rB);let _,c;const u=this.m_K;if(u.ex.x=n+C+l.y*l.y*r+h.y*h.y*m,u.ey.x=-l.y*l.x*r-h.y*h.x*m,u.ez.x=-l.y*r-h.y*m,u.ex.y=u.ey.x,u.ey.y=n+C+l.x*l.x*r+h.x*h.x*m,u.ez.y=l.x*r+h.x*m,u.ex.z=u.ez.x,u.ey.z=u.ez.y,u.ez.z=r+m,this.m_frequencyHz>0){const o=B.SubVV(B.AddVV(s,h,B.s_t0),B.AddVV(t,l,B.s_t1),ue.SolvePositionConstraints_s_C1);_=o.Length(),c=0;const i=u.Solve22(o.x,o.y,ue.SolvePositionConstraints_s_P).SelfNeg();t.SelfMulSub(n,i),e-=r*B.CrossVV(l,i),s.SelfMulAdd(C,i),y+=m*B.CrossVV(h,i)}else{const o=B.SubVV(B.AddVV(s,h,B.s_t0),B.AddVV(t,l,B.s_t1),ue.SolvePositionConstraints_s_C1),i=y-e-this.m_referenceAngle;_=o.Length(),c=a(i);const p=u.Solve33(o.x,o.y,i,ue.SolvePositionConstraints_s_impulse).SelfNeg(),f=ue.SolvePositionConstraints_s_P.Set(p.x,p.y);t.SelfMulSub(n,f),e-=r*(B.CrossVV(this.m_rA,f)+p.z),s.SelfMulAdd(C,f),y+=m*(B.CrossVV(this.m_rB,f)+p.z)}return o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=y,_<=.008&&c<=i}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*this.m_impulse.x,t.y=o*this.m_impulse.y,t}GetReactionTorque(o){return o*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetFrequency(o){this.m_frequencyHz=o}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(o){this.m_dampingRatio=o}GetDampingRatio(){return this.m_dampingRatio}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),o("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),o("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}ue.InitVelocityConstraints_s_P=new B,ue.SolveVelocityConstraints_s_Cdot1=new B,ue.SolveVelocityConstraints_s_impulse1=new B,ue.SolveVelocityConstraints_s_impulse=new S,ue.SolveVelocityConstraints_s_P=new B,ue.SolvePositionConstraints_s_C1=new B,ue.SolvePositionConstraints_s_P=new B,ue.SolvePositionConstraints_s_impulse=new S;class de extends ye{constructor(o){super(o),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_localAnchorA=new B,this.m_localAnchorB=new B,this.m_localXAxisA=new B,this.m_localYAxisA=new B,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new B,this.m_localCenterB=new B,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new B,this.m_ay=new B,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_qA=new V,this.m_qB=new V,this.m_lalcA=new B,this.m_lalcB=new B,this.m_rA=new B,this.m_rB=new B,this.m_frequencyHz=t(o.frequencyHz,2),this.m_dampingRatio=t(o.dampingRatio,.7),this.m_localAnchorA.Copy(t(o.localAnchorA,B.ZERO)),this.m_localAnchorB.Copy(t(o.localAnchorB,B.ZERO)),this.m_localXAxisA.Copy(t(o.localAxisA,B.UNITX)),B.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_maxMotorTorque=t(o.maxMotorTorque,0),this.m_motorSpeed=t(o.motorSpeed,0),this.m_enableMotor=t(o.enableMotor,!1),this.m_ax.SetZero(),this.m_ay.SetZero()}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetSpringFrequencyHz(o){this.m_frequencyHz=o}GetSpringFrequencyHz(){return this.m_frequencyHz}SetSpringDampingRatio(o){this.m_dampingRatio=o}GetSpringDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(o){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const t=this.m_invMassA,i=this.m_invMassB,s=this.m_invIA,y=this.m_invIB,p=o.positions[this.m_indexA].c,f=o.positions[this.m_indexA].a,a=o.velocities[this.m_indexA].v;let n=o.velocities[this.m_indexA].w;const C=o.positions[this.m_indexB].c,r=o.positions[this.m_indexB].a,m=o.velocities[this.m_indexB].v;let l=o.velocities[this.m_indexB].w;const h=this.m_qA.SetAngle(f),_=this.m_qB.SetAngle(r);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const c=V.MulRV(h,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=V.MulRV(_,this.m_lalcB,this.m_rB),d=B.SubVV(B.AddVV(C,u,B.s_t0),B.AddVV(p,c,B.s_t1),de.InitVelocityConstraints_s_d);if(V.MulRV(h,this.m_localYAxisA,this.m_ay),this.m_sAy=B.CrossVV(B.AddVV(d,c,B.s_t0),this.m_ay),this.m_sBy=B.CrossVV(u,this.m_ay),this.m_mass=t+i+s*this.m_sAy*this.m_sAy+y*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){V.MulRV(h,this.m_localXAxisA,this.m_ax),this.m_sAx=B.CrossVV(B.AddVV(d,c,B.s_t0),this.m_ax),this.m_sBx=B.CrossVV(u,this.m_ax);const p=t+i+s*this.m_sAx*this.m_sAx+y*this.m_sBx*this.m_sBx;if(p>0){this.m_springMass=1/p;const t=B.DotVV(d,this.m_ax),i=2*e*this.m_frequencyHz,s=2*this.m_springMass*this.m_dampingRatio*i,y=this.m_springMass*i*i,f=o.step.dt;this.m_gamma=f*(s+f*y),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=t*f*y*this.m_gamma,this.m_springMass=p+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=s+y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),o.step.warmStarting){this.m_impulse*=o.step.dtRatio,this.m_springImpulse*=o.step.dtRatio,this.m_motorImpulse*=o.step.dtRatio;const t=B.AddVV(B.MulSV(this.m_impulse,this.m_ay,B.s_t0),B.MulSV(this.m_springImpulse,this.m_ax,B.s_t1),de.InitVelocityConstraints_s_P),e=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,i=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;a.SelfMulSub(this.m_invMassA,t),n-=this.m_invIA*e,m.SelfMulAdd(this.m_invMassB,t),l+=this.m_invIB*i}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;o.velocities[this.m_indexA].w=n,o.velocities[this.m_indexB].w=l}SolveVelocityConstraints(o){const t=this.m_invMassA,e=this.m_invMassB,i=this.m_invIA,s=this.m_invIB,y=o.velocities[this.m_indexA].v;let p=o.velocities[this.m_indexA].w;const f=o.velocities[this.m_indexB].v;let a=o.velocities[this.m_indexB].w;{const o=B.DotVV(this.m_ax,B.SubVV(f,y,B.s_t0))+this.m_sBx*a-this.m_sAx*p,n=-this.m_springMass*(o+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=n;const C=B.MulSV(n,this.m_ax,de.SolveVelocityConstraints_s_P),r=n*this.m_sAx,m=n*this.m_sBx;y.SelfMulSub(t,C),p-=i*r,f.SelfMulAdd(e,C),a+=s*m}{const t=a-p-this.m_motorSpeed;let e=-this.m_motorMass*t;const y=this.m_motorImpulse,f=o.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=r(this.m_motorImpulse+e,-f,f),e=this.m_motorImpulse-y,p-=i*e,a+=s*e}{const o=B.DotVV(this.m_ay,B.SubVV(f,y,B.s_t0))+this.m_sBy*a-this.m_sAy*p,n=-this.m_mass*o;this.m_impulse+=n;const C=B.MulSV(n,this.m_ay,de.SolveVelocityConstraints_s_P),r=n*this.m_sAy,m=n*this.m_sBy;y.SelfMulSub(t,C),p-=i*r,f.SelfMulAdd(e,C),a+=s*m}o.velocities[this.m_indexA].w=p,o.velocities[this.m_indexB].w=a}SolvePositionConstraints(o){const t=o.positions[this.m_indexA].c;let e=o.positions[this.m_indexA].a;const i=o.positions[this.m_indexB].c;let s=o.positions[this.m_indexB].a;const y=this.m_qA.SetAngle(e),p=this.m_qB.SetAngle(s);B.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const f=V.MulRV(y,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const n=V.MulRV(p,this.m_lalcB,this.m_rB),C=B.AddVV(B.SubVV(i,t,B.s_t0),B.SubVV(n,f,B.s_t1),de.SolvePositionConstraints_s_d),r=V.MulRV(y,this.m_localYAxisA,this.m_ay),m=B.CrossVV(B.AddVV(C,f,B.s_t0),r),l=B.CrossVV(n,r),h=B.DotVV(C,this.m_ay),_=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let c;c=0!==_?-h/_:0;const u=B.MulSV(c,r,de.SolvePositionConstraints_s_P),d=c*m,g=c*l;return t.SelfMulSub(this.m_invMassA,u),e-=this.m_invIA*d,i.SelfMulAdd(this.m_invMassB,u),s+=this.m_invIB*g,o.positions[this.m_indexA].a=e,o.positions[this.m_indexB].a=s,a(h)<=.008}GetDefinition(o){return o}GetAnchorA(o){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,o)}GetAnchorB(o){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,o)}GetReactionForce(o,t){return t.x=o*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),t.y=o*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),t}GetReactionTorque(o){return o*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){return this.GetPrismaticJointTranslation()}GetJointLinearSpeed(){return this.GetPrismaticJointSpeed()}GetJointAngle(){return this.GetRevoluteJointAngle()}GetJointAngularSpeed(){return this.GetRevoluteJointSpeed()}GetPrismaticJointTranslation(){const o=this.m_bodyA,t=this.m_bodyB,e=o.GetWorldPoint(this.m_localAnchorA,new B),i=t.GetWorldPoint(this.m_localAnchorB,new B),s=B.SubVV(i,e,new B),y=o.GetWorldVector(this.m_localXAxisA,new B);return B.DotVV(s,y)}GetPrismaticJointSpeed(){const o=this.m_bodyA,t=this.m_bodyB;B.SubVV(this.m_localAnchorA,o.m_sweep.localCenter,this.m_lalcA);const e=V.MulRV(o.m_xf.q,this.m_lalcA,this.m_rA);B.SubVV(this.m_localAnchorB,t.m_sweep.localCenter,this.m_lalcB);const i=V.MulRV(t.m_xf.q,this.m_lalcB,this.m_rB),s=B.AddVV(o.m_sweep.c,e,B.s_t0),y=B.AddVV(t.m_sweep.c,i,B.s_t1),p=B.SubVV(y,s,B.s_t2),f=o.GetWorldVector(this.m_localXAxisA,new B),a=o.m_linearVelocity,n=t.m_linearVelocity,C=o.m_angularVelocity,r=t.m_angularVelocity;return B.DotVV(p,B.CrossSV(C,f,B.s_t0))+B.DotVV(f,B.SubVV(B.AddVCrossSV(n,r,i,B.s_t0),B.AddVCrossSV(a,C,e,B.s_t1),B.s_t0))}GetRevoluteJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetRevoluteJointSpeed(){const o=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-o}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(o){o!==this.m_enableMotor&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=o)}SetMotorSpeed(o){o!==this.m_motorSpeed&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=o)}SetMaxMotorTorque(o){o!==this.m_maxMotorTorque&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=o)}GetMotorTorque(o){return o*this.m_motorImpulse}Dump(o){const t=this.m_bodyA.m_islandIndex,e=this.m_bodyB.m_islandIndex;o("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),o("  jd.bodyA = bodies[%d];\n",t),o("  jd.bodyB = bodies[%d];\n",e),o("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),o("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),o("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),o("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),o("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),o("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),o("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),o("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),o("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),o("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}function ge(o,t){return _(o*t)}function xe(o,t){return o>t?o:t}de.InitVelocityConstraints_s_d=new B,de.InitVelocityConstraints_s_P=new B,de.SolveVelocityConstraints_s_P=new B,de.SolvePositionConstraints_s_d=new B,de.SolvePositionConstraints_s_P=new B;class be{constructor(o){this.prev=null,this.next=null,this.contact=o}}class Be{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_indexA=0,this.m_indexB=0,this.m_manifold=new no,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new no,this.m_nodeA=new be(this),this.m_nodeB=new be(this)}GetManifold(){return this.m_manifold}GetWorldManifold(o){const t=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody(),i=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();o.Initialize(this.m_manifold,t.GetTransform(),i.m_radius,e.GetTransform(),s.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(o){this.m_enabledFlag=o}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(o){this.m_friction=o}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=ge(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(o){this.m_restitution=o}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=xe(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetTangentSpeed(o){this.m_tangentSpeed=o}GetTangentSpeed(){return this.m_tangentSpeed}Reset(o,t,e,i){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=o,this.m_fixtureB=e,this.m_indexA=t,this.m_indexB=i,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,delete this.m_nodeA.contact,this.m_nodeA.prev=null,this.m_nodeA.next=null,delete this.m_nodeA.other,delete this.m_nodeB.contact,this.m_nodeB.prev=null,this.m_nodeB.next=null,delete this.m_nodeB.other,this.m_toiCount=0,this.m_friction=ge(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=xe(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}Update(o){const t=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=t,this.m_enabledFlag=!0;let e=!1;const i=this.m_touchingFlag,s=this.m_fixtureA.IsSensor(),y=this.m_fixtureB.IsSensor(),p=s||y,f=this.m_fixtureA.GetBody(),a=this.m_fixtureB.GetBody(),n=f.GetTransform(),C=a.GetTransform();if(p){const o=this.m_fixtureA.GetShape(),t=this.m_fixtureB.GetShape();e=bo(o,this.m_indexA,t,this.m_indexB,n,C),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,n,C),e=this.m_manifold.pointCount>0;for(let o=0;o<this.m_manifold.pointCount;++o){const t=this.m_manifold.points[o];t.normalImpulse=0,t.tangentImpulse=0;const e=t.id;for(let o=0;o<this.m_oldManifold.pointCount;++o){const i=this.m_oldManifold.points[o];if(i.id.key===e.key){t.normalImpulse=i.normalImpulse,t.tangentImpulse=i.tangentImpulse;break}}}e!==i&&(f.SetAwake(!0),a.SetAwake(!0))}this.m_touchingFlag=e,!i&&e&&o&&o.BeginContact(this),i&&!e&&o&&o.EndContact(this),!p&&e&&o&&o.PreSolve(this,this.m_oldManifold)}ComputeTOI(o,t){const e=Be.ComputeTOI_s_input;e.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),e.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),e.sweepA.Copy(o),e.sweepB.Copy(t),e.tMax=.008;const i=Be.ComputeTOI_s_output;return Ho(i,e),i.t}}Be.ComputeTOI_s_input=new Fo,Be.ComputeTOI_s_output=new zo;class ve extends Be{constructor(){super()}static Create(o){return new ve}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){Ko(o,this.m_fixtureA.GetShape(),t,this.m_fixtureB.GetShape(),e)}}class Se extends Be{constructor(){super()}static Create(o){return new Se}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){At(o,this.m_fixtureA.GetShape(),t,this.m_fixtureB.GetShape(),e)}}class Ae extends Be{constructor(){super()}static Create(o){return new Ae}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){et(o,this.m_fixtureA.GetShape(),t,this.m_fixtureB.GetShape(),e)}}class we extends Be{constructor(){super()}static Create(o){return new we}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){Tt(o,this.m_fixtureA.GetShape(),t,this.m_fixtureB.GetShape(),e)}}class Ve extends Be{constructor(){super()}static Create(o){return new Ve}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){qt(o,this.m_fixtureA.GetShape(),t,this.m_fixtureB.GetShape(),e)}}class Me extends Be{constructor(){super()}static Create(o){return new Me}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){const i=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),y=i,p=Me.Evaluate_s_edge;y.GetChildEdge(p,this.m_indexA),Tt(o,p,t,s,e)}}Me.Evaluate_s_edge=new Qt;class Ie extends Be{constructor(){super()}static Create(o){return new Ie}static Destroy(o,t){}Reset(o,t,e,i){super.Reset(o,t,e,i)}Evaluate(o,t,e){const i=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),y=i,p=Ie.Evaluate_s_edge;y.GetChildEdge(p,this.m_indexA),qt(o,p,t,s,e)}}Ie.Evaluate_s_edge=new Qt;class Pe{constructor(){this.createFcn=null,this.destroyFcn=null,this.primary=!1}}class Ge{constructor(o){this.m_allocator=null,this.m_allocator=o,this.InitializeRegisters()}AddType(o,t,e,i){const s=p(256,t=>o(this.m_allocator));function y(t){return s.pop()||o(t)}function f(o,t){s.push(o)}this.m_registers[e][i].createFcn=y,this.m_registers[e][i].destroyFcn=f,this.m_registers[e][i].primary=!0,e!==i&&(this.m_registers[i][e].createFcn=y,this.m_registers[i][e].destroyFcn=f,this.m_registers[i][e].primary=!1)}InitializeRegisters(){this.m_registers=[];for(let t=0;t<o.b2ShapeType.e_shapeTypeCount;t++){this.m_registers[t]=[];for(let e=0;e<o.b2ShapeType.e_shapeTypeCount;e++)this.m_registers[t][e]=new Pe}this.AddType(ve.Create,ve.Destroy,o.b2ShapeType.e_circleShape,o.b2ShapeType.e_circleShape),this.AddType(Ae.Create,Ae.Destroy,o.b2ShapeType.e_polygonShape,o.b2ShapeType.e_circleShape),this.AddType(Se.Create,Se.Destroy,o.b2ShapeType.e_polygonShape,o.b2ShapeType.e_polygonShape),this.AddType(we.Create,we.Destroy,o.b2ShapeType.e_edgeShape,o.b2ShapeType.e_circleShape),this.AddType(Ve.Create,Ve.Destroy,o.b2ShapeType.e_edgeShape,o.b2ShapeType.e_polygonShape),this.AddType(Me.Create,Me.Destroy,o.b2ShapeType.e_chainShape,o.b2ShapeType.e_circleShape),this.AddType(Ie.Create,Ie.Destroy,o.b2ShapeType.e_chainShape,o.b2ShapeType.e_polygonShape)}Create(o,t,e,i){const s=o.GetType(),y=e.GetType(),p=this.m_registers[s][y];if(p.createFcn){const s=p.createFcn(this.m_allocator);return p.primary?s.Reset(o,t,e,i):s.Reset(e,i,o,t),s}return null}Destroy(o){const t=o.m_fixtureA,e=o.m_fixtureB;o.m_manifold.pointCount>0&&!t.IsSensor()&&!e.IsSensor()&&(t.GetBody().SetAwake(!0),e.GetBody().SetAwake(!0));const i=t.GetType(),s=e.GetType(),y=this.m_registers[i][s];y.destroyFcn&&y.destroyFcn(o,this.m_allocator)}}class De{ShouldCollide(t,e){const i=t.GetBody(),s=e.GetBody();if(s.GetType()===o.b2BodyType.b2_staticBody&&i.GetType()===o.b2BodyType.b2_staticBody)return!1;if(!s.ShouldCollideConnected(i))return!1;const y=t.GetFilterData(),p=e.GetFilterData();return y.groupIndex===p.groupIndex&&0!==y.groupIndex?y.groupIndex>0:0!=(y.maskBits&p.categoryBits)&&0!=(y.categoryBits&p.maskBits)}ShouldCollideFixtureParticle(o,t,e){return!0}ShouldCollideParticleParticle(o,t,e){return!0}}De.b2_defaultFilter=new De;class Le{constructor(){this.normalImpulses=f(2),this.tangentImpulses=f(2),this.count=0}}class Te{BeginContact(o){}EndContact(o){}BeginContactFixtureParticle(o,t){}EndContactFixtureParticle(o,t){}BeginContactParticleParticle(o,t){}EndContactParticleParticle(o,t){}PreSolve(o,t){}PostSolve(o,t){}}Te.b2_defaultListener=new Te;class Fe{ReportFixture(o){return!0}ReportParticle(o,t){return!1}ShouldQueryParticleSystem(o){return!0}}class Re{constructor(){this.m_broadPhase=new wo,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=De.b2_defaultFilter,this.m_contactListener=Te.b2_defaultListener,this.m_allocator=null,this.m_contactFactory=new Ge(this.m_allocator)}AddPair(o,t){let e=o.fixture,i=t.fixture,s=o.childIndex,y=t.childIndex,p=e.GetBody(),f=i.GetBody();if(p===f)return;let a=f.GetContactList();for(;a;){if(a.other===p){const o=a.contact.GetFixtureA(),t=a.contact.GetFixtureB(),p=a.contact.GetChildIndexA(),f=a.contact.GetChildIndexB();if(o===e&&t===i&&p===s&&f===y)return;if(o===i&&t===e&&p===y&&f===s)return}a=a.next}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(e,i))return;const n=this.m_contactFactory.Create(e,s,i,y);null!==n&&(e=n.GetFixtureA(),i=n.GetFixtureB(),s=n.GetChildIndexA(),y=n.GetChildIndexB(),p=e.m_body,f=i.m_body,n.m_prev=null,n.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=n),this.m_contactList=n,n.m_nodeA.contact=n,n.m_nodeA.other=f,n.m_nodeA.prev=null,n.m_nodeA.next=p.m_contactList,null!==p.m_contactList&&(p.m_contactList.prev=n.m_nodeA),p.m_contactList=n.m_nodeA,n.m_nodeB.contact=n,n.m_nodeB.other=p,n.m_nodeB.prev=null,n.m_nodeB.next=f.m_contactList,null!==f.m_contactList&&(f.m_contactList.prev=n.m_nodeB),f.m_contactList=n.m_nodeB,e.IsSensor()||i.IsSensor()||(p.SetAwake(!0),f.SetAwake(!0)),++this.m_contactCount)}FindNewContacts(){this.m_broadPhase.UpdatePairs((o,t)=>{this.AddPair(o,t)})}Destroy(o){const t=o.GetFixtureA(),e=o.GetFixtureB(),i=t.GetBody(),s=e.GetBody();this.m_contactListener&&o.IsTouching()&&this.m_contactListener.EndContact(o),o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_contactList&&(this.m_contactList=o.m_next),o.m_nodeA.prev&&(o.m_nodeA.prev.next=o.m_nodeA.next),o.m_nodeA.next&&(o.m_nodeA.next.prev=o.m_nodeA.prev),o.m_nodeA===i.m_contactList&&(i.m_contactList=o.m_nodeA.next),o.m_nodeB.prev&&(o.m_nodeB.prev.next=o.m_nodeB.next),o.m_nodeB.next&&(o.m_nodeB.next.prev=o.m_nodeB.prev),o.m_nodeB===s.m_contactList&&(s.m_contactList=o.m_nodeB.next),this.m_contactFactory.Destroy(o),--this.m_contactCount}Collide(){let t=this.m_contactList;for(;t;){const e=t.GetFixtureA(),i=t.GetFixtureB(),s=t.GetChildIndexA(),y=t.GetChildIndexB(),p=e.GetBody(),f=i.GetBody();if(t.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(e,i)){const o=t;t=o.m_next,this.Destroy(o);continue}t.m_filterFlag=!1}const a=p.IsAwake()&&p.m_type!==o.b2BodyType.b2_staticBody,n=f.IsAwake()&&f.m_type!==o.b2BodyType.b2_staticBody;if(!a&&!n){t=t.m_next;continue}const C=e.m_proxies[s].treeNode,r=i.m_proxies[y].treeNode;if(_o(C.aabb,r.aabb))t.Update(this.m_contactListener),t=t.m_next;else{const o=t;t=o.m_next,this.Destroy(o)}}}}class ke{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}}class ze{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}Copy(o){return this.dt=o.dt,this.inv_dt=o.inv_dt,this.dtRatio=o.dtRatio,this.positionIterations=o.positionIterations,this.velocityIterations=o.velocityIterations,this.particleIterations=o.particleIterations,this.warmStarting=o.warmStarting,this}}class qe{constructor(){this.c=new B,this.a=0}static MakeArray(o){return p(o,o=>new qe)}}class Ee{constructor(){this.v=new B,this.w=0}static MakeArray(o){return p(o,o=>new Ee)}}class Je{constructor(){this.step=new ze}}class je{constructor(){this.rA=new B,this.rB=new B,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}static MakeArray(o){return p(o,o=>new je)}}class Ne{constructor(){this.points=je.MakeArray(2),this.normal=new B,this.tangent=new B,this.normalMass=new A,this.K=new A,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}static MakeArray(o){return p(o,o=>new Ne)}}class Oe{constructor(){this.localPoints=B.MakeArray(2),this.localNormal=new B,this.localPoint=new B,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new B,this.localCenterB=new B,this.invIA=0,this.invIB=0,this.type=o.b2ManifoldType.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}static MakeArray(o){return p(o,o=>new Oe)}}class Ue{constructor(){this.step=new ze,this.count=0,this.allocator=null}}class Xe{constructor(){this.normal=new B,this.point=new B,this.separation=0}Initialize(t,e,i,s){const y=Xe.Initialize_s_pointA,p=Xe.Initialize_s_pointB,f=Xe.Initialize_s_planePoint,a=Xe.Initialize_s_clipPoint;switch(t.type){case o.b2ManifoldType.e_circles:M.MulXV(e,t.localPoint,y),M.MulXV(i,t.localPoints[0],p),B.SubVV(p,y,this.normal).SelfNormalize(),B.MidVV(y,p,this.point),this.separation=B.DotVV(B.SubVV(p,y,B.s_t0),this.normal)-t.radiusA-t.radiusB;break;case o.b2ManifoldType.e_faceA:V.MulRV(e.q,t.localNormal,this.normal),M.MulXV(e,t.localPoint,f),M.MulXV(i,t.localPoints[s],a),this.separation=B.DotVV(B.SubVV(a,f,B.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(a);break;case o.b2ManifoldType.e_faceB:V.MulRV(i.q,t.localNormal,this.normal),M.MulXV(i,t.localPoint,f),M.MulXV(e,t.localPoints[s],a),this.separation=B.DotVV(B.SubVV(a,f,B.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(a),this.normal.SelfNeg()}}}Xe.Initialize_s_pointA=new B,Xe.Initialize_s_pointB=new B,Xe.Initialize_s_planePoint=new B,Xe.Initialize_s_clipPoint=new B;class We{constructor(){this.m_step=new ze,this.m_allocator=null,this.m_positionConstraints=Oe.MakeArray(1024),this.m_velocityConstraints=Ne.MakeArray(1024),this.m_count=0}Initialize(o){if(this.m_step.Copy(o.step),this.m_allocator=o.allocator,this.m_count=o.count,this.m_positionConstraints.length<this.m_count){const o=C(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<o;)this.m_positionConstraints[this.m_positionConstraints.length]=new Oe}if(this.m_velocityConstraints.length<this.m_count){const o=C(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<o;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new Ne}this.m_positions=o.positions,this.m_velocities=o.velocities,this.m_contacts=o.contacts;for(let o=0;o<this.m_count;++o){const t=this.m_contacts[o],e=t.m_fixtureA,i=t.m_fixtureB,s=e.GetShape(),y=i.GetShape(),p=s.m_radius,f=y.m_radius,a=e.GetBody(),n=i.GetBody(),C=t.GetManifold(),r=C.pointCount,m=this.m_velocityConstraints[o];m.friction=t.m_friction,m.restitution=t.m_restitution,m.tangentSpeed=t.m_tangentSpeed,m.indexA=a.m_islandIndex,m.indexB=n.m_islandIndex,m.invMassA=a.m_invMass,m.invMassB=n.m_invMass,m.invIA=a.m_invI,m.invIB=n.m_invI,m.contactIndex=o,m.pointCount=r,m.K.SetZero(),m.normalMass.SetZero();const l=this.m_positionConstraints[o];l.indexA=a.m_islandIndex,l.indexB=n.m_islandIndex,l.invMassA=a.m_invMass,l.invMassB=n.m_invMass,l.localCenterA.Copy(a.m_sweep.localCenter),l.localCenterB.Copy(n.m_sweep.localCenter),l.invIA=a.m_invI,l.invIB=n.m_invI,l.localNormal.Copy(C.localNormal),l.localPoint.Copy(C.localPoint),l.pointCount=r,l.radiusA=p,l.radiusB=f,l.type=C.type;for(let o=0;o<r;++o){const t=C.points[o],e=m.points[o];this.m_step.warmStarting?(e.normalImpulse=this.m_step.dtRatio*t.normalImpulse,e.tangentImpulse=this.m_step.dtRatio*t.tangentImpulse):(e.normalImpulse=0,e.tangentImpulse=0),e.rA.SetZero(),e.rB.SetZero(),e.normalMass=0,e.tangentMass=0,e.velocityBias=0,l.localPoints[o].Copy(t.localPoint)}}return this}InitializeVelocityConstraints(){const o=We.InitializeVelocityConstraints_s_xfA,t=We.InitializeVelocityConstraints_s_xfB,e=We.InitializeVelocityConstraints_s_worldManifold;for(let i=0;i<this.m_count;++i){const s=this.m_velocityConstraints[i],y=this.m_positionConstraints[i],p=y.radiusA,f=y.radiusB,a=this.m_contacts[s.contactIndex].GetManifold(),n=s.indexA,C=s.indexB,r=s.invMassA,m=s.invMassB,l=s.invIA,h=s.invIB,_=y.localCenterA,c=y.localCenterB,u=this.m_positions[n].c,d=this.m_positions[n].a,g=this.m_velocities[n].v,x=this.m_velocities[n].w,b=this.m_positions[C].c,v=this.m_positions[C].a,S=this.m_velocities[C].v,A=this.m_velocities[C].w;o.q.SetAngle(d),t.q.SetAngle(v),B.SubVV(u,V.MulRV(o.q,_,B.s_t0),o.p),B.SubVV(b,V.MulRV(t.q,c,B.s_t0),t.p),e.Initialize(a,o,p,t,f),s.normal.Copy(e.normal),B.CrossVOne(s.normal,s.tangent);const w=s.pointCount;for(let o=0;o<w;++o){const t=s.points[o];B.SubVV(e.points[o],u,t.rA),B.SubVV(e.points[o],b,t.rB);const i=B.CrossVV(t.rA,s.normal),y=B.CrossVV(t.rB,s.normal),p=r+m+l*i*i+h*y*y;t.normalMass=p>0?1/p:0;const f=s.tangent,a=B.CrossVV(t.rA,f),n=B.CrossVV(t.rB,f),C=r+m+l*a*a+h*n*n;t.tangentMass=C>0?1/C:0,t.velocityBias=0;const _=B.DotVV(s.normal,B.SubVV(B.AddVCrossSV(S,A,t.rB,B.s_t0),B.AddVCrossSV(g,x,t.rA,B.s_t1),B.s_t0));_<-1&&(t.velocityBias+=-s.restitution*_)}s.pointCount}}WarmStart(){const o=We.WarmStart_s_P;for(let t=0;t<this.m_count;++t){const e=this.m_velocityConstraints[t],i=e.indexA,s=e.indexB,y=e.invMassA,p=e.invIA,f=e.invMassB,a=e.invIB,n=e.pointCount,C=this.m_velocities[i].v;let r=this.m_velocities[i].w;const m=this.m_velocities[s].v;let l=this.m_velocities[s].w;const h=e.normal,_=e.tangent;for(let t=0;t<n;++t){const i=e.points[t];B.AddVV(B.MulSV(i.normalImpulse,h,B.s_t0),B.MulSV(i.tangentImpulse,_,B.s_t1),o),r-=p*B.CrossVV(i.rA,o),C.SelfMulSub(y,o),l+=a*B.CrossVV(i.rB,o),m.SelfMulAdd(f,o)}this.m_velocities[i].w=r,this.m_velocities[s].w=l}}SolveVelocityConstraints(){const o=We.SolveVelocityConstraints_s_dv,t=(We.SolveVelocityConstraints_s_dv1,We.SolveVelocityConstraints_s_dv2,We.SolveVelocityConstraints_s_P);We.SolveVelocityConstraints_s_a,We.SolveVelocityConstraints_s_b,We.SolveVelocityConstraints_s_x,We.SolveVelocityConstraints_s_d,We.SolveVelocityConstraints_s_P1,We.SolveVelocityConstraints_s_P2,We.SolveVelocityConstraints_s_P1P2;for(let e=0;e<this.m_count;++e){const i=this.m_velocityConstraints[e],s=i.indexA,y=i.indexB,p=i.invMassA,f=i.invIA,a=i.invMassB,n=i.invIB,m=i.pointCount,l=this.m_velocities[s].v;let h=this.m_velocities[s].w;const _=this.m_velocities[y].v;let c=this.m_velocities[y].w;const u=i.normal,d=i.tangent,g=i.friction;for(let e=0;e<m;++e){const s=i.points[e];B.SubVV(B.AddVCrossSV(_,c,s.rB,B.s_t0),B.AddVCrossSV(l,h,s.rA,B.s_t1),o);const y=B.DotVV(o,d)-i.tangentSpeed;let C=s.tangentMass*-y;const m=g*s.normalImpulse,u=r(s.tangentImpulse+C,-m,m);C=u-s.tangentImpulse,s.tangentImpulse=u,B.MulSV(C,d,t),l.SelfMulSub(p,t),h-=f*B.CrossVV(s.rA,t),_.SelfMulAdd(a,t),c+=n*B.CrossVV(s.rB,t)}i.pointCount;for(let e=0;e<m;++e){const s=i.points[e];B.SubVV(B.AddVCrossSV(_,c,s.rB,B.s_t0),B.AddVCrossSV(l,h,s.rA,B.s_t1),o);const y=B.DotVV(o,u);let r=-s.normalMass*(y-s.velocityBias);const m=C(s.normalImpulse+r,0);r=m-s.normalImpulse,s.normalImpulse=m,B.MulSV(r,u,t),l.SelfMulSub(p,t),h-=f*B.CrossVV(s.rA,t),_.SelfMulAdd(a,t),c+=n*B.CrossVV(s.rB,t)}this.m_velocities[s].w=h,this.m_velocities[y].w=c}}StoreImpulses(){for(let o=0;o<this.m_count;++o){const t=this.m_velocityConstraints[o],e=this.m_contacts[t.contactIndex].GetManifold();for(let o=0;o<t.pointCount;++o)e.points[o].normalImpulse=t.points[o].normalImpulse,e.points[o].tangentImpulse=t.points[o].tangentImpulse}}SolvePositionConstraints(){const o=We.SolvePositionConstraints_s_xfA,t=We.SolvePositionConstraints_s_xfB,e=We.SolvePositionConstraints_s_psm,i=We.SolvePositionConstraints_s_rA,s=We.SolvePositionConstraints_s_rB,y=We.SolvePositionConstraints_s_P;let p=0;for(let f=0;f<this.m_count;++f){const a=this.m_positionConstraints[f],C=a.indexA,m=a.indexB,l=a.localCenterA,h=a.invMassA,_=a.invIA,c=a.localCenterB,u=a.invMassB,d=a.invIB,g=a.pointCount,x=this.m_positions[C].c;let b=this.m_positions[C].a;const v=this.m_positions[m].c;let S=this.m_positions[m].a;for(let f=0;f<g;++f){o.q.SetAngle(b),t.q.SetAngle(S),B.SubVV(x,V.MulRV(o.q,l,B.s_t0),o.p),B.SubVV(v,V.MulRV(t.q,c,B.s_t0),t.p),e.Initialize(a,o,t,f);const C=e.normal,m=e.point,g=e.separation;B.SubVV(m,x,i),B.SubVV(m,v,s),p=n(p,g);const A=r(.2*(g+.008),-.2,0),w=B.CrossVV(i,C),M=B.CrossVV(s,C),I=h+u+_*w*w+d*M*M,P=I>0?-A/I:0;B.MulSV(P,C,y),x.SelfMulSub(h,y),b-=_*B.CrossVV(i,y),v.SelfMulAdd(u,y),S+=d*B.CrossVV(s,y)}this.m_positions[C].a=b,this.m_positions[m].a=S}return p>-.024}SolveTOIPositionConstraints(o,t){const e=We.SolveTOIPositionConstraints_s_xfA,i=We.SolveTOIPositionConstraints_s_xfB,s=We.SolveTOIPositionConstraints_s_psm,y=We.SolveTOIPositionConstraints_s_rA,p=We.SolveTOIPositionConstraints_s_rB,f=We.SolveTOIPositionConstraints_s_P;let a=0;for(let C=0;C<this.m_count;++C){const m=this.m_positionConstraints[C],l=m.indexA,h=m.indexB,_=m.localCenterA,c=m.localCenterB,u=m.pointCount;let d=0,g=0;l!==o&&l!==t||(d=m.invMassA,g=m.invIA);let x=0,b=0;h!==o&&h!==t||(x=m.invMassB,b=m.invIB);const v=this.m_positions[l].c;let S=this.m_positions[l].a;const A=this.m_positions[h].c;let w=this.m_positions[h].a;for(let o=0;o<u;++o){e.q.SetAngle(S),i.q.SetAngle(w),B.SubVV(v,V.MulRV(e.q,_,B.s_t0),e.p),B.SubVV(A,V.MulRV(i.q,c,B.s_t0),i.p),s.Initialize(m,e,i,o);const t=s.normal,C=s.point,l=s.separation;B.SubVV(C,v,y),B.SubVV(C,A,p),a=n(a,l);const h=r(.75*(l+.008),-.2,0),u=B.CrossVV(y,t),M=B.CrossVV(p,t),I=d+x+g*u*u+b*M*M,P=I>0?-h/I:0;B.MulSV(P,t,f),v.SelfMulSub(d,f),S-=g*B.CrossVV(y,f),A.SelfMulAdd(x,f),w+=b*B.CrossVV(p,f)}this.m_positions[l].a=S,this.m_positions[h].a=w}return a>=-.012}}We.InitializeVelocityConstraints_s_xfA=new M,We.InitializeVelocityConstraints_s_xfB=new M,We.InitializeVelocityConstraints_s_worldManifold=new Co,We.WarmStart_s_P=new B,We.SolveVelocityConstraints_s_dv=new B,We.SolveVelocityConstraints_s_dv1=new B,We.SolveVelocityConstraints_s_dv2=new B,We.SolveVelocityConstraints_s_P=new B,We.SolveVelocityConstraints_s_a=new B,We.SolveVelocityConstraints_s_b=new B,We.SolveVelocityConstraints_s_x=new B,We.SolveVelocityConstraints_s_d=new B,We.SolveVelocityConstraints_s_P1=new B,We.SolveVelocityConstraints_s_P2=new B,We.SolveVelocityConstraints_s_P1P2=new B,We.SolvePositionConstraints_s_xfA=new M,We.SolvePositionConstraints_s_xfB=new M,We.SolvePositionConstraints_s_psm=new Xe,We.SolvePositionConstraints_s_rA=new B,We.SolvePositionConstraints_s_rB=new B,We.SolvePositionConstraints_s_P=new B,We.SolveTOIPositionConstraints_s_xfA=new M,We.SolveTOIPositionConstraints_s_xfB=new M,We.SolveTOIPositionConstraints_s_psm=new Xe,We.SolveTOIPositionConstraints_s_rA=new B,We.SolveTOIPositionConstraints_s_rB=new B,We.SolveTOIPositionConstraints_s_P=new B;class Ze{constructor(){this.m_allocator=null,this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=qe.MakeArray(1024),this.m_velocities=Ee.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}Initialize(o,t,e,i,s){if(this.m_bodyCapacity=o,this.m_contactCapacity=t,this.m_jointCapacity=e,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=i,this.m_listener=s,this.m_positions.length<o){const t=C(2*this.m_positions.length,o);for(;this.m_positions.length<t;)this.m_positions[this.m_positions.length]=new qe}if(this.m_velocities.length<o){const t=C(2*this.m_velocities.length,o);for(;this.m_velocities.length<t;)this.m_velocities[this.m_velocities.length]=new Ee}}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(o){o.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=o}AddContact(o){this.m_contacts[this.m_contactCount++]=o}AddJoint(o){this.m_joints[this.m_jointCount++]=o}Solve(t,e,i,s){const y=Ze.s_timer.Reset(),p=e.dt;for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];this.m_positions[t].c.Copy(e.m_sweep.c);const s=e.m_sweep.a,y=this.m_velocities[t].v.Copy(e.m_linearVelocity);let f=e.m_angularVelocity;e.m_sweep.c0.Copy(e.m_sweep.c),e.m_sweep.a0=e.m_sweep.a,e.m_type===o.b2BodyType.b2_dynamicBody&&(y.x+=p*(e.m_gravityScale*i.x+e.m_invMass*e.m_force.x),y.y+=p*(e.m_gravityScale*i.y+e.m_invMass*e.m_force.y),f+=p*e.m_invI*e.m_torque,y.SelfMul(1/(1+p*e.m_linearDamping)),f*=1/(1+p*e.m_angularDamping)),this.m_positions[t].a=s,this.m_velocities[t].w=f}y.Reset();const f=Ze.s_solverData;f.step.Copy(e),f.positions=this.m_positions,f.velocities=this.m_velocities;const C=Ze.s_contactSolverDef;C.step.Copy(e),C.contacts=this.m_contacts,C.count=this.m_contactCount,C.positions=this.m_positions,C.velocities=this.m_velocities,C.allocator=this.m_allocator;const r=Ze.s_contactSolver.Initialize(C);r.InitializeVelocityConstraints(),e.warmStarting&&r.WarmStart();for(let o=0;o<this.m_jointCount;++o)this.m_joints[o].InitVelocityConstraints(f);t.solveInit=y.GetMilliseconds(),y.Reset();for(let o=0;o<e.velocityIterations;++o){for(let o=0;o<this.m_jointCount;++o)this.m_joints[o].SolveVelocityConstraints(f);r.SolveVelocityConstraints()}r.StoreImpulses(),t.solveVelocity=y.GetMilliseconds();for(let o=0;o<this.m_bodyCount;++o){const t=this.m_positions[o].c;let e=this.m_positions[o].a;const i=this.m_velocities[o].v;let s=this.m_velocities[o].w;const y=B.MulSV(p,i,Ze.s_translation);if(B.DotVV(y,y)>4){const o=2/y.Length();i.SelfMul(o)}const f=p*s;f*f>2.4674011002726646&&(s*=1.570796326795/a(f)),t.x+=p*i.x,t.y+=p*i.y,e+=p*s,this.m_positions[o].a=e,this.m_velocities[o].w=s}y.Reset();let m=!1;for(let o=0;o<e.positionIterations;++o){const o=r.SolvePositionConstraints();let t=!0;for(let o=0;o<this.m_jointCount;++o){const e=this.m_joints[o].SolvePositionConstraints(f);t=t&&e}if(o&&t){m=!0;break}}for(let o=0;o<this.m_bodyCount;++o){const t=this.m_bodies[o];t.m_sweep.c.Copy(this.m_positions[o].c),t.m_sweep.a=this.m_positions[o].a,t.m_linearVelocity.Copy(this.m_velocities[o].v),t.m_angularVelocity=this.m_velocities[o].w,t.SynchronizeTransform()}if(t.solvePosition=y.GetMilliseconds(),this.Report(r.m_velocityConstraints),s){let t=1e37;const e=1e-4,i=.0012184696791469947;for(let s=0;s<this.m_bodyCount;++s){const y=this.m_bodies[s];y.GetType()!==o.b2BodyType.b2_staticBody&&(!y.m_autoSleepFlag||y.m_angularVelocity*y.m_angularVelocity>i||B.DotVV(y.m_linearVelocity,y.m_linearVelocity)>e?(y.m_sleepTime=0,t=0):(y.m_sleepTime+=p,t=n(t,y.m_sleepTime)))}if(t>=.5&&m)for(let o=0;o<this.m_bodyCount;++o)this.m_bodies[o].SetAwake(!1)}}SolveTOI(o,t,e){for(let o=0;o<this.m_bodyCount;++o){const t=this.m_bodies[o];this.m_positions[o].c.Copy(t.m_sweep.c),this.m_positions[o].a=t.m_sweep.a,this.m_velocities[o].v.Copy(t.m_linearVelocity),this.m_velocities[o].w=t.m_angularVelocity}const i=Ze.s_contactSolverDef;i.contacts=this.m_contacts,i.count=this.m_contactCount,i.allocator=this.m_allocator,i.step.Copy(o),i.positions=this.m_positions,i.velocities=this.m_velocities;const s=Ze.s_contactSolver.Initialize(i);for(let i=0;i<o.positionIterations&&!s.SolveTOIPositionConstraints(t,e);++i);this.m_bodies[t].m_sweep.c0.Copy(this.m_positions[t].c),this.m_bodies[t].m_sweep.a0=this.m_positions[t].a,this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,s.InitializeVelocityConstraints();for(let t=0;t<o.velocityIterations;++t)s.SolveVelocityConstraints();const y=o.dt;for(let o=0;o<this.m_bodyCount;++o){const t=this.m_positions[o].c;let e=this.m_positions[o].a;const i=this.m_velocities[o].v;let s=this.m_velocities[o].w;const p=B.MulSV(y,i,Ze.s_translation);if(B.DotVV(p,p)>4){const o=2/p.Length();i.SelfMul(o)}const f=y*s;f*f>2.4674011002726646&&(s*=1.570796326795/a(f)),t.SelfMulAdd(y,i),e+=y*s,this.m_positions[o].a=e,this.m_velocities[o].w=s;const n=this.m_bodies[o];n.m_sweep.c.Copy(t),n.m_sweep.a=e,n.m_linearVelocity.Copy(i),n.m_angularVelocity=s,n.SynchronizeTransform()}this.Report(s.m_velocityConstraints)}Report(o){if(null!==this.m_listener)for(let t=0;t<this.m_contactCount;++t){const e=this.m_contacts[t];if(!e)continue;const i=o[t],s=Ze.s_impulse;s.count=i.pointCount;for(let o=0;o<i.pointCount;++o)s.normalImpulses[o]=i.points[o].normalImpulse,s.tangentImpulses[o]=i.points[o].tangentImpulse;this.m_listener.PostSolve(e,s)}}}Ze.s_timer=new D,Ze.s_solverData=new Je,Ze.s_contactSolverDef=new Ue,Ze.s_contactSolver=new We,Ze.s_translation=new B,Ze.s_impulse=new Le,(Ut=o.b2ParticleFlag||(o.b2ParticleFlag={}))[Ut.b2_waterParticle=0]="b2_waterParticle",Ut[Ut.b2_zombieParticle=2]="b2_zombieParticle",Ut[Ut.b2_wallParticle=4]="b2_wallParticle",Ut[Ut.b2_springParticle=8]="b2_springParticle",Ut[Ut.b2_elasticParticle=16]="b2_elasticParticle",Ut[Ut.b2_viscousParticle=32]="b2_viscousParticle",Ut[Ut.b2_powderParticle=64]="b2_powderParticle",Ut[Ut.b2_tensileParticle=128]="b2_tensileParticle",Ut[Ut.b2_colorMixingParticle=256]="b2_colorMixingParticle",Ut[Ut.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",Ut[Ut.b2_barrierParticle=1024]="b2_barrierParticle",Ut[Ut.b2_staticPressureParticle=2048]="b2_staticPressureParticle",Ut[Ut.b2_reactiveParticle=4096]="b2_reactiveParticle",Ut[Ut.b2_repulsiveParticle=8192]="b2_repulsiveParticle",Ut[Ut.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",Ut[Ut.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",Ut[Ut.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",Ut[Ut.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle";class He{constructor(){this.flags=0,this.position=new B,this.velocity=new B,this.color=new P(0,0,0,0),this.lifetime=0,this.userData=null,this.group=null}}function Qe(o,t,e){return r(Math.ceil(Math.sqrt(o/(.01*t))*e),1,8)}class Ye{constructor(){this.m_index=-1}GetIndex(){return this.m_index}SetIndex(o){this.m_index=o}}(Xt=o.b2ParticleGroupFlag||(o.b2ParticleGroupFlag={}))[Xt.b2_solidParticleGroup=1]="b2_solidParticleGroup",Xt[Xt.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",Xt[Xt.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",Xt[Xt.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",Xt[Xt.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",Xt[Xt.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask";class Ke{constructor(){this.flags=0,this.groupFlags=0,this.position=new B,this.angle=0,this.linearVelocity=new B,this.angularVelocity=0,this.color=new P,this.strength=1,this.shapeCount=0,this.stride=0,this.particleCount=0,this.lifetime=0,this.userData=null,this.group=null}}class $e{constructor(o){this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new B,this.m_linearVelocity=new B,this.m_angularVelocity=0,this.m_transform=new M,this.m_userData=null,this.m_system=o}GetNext(){return this.m_next}GetParticleSystem(){return this.m_system}GetParticleCount(){return this.m_lastIndex-this.m_firstIndex}GetBufferIndex(){return this.m_firstIndex}ContainsParticle(o){return this.m_firstIndex<=o&&o<this.m_lastIndex}GetAllParticleFlags(){if(!this.m_system.m_flagsBuffer.data)throw new Error;let o=0;for(let t=this.m_firstIndex;t<this.m_lastIndex;t++)o|=this.m_system.m_flagsBuffer.data[t];return o}GetGroupFlags(){return this.m_groupFlags}SetGroupFlags(t){t|=this.m_groupFlags&o.b2ParticleGroupFlag.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,t)}GetMass(){return this.UpdateStatistics(),this.m_mass}GetInertia(){return this.UpdateStatistics(),this.m_inertia}GetCenter(){return this.UpdateStatistics(),this.m_center}GetLinearVelocity(){return this.UpdateStatistics(),this.m_linearVelocity}GetAngularVelocity(){return this.UpdateStatistics(),this.m_angularVelocity}GetTransform(){return this.m_transform}GetPosition(){return this.m_transform.p}GetAngle(){return this.m_transform.q.GetAngle()}GetLinearVelocityFromWorldPoint(o,t){const e=$e.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),B.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,B.SubVV(o,this.m_center,e),t)}GetUserData(){return this.m_userData}SetUserData(o){this.m_userData=o}ApplyForce(o){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,o)}ApplyLinearImpulse(o){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,o)}DestroyParticles(o){if(this.m_system.m_world.IsLocked())throw new Error;for(let t=this.m_firstIndex;t<this.m_lastIndex;t++)this.m_system.DestroyParticle(t,o)}UpdateStatistics(){if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;const o=new B,t=new B;if(this.m_timestamp!==this.m_system.m_timestamp){const e=this.m_system.GetParticleMass();this.m_mass=e*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(let o=this.m_firstIndex;o<this.m_lastIndex;o++)this.m_center.SelfMulAdd(e,this.m_system.m_positionBuffer.data[o]),this.m_linearVelocity.SelfMulAdd(e,this.m_system.m_velocityBuffer.data[o]);if(this.m_mass>0){const o=1/this.m_mass;this.m_center.SelfMul(o),this.m_linearVelocity.SelfMul(o)}this.m_inertia=0,this.m_angularVelocity=0;for(let i=this.m_firstIndex;i<this.m_lastIndex;i++)B.SubVV(this.m_system.m_positionBuffer.data[i],this.m_center,o),B.SubVV(this.m_system.m_velocityBuffer.data[i],this.m_linearVelocity,t),this.m_inertia+=e*B.DotVV(o,o),this.m_angularVelocity+=e*B.CrossVV(o,t);this.m_inertia>0&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}}}$e.GetLinearVelocityFromWorldPoint_s_t0=new B;class oi{constructor(o){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=p(o,o=>null),this.m_capacity=o}Push(o){if(this.m_back>=this.m_capacity){for(let o=this.m_front;o<this.m_back;o++)this.m_buffer[o-this.m_front]=this.m_buffer[o];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(this.m_capacity>0?(this.m_buffer.concat(p(this.m_capacity,o=>null)),this.m_capacity*=2):(this.m_buffer.concat(p(1,o=>null)),this.m_capacity=1))}this.m_buffer[this.m_back]=o,this.m_back++}Pop(){this.m_buffer[this.m_front]=null,this.m_front++}Empty(){return this.m_front===this.m_back}Front(){const o=this.m_buffer[this.m_front];if(!o)throw new Error;return o}}class ti{constructor(o){this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=[],this.m_generatorBuffer=p(o,o=>new ti.Generator),this.m_generatorCapacity=o}AddGenerator(o,t,e){const i=this.m_generatorBuffer[this.m_generatorCount++];i.center.Copy(o),i.tag=t,i.necessary=e}Generate(o,t){const e=1/o,i=new B(1e37,1e37),s=new B(-1e37,-1e37);let y=0;for(let o=0;o<this.m_generatorCount;o++){const t=this.m_generatorBuffer[o];t.necessary&&(B.MinV(i,t.center,i),B.MaxV(s,t.center,s),++y)}if(0===y)return this.m_countX=0,void(this.m_countY=0);i.x-=t,i.y-=t,s.x+=t,s.y+=t,this.m_countX=1+Math.floor(e*(s.x-i.x)),this.m_countY=1+Math.floor(e*(s.y-i.y)),this.m_diagram=[];const p=new oi(4*this.m_countX*this.m_countY);for(let o=0;o<this.m_generatorCount;o++){const t=this.m_generatorBuffer[o];t.center.SelfSub(i).SelfMul(e);const s=Math.floor(t.center.x),y=Math.floor(t.center.y);s>=0&&y>=0&&s<this.m_countX&&y<this.m_countY&&p.Push(new ti.Task(s,y,s+y*this.m_countX,t))}for(;!p.Empty();){const o=p.Front(),t=o.m_x,e=o.m_y,i=o.m_i,s=o.m_generator;p.Pop(),this.m_diagram[i]||(this.m_diagram[i]=s,t>0&&p.Push(new ti.Task(t-1,e,i-1,s)),e>0&&p.Push(new ti.Task(t,e-1,i-this.m_countX,s)),t<this.m_countX-1&&p.Push(new ti.Task(t+1,e,i+1,s)),e<this.m_countY-1&&p.Push(new ti.Task(t,e+1,i+this.m_countX,s)))}for(let o=0;o<this.m_countY;o++)for(let t=0;t<this.m_countX-1;t++){const e=t+o*this.m_countX,i=this.m_diagram[e],s=this.m_diagram[e+1];i!==s&&(p.Push(new ti.Task(t,o,e,s)),p.Push(new ti.Task(t+1,o,e+1,i)))}for(let o=0;o<this.m_countY-1;o++)for(let t=0;t<this.m_countX;t++){const e=t+o*this.m_countX,i=this.m_diagram[e],s=this.m_diagram[e+this.m_countX];i!==s&&(p.Push(new ti.Task(t,o,e,s)),p.Push(new ti.Task(t,o+1,e+this.m_countX,i)))}for(;!p.Empty();){const o=p.Front(),t=o.m_x,e=o.m_y,i=o.m_i,s=o.m_generator;p.Pop();const y=this.m_diagram[i],f=s;if(y!==f){const o=y.center.x-t,s=y.center.y-e,a=f.center.x-t,n=f.center.y-e;o*o+s*s>a*a+n*n&&(this.m_diagram[i]=f,t>0&&p.Push(new ti.Task(t-1,e,i-1,f)),e>0&&p.Push(new ti.Task(t,e-1,i-this.m_countX,f)),t<this.m_countX-1&&p.Push(new ti.Task(t+1,e,i+1,f)),e<this.m_countY-1&&p.Push(new ti.Task(t,e+1,i+this.m_countX,f)))}}}GetNodes(o){for(let t=0;t<this.m_countY-1;t++)for(let e=0;e<this.m_countX-1;e++){const i=e+t*this.m_countX,s=this.m_diagram[i],y=this.m_diagram[i+1],p=this.m_diagram[i+this.m_countX],f=this.m_diagram[i+1+this.m_countX];y!==p&&(s!==y&&s!==p&&(s.necessary||y.necessary||p.necessary)&&o(s.tag,y.tag,p.tag),f!==y&&f!==p&&(s.necessary||y.necessary||p.necessary)&&o(y.tag,f.tag,p.tag))}}}function ei(o,t,e){const i=o[t];o[t]=o[e],o[e]=i}function ii(o,t){return o<t}function si(o,t=0,e=o.length-t,i=ii){let s=t;const y=[];let p=0;for(;;){for(;s+1<e;e++){const t=o[s+Math.floor(Math.random()*(e-s))];y[p++]=e;for(let y=s-1;;){for(;i(o[++y],t););for(;i(t,o[--e]););if(y>=e)break;ei(o,y,e)}}if(0===p)break;s=e,e=y[--p]}return o}function yi(o,t=0,e=o.length-t,i=ii){return si(o,t,e,i)}function pi(o,t,e=o.length){let i=0;for(let s=0;s<e;++s)t(o[s])||(s!==i?ei(o,i++,s):++i);return i}function fi(o,t,e,i,s=ii){let y=e-t;for(;y>0;){const e=Math.floor(y/2);let p=t+e;s(o[p],i)?(t=++p,y-=e+1):y=e}return t}function ai(o,t,e,i,s=ii){let y=e-t;for(;y>0;){const e=Math.floor(y/2);let p=t+e;s(i,o[p])?y=e:(t=++p,y-=e+1)}return t}function ni(o,t,e,i){let s=e;for(;t!==s;)ei(o,t++,s++),s===i?s=e:t===e&&(e=s)}!function(o){o.Generator=class{constructor(){this.center=new B,this.tag=0,this.necessary=!1}},o.Task=class{constructor(o,t,e,i){this.m_x=o,this.m_y=t,this.m_i=e,this.m_generator=i}}}(ti||(ti={}));class Ci{constructor(o){this.data=[],this.count=0,this.capacity=0,this.allocator=o}Append(){return this.count>=this.capacity&&this.Grow(),this.count++}Reserve(o){if(!(this.capacity>=o)){for(let t=this.capacity;t<o;++t)this.data[t]=this.allocator();this.capacity=o}}Grow(){const o=this.capacity?2*this.capacity:256;this.Reserve(o)}Free(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)}Shorten(o){}Data(){return this.data}GetCount(){return this.count}SetCount(o){this.count=o}GetCapacity(){return this.capacity}RemoveIf(o){this.count=pi(this.data,o,this.count)}Unique(o){this.count=function(o,t,e,i){if(t===e)return e;let s=t;for(;++t!==e;)i(o[s],o[t])||ei(o,++s,t);return++s}(this.data,0,this.count,o)}}class ri extends Fe{constructor(o){super(),this.m_system=o}ShouldQueryParticleSystem(o){return!1}ReportFixture(o){if(o.IsSensor())return!0;const t=o.GetShape().GetChildCount();for(let e=0;e<t;e++){const t=o.GetAABB(e),i=this.m_system.GetInsideBoundsEnumerator(t);let s;for(;(s=i.GetNext())>=0;)this.ReportFixtureAndParticle(o,e,s)}return!0}ReportParticle(o,t){return!1}ReportFixtureAndParticle(o,t,e){}}class mi{constructor(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new B,this.flags=0}SetIndices(o,t){this.indexA=o,this.indexB=t}SetWeight(o){this.weight=o}SetNormal(o){this.normal.Copy(o)}SetFlags(o){this.flags=o}GetIndexA(){return this.indexA}GetIndexB(){return this.indexB}GetWeight(){return this.weight}GetNormal(){return this.normal}GetFlags(){return this.flags}IsEqual(o){return this.indexA===o.indexA&&this.indexB===o.indexB&&this.flags===o.flags&&this.weight===o.weight&&this.normal.x===o.normal.x&&this.normal.y===o.normal.y}IsNotEqual(o){return!this.IsEqual(o)}ApproximatelyEqual(o){return this.indexA===o.indexA&&this.indexB===o.indexB&&this.flags===o.flags&&a(this.weight-o.weight)<.01&&B.DistanceSquaredVV(this.normal,o.normal)<1e-4}}class li{constructor(){this.index=0,this.weight=0,this.normal=new B,this.mass=0}}class hi{constructor(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0}}class _i{constructor(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new B(0,0),this.pb=new B(0,0),this.pc=new B(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0}}class ci{constructor(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}Copy(o){return this.strictContactCheck=o.strictContactCheck,this.density=o.density,this.gravityScale=o.gravityScale,this.radius=o.radius,this.maxCount=o.maxCount,this.pressureStrength=o.pressureStrength,this.dampingStrength=o.dampingStrength,this.elasticStrength=o.elasticStrength,this.springStrength=o.springStrength,this.viscousStrength=o.viscousStrength,this.surfaceTensionPressureStrength=o.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=o.surfaceTensionNormalStrength,this.repulsiveStrength=o.repulsiveStrength,this.powderStrength=o.powderStrength,this.ejectionStrength=o.ejectionStrength,this.staticPressureStrength=o.staticPressureStrength,this.staticPressureRelaxation=o.staticPressureRelaxation,this.staticPressureIterations=o.staticPressureIterations,this.colorMixingStrength=o.colorMixingStrength,this.destroyByAge=o.destroyByAge,this.lifetimeGranularity=o.lifetimeGranularity,this}Clone(){return(new ci).Copy(this)}}class ui{constructor(o,t){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new ui.UserOverridableBuffer,this.m_flagsBuffer=new ui.UserOverridableBuffer,this.m_positionBuffer=new ui.UserOverridableBuffer,this.m_velocityBuffer=new ui.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new ui.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new ui.UserOverridableBuffer,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new ui.UserOverridableBuffer,this.m_bodyContactCountBuffer=new ui.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new ui.UserOverridableBuffer,this.m_stuckParticleBuffer=new Ci(()=>0),this.m_proxyBuffer=new Ci(()=>new ui.Proxy),this.m_contactBuffer=new Ci(()=>new mi),this.m_bodyContactBuffer=new Ci(()=>new li),this.m_pairBuffer=new Ci(()=>new hi),this.m_triadBuffer=new Ci(()=>new _i),this.m_expirationTimeBuffer=new ui.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new ui.UserOverridableBuffer,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new ci,this.m_prev=null,this.m_next=null,this.SetStrictContactCheck(o.strictContactCheck),this.SetDensity(o.density),this.SetGravityScale(o.gravityScale),this.SetRadius(o.radius),this.SetMaxParticleCount(o.maxCount),this.m_def=o.Clone(),this.m_world=t,this.SetDestructionByAge(this.m_def.destroyByAge)}static computeTag(o,t){return(t+ui.yOffset>>>0<<ui.yShift)+(ui.xScale*o+ui.xOffset>>>0)>>>0}static computeRelativeTag(o,t,e){return o+(e<<ui.yShift)+(t<<ui.xShift)>>>0}Drop(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)}CreateParticle(o){if(this.m_world.IsLocked())throw new Error;if(this.m_count>=this.m_internalAllocatedCapacity){const o=this.m_count?2*this.m_count:256;this.ReallocateInternalAllocatedBuffers(o)}if(this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return-1;this.DestroyOldestParticle(0,!1),this.SolveZombie()}const e=this.m_count++;if(!this.m_flagsBuffer.data)throw new Error;if(this.m_flagsBuffer.data[e]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[e]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[e]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[e]=0),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;this.m_positionBuffer.data[e]=(this.m_positionBuffer.data[e]||new B).Copy(t(o.position,B.ZERO)),this.m_velocityBuffer.data[e]=(this.m_velocityBuffer.data[e]||new B).Copy(t(o.velocity,B.ZERO)),this.m_weightBuffer[e]=0,this.m_forceBuffer[e]=(this.m_forceBuffer[e]||new B).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[e]=0),this.m_depthBuffer&&(this.m_depthBuffer[e]=0);const i=(new P).Copy(t(o.color,P.ZERO));!this.m_colorBuffer.data&&i.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[e]=(this.m_colorBuffer.data[e]||new P).Copy(i)),(this.m_userDataBuffer.data||o.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[e]=o.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[e]=null);const s=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],y=t(o.lifetime,0),p=y>0;if(this.m_expirationTimeBuffer.data||p){if(this.SetParticleLifetime(e,p?y:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_indexByExpirationTimeBuffer.data[e]=e}s.index=e;const f=t(o.group,null);return this.m_groupBuffer[e]=f,f&&(f.m_firstIndex<f.m_lastIndex?(this.RotateBuffer(f.m_firstIndex,f.m_lastIndex,e),f.m_lastIndex=e+1):(f.m_firstIndex=e,f.m_lastIndex=e+1)),this.SetParticleFlags(e,t(o.flags,0)),e}GetParticleHandleFromIndex(o){this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);let t=this.m_handleIndexBuffer.data[o];return t||(t=new Ye,t.SetIndex(o),this.m_handleIndexBuffer.data[o]=t,t)}DestroyParticle(t,e=!1){if(!this.m_flagsBuffer.data)throw new Error;let i=o.b2ParticleFlag.b2_zombieParticle;e&&(i|=o.b2ParticleFlag.b2_destructionListenerParticle),this.SetParticleFlags(t,this.m_flagsBuffer.data[t]|i)}DestroyOldestParticle(o,t=!1){const e=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;if(!this.m_expirationTimeBuffer.data)throw new Error;const i=this.m_indexByExpirationTimeBuffer.data[e-(o+1)],s=this.m_indexByExpirationTimeBuffer.data[o];this.DestroyParticle(this.m_expirationTimeBuffer.data[i]>0?i:s,t)}DestroyParticlesInShape(o,t,e=!1){const i=ui.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked())throw new Error;const s=new ui.DestroyParticlesInShapeCallback(this,o,t,e),y=i;return o.ComputeAABB(y,t,0),this.m_world.QueryAABB(s,y),s.Destroyed()}CreateParticleGroup(o){const e=ui.CreateParticleGroup_s_transform;if(this.m_world.IsLocked())throw new Error;const i=e;i.SetPositionAngle(t(o.position,B.ZERO),t(o.angle,0));const s=this.m_count;if(o.shape&&this.CreateParticlesWithShapeForGroup(o.shape,o,i),o.shapes&&this.CreateParticlesWithShapesForGroup(o.shapes,t(o.shapeCount,o.shapes.length),o,i),o.positionData){const e=t(o.particleCount,o.positionData.length);for(let t=0;t<e;t++){const e=o.positionData[t];this.CreateParticleForGroup(o,i,e)}}const y=this.m_count;let p=new $e(this);p.m_firstIndex=s,p.m_lastIndex=y,p.m_strength=t(o.strength,1),p.m_userData=o.userData,p.m_transform.Copy(i),p.m_prev=null,p.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=p),this.m_groupList=p,++this.m_groupCount;for(let o=s;o<y;o++)this.m_groupBuffer[o]=p;this.SetGroupFlags(p,t(o.groupFlags,0));const f=new ui.ConnectionFilter;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(s,y,f),o.group&&(this.JoinParticleGroups(o.group,p),p=o.group),p}JoinParticleGroups(o,t){if(this.m_world.IsLocked())throw new Error;this.RotateBuffer(t.m_firstIndex,t.m_lastIndex,this.m_count),this.RotateBuffer(o.m_firstIndex,o.m_lastIndex,t.m_firstIndex);const e=new ui.JoinParticleGroupsFilter(t.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(o.m_firstIndex,t.m_lastIndex,e);for(let e=t.m_firstIndex;e<t.m_lastIndex;e++)this.m_groupBuffer[e]=o;const i=o.m_groupFlags|t.m_groupFlags;this.SetGroupFlags(o,i),o.m_lastIndex=t.m_lastIndex,t.m_firstIndex=t.m_lastIndex,this.DestroyParticleGroup(t)}SplitParticleGroup(o){this.UpdateContacts(!0);const t=p(o.GetParticleCount(),o=>new ui.ParticleListNode);ui.InitializeParticleLists(o,t),this.MergeParticleListsInContact(o,t);const e=ui.FindLongestParticleList(o,t);this.MergeZombieParticleListNodes(o,t,e),this.CreateParticleGroupsFromParticleList(o,t,e),this.UpdatePairsAndTriadsWithParticleList(o,t)}GetParticleGroupList(){return this.m_groupList}GetParticleGroupCount(){return this.m_groupCount}GetParticleCount(){return this.m_count}GetMaxParticleCount(){return this.m_def.maxCount}SetMaxParticleCount(o){this.m_def.maxCount=o}GetAllParticleFlags(){return this.m_allParticleFlags}GetAllGroupFlags(){return this.m_allGroupFlags}SetPaused(o){this.m_paused=o}GetPaused(){return this.m_paused}SetDensity(o){this.m_def.density=o,this.m_inverseDensity=1/this.m_def.density}GetDensity(){return this.m_def.density}SetGravityScale(o){this.m_def.gravityScale=o}GetGravityScale(){return this.m_def.gravityScale}SetDamping(o){this.m_def.dampingStrength=o}GetDamping(){return this.m_def.dampingStrength}SetStaticPressureIterations(o){this.m_def.staticPressureIterations=o}GetStaticPressureIterations(){return this.m_def.staticPressureIterations}SetRadius(o){this.m_particleDiameter=2*o,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter}GetRadius(){return this.m_particleDiameter/2}GetPositionBuffer(){if(!this.m_positionBuffer.data)throw new Error;return this.m_positionBuffer.data}GetVelocityBuffer(){if(!this.m_velocityBuffer.data)throw new Error;return this.m_velocityBuffer.data}GetColorBuffer(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data}GetGroupBuffer(){return this.m_groupBuffer}GetWeightBuffer(){return this.m_weightBuffer}GetUserDataBuffer(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data}GetFlagsBuffer(){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data}SetParticleFlags(t,e){if(!this.m_flagsBuffer.data)throw new Error;this.m_flagsBuffer.data[t]&~e&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&e&&(e&o.b2ParticleFlag.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),e&o.b2ParticleFlag.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=e),this.m_flagsBuffer.data[t]=e}GetParticleFlags(o){if(!this.m_flagsBuffer.data)throw new Error;return this.m_flagsBuffer.data[o]}SetFlagsBuffer(o,t){this.SetUserOverridableBuffer(this.m_flagsBuffer,o,t)}SetPositionBuffer(o,t){this.SetUserOverridableBuffer(this.m_positionBuffer,o,t)}SetVelocityBuffer(o,t){this.SetUserOverridableBuffer(this.m_velocityBuffer,o,t)}SetColorBuffer(o,t){this.SetUserOverridableBuffer(this.m_colorBuffer,o,t)}SetUserDataBuffer(o,t){this.SetUserOverridableBuffer(this.m_userDataBuffer,o,t)}GetContacts(){return this.m_contactBuffer.data}GetContactCount(){return this.m_contactBuffer.count}GetBodyContacts(){return this.m_bodyContactBuffer.data}GetBodyContactCount(){return this.m_bodyContactBuffer.count}GetPairs(){return this.m_pairBuffer.data}GetPairCount(){return this.m_pairBuffer.count}GetTriads(){return this.m_triadBuffer.data}GetTriadCount(){return this.m_triadBuffer.count}SetStuckThreshold(o){this.m_stuckThreshold=o,o>0&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))}GetStuckCandidates(){return this.m_stuckParticleBuffer.Data()}GetStuckCandidateCount(){return this.m_stuckParticleBuffer.GetCount()}ComputeCollisionEnergy(){if(!this.m_velocityBuffer.data)throw new Error;const o=ui.ComputeCollisionEnergy_s_v,t=this.m_velocityBuffer.data;let e=0;for(let i=0;i<this.m_contactBuffer.count;i++){const s=this.m_contactBuffer.data[i],y=s.indexA,p=s.indexB,f=s.normal,a=B.SubVV(t[p],t[y],o),n=B.DotVV(a,f);n<0&&(e+=n*n)}return.5*this.GetParticleMass()*e}SetStrictContactCheck(o){this.m_def.strictContactCheck=o}GetStrictContactCheck(){return this.m_def.strictContactCheck}SetParticleLifetime(o,t){const e=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),e){const o=this.GetParticleCount();for(let t=0;t<o;++t)this.m_indexByExpirationTimeBuffer.data[t]=t}const i=t/this.m_def.lifetimeGranularity,s=i>0?this.GetQuantizedTimeElapsed()+i:i;s!==this.m_expirationTimeBuffer.data[o]&&(this.m_expirationTimeBuffer.data[o]=s,this.m_expirationTimeBufferRequiresSorting=!0)}GetParticleLifetime(o){return this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[o])}SetDestructionByAge(o){o&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=o}GetDestructionByAge(){return this.m_def.destroyByAge}GetExpirationTimeBuffer(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data}ExpirationTimeToLifetime(o){return(o>0?o-this.GetQuantizedTimeElapsed():o)*this.m_def.lifetimeGranularity}GetIndexByExpirationTimeBuffer(){if(this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),!this.m_indexByExpirationTimeBuffer.data)throw new Error;return this.m_indexByExpirationTimeBuffer.data}ParticleApplyLinearImpulse(o,t){this.ApplyLinearImpulse(o,o+1,t)}ApplyLinearImpulse(o,t,e){if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_velocityBuffer.data,s=(t-o)*this.GetParticleMass(),y=(new B).Copy(e).SelfMul(1/s);for(let e=o;e<t;e++)i[e].SelfAdd(y)}static IsSignificantForce(o){return 0!==o.x||0!==o.y}ParticleApplyForce(o,t){if(!this.m_flagsBuffer.data)throw new Error;ui.IsSignificantForce(t)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[o])&&(this.PrepareForceBuffer(),this.m_forceBuffer[o].SelfAdd(t))}ApplyForce(o,t,e){const i=(new B).Copy(e).SelfMul(1/(t-o));if(ui.IsSignificantForce(i)){this.PrepareForceBuffer();for(let e=o;e<t;e++)this.m_forceBuffer[e].SelfAdd(i)}}GetNext(){return this.m_next}QueryAABB(o,t){if(0===this.m_proxyBuffer.count)return;const e=this.m_proxyBuffer.count,i=fi(this.m_proxyBuffer.data,0,e,ui.computeTag(this.m_inverseDiameter*t.lowerBound.x,this.m_inverseDiameter*t.lowerBound.y),ui.Proxy.CompareProxyTag),s=ai(this.m_proxyBuffer.data,i,e,ui.computeTag(this.m_inverseDiameter*t.upperBound.x,this.m_inverseDiameter*t.upperBound.y),ui.Proxy.CompareTagProxy);if(!this.m_positionBuffer.data)throw new Error;const y=this.m_positionBuffer.data;for(let e=i;e<s;++e){const i=this.m_proxyBuffer.data[e].index,s=y[i];if(t.lowerBound.x<s.x&&s.x<t.upperBound.x&&t.lowerBound.y<s.y&&s.y<t.upperBound.y&&!o.ReportParticle(this,i))break}}QueryShapeAABB(o,t,e,i=0){const s=ui.QueryShapeAABB_s_aabb;t.ComputeAABB(s,e,i),this.QueryAABB(o,s)}QueryPointAABB(o,t,e=.008){const i=ui.QueryPointAABB_s_aabb;i.lowerBound.Set(t.x-e,t.y-e),i.upperBound.Set(t.x+e,t.y+e),this.QueryAABB(o,i)}RayCast(o,t,e){const i=ui.RayCast_s_aabb,s=ui.RayCast_s_p,y=ui.RayCast_s_v,p=ui.RayCast_s_n,f=ui.RayCast_s_point;if(0===this.m_proxyBuffer.count)return;if(!this.m_positionBuffer.data)throw new Error;const a=this.m_positionBuffer.data,C=i;B.MinV(t,e,C.lowerBound),B.MaxV(t,e,C.upperBound);let r=1;const m=B.SubVV(e,t,y),l=B.DotVV(m,m),h=this.GetInsideBoundsEnumerator(C);let c;for(;(c=h.GetNext())>=0;){const e=B.SubVV(t,a[c],s),i=B.DotVV(e,m),y=i*i-l*(B.DotVV(e,e)-this.m_squaredDiameter);if(y>=0){const s=_(y);let a=(-i-s)/l;if(a>r)continue;if(a<0&&(a=(-i+s)/l,a<0||a>r))continue;const C=B.AddVMulSV(e,a,m,p);C.Normalize();const h=o.ReportParticle(this,c,B.AddVMulSV(t,a,m,f),C,a);if(r=n(r,h),r<=0)break}}}ComputeAABB(o){const t=this.GetParticleCount();if(o.lowerBound.x=1e37,o.lowerBound.y=1e37,o.upperBound.x=-1e37,o.upperBound.y=-1e37,!this.m_positionBuffer.data)throw new Error;const e=this.m_positionBuffer.data;for(let i=0;i<t;i++){const t=e[i];B.MinV(o.lowerBound,t,o.lowerBound),B.MaxV(o.upperBound,t,o.upperBound)}o.lowerBound.x-=this.m_particleDiameter,o.lowerBound.y-=this.m_particleDiameter,o.upperBound.x+=this.m_particleDiameter,o.upperBound.y+=this.m_particleDiameter}FreeBuffer(o,t){null!==o&&(o.length=0)}FreeUserOverridableBuffer(o){0===o.userSuppliedCapacity&&this.FreeBuffer(o.data,this.m_internalAllocatedCapacity)}ReallocateBuffer3(o,t,e){if(e<=t)throw new Error;const i=o?o.slice():[];return i.length=e,i}ReallocateBuffer5(o,t,e,i,s){if(i<=e)throw new Error;if(t&&!(i<=t))throw new Error;return s&&!o||t||(o=this.ReallocateBuffer3(o,e,i)),o}ReallocateBuffer4(o,t,e,i){return this.ReallocateBuffer5(o.data,o.userSuppliedCapacity,t,e,i)}RequestBuffer(o){return o||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(256),(o=[]).length=this.m_internalAllocatedCapacity),o}ReallocateHandleBuffers(o){this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,o,!0)}ReallocateInternalAllocatedBuffers(o){function t(o,t){return t&&o>t?t:o}if(o=t(o,this.m_def.maxCount),o=t(o,this.m_flagsBuffer.userSuppliedCapacity),o=t(o,this.m_positionBuffer.userSuppliedCapacity),o=t(o,this.m_velocityBuffer.userSuppliedCapacity),o=t(o,this.m_colorBuffer.userSuppliedCapacity),o=t(o,this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<o){this.ReallocateHandleBuffers(o),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,o,!1);const t=this.m_stuckThreshold>0;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,o,t),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,o,t),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,o,t),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,o,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,o,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,o,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,o,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,o,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,o,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,o,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,o,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,o,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,o,!1),this.m_internalAllocatedCapacity=o}}CreateParticleForGroup(o,e,i){const s=new He;s.flags=t(o.flags,0),M.MulXV(e,i,s.position),B.AddVV(t(o.linearVelocity,B.ZERO),B.CrossSV(t(o.angularVelocity,0),B.SubVV(s.position,t(o.position,B.ZERO),B.s_t0),B.s_t0),s.velocity),s.color.Copy(t(o.color,P.ZERO)),s.lifetime=t(o.lifetime,0),s.userData=o.userData,this.CreateParticle(s)}CreateParticlesStrokeShapeForGroup(e,i,s){const y=ui.CreateParticlesStrokeShapeForGroup_s_edge,p=ui.CreateParticlesStrokeShapeForGroup_s_d,f=ui.CreateParticlesStrokeShapeForGroup_s_p;let a=t(i.stride,0);0===a&&(a=this.GetParticleStride());let n=0;const C=e.GetChildCount();for(let t=0;t<C;t++){let C=null;e.GetType()===o.b2ShapeType.e_edgeShape?C=e:(C=y,e.GetChildEdge(C,t));const r=B.SubVV(C.m_vertex2,C.m_vertex1,p),m=r.Length();for(;n<m;){const o=B.AddVMulSV(C.m_vertex1,n/m,r,f);this.CreateParticleForGroup(i,s,o),n+=a}n-=m}}CreateParticlesFillShapeForGroup(o,e,i){const s=ui.CreateParticlesFillShapeForGroup_s_aabb,y=ui.CreateParticlesFillShapeForGroup_s_p;let p=t(e.stride,0);0===p&&(p=this.GetParticleStride());const f=M.IDENTITY,a=s;o.ComputeAABB(a,f,0);for(let t=Math.floor(a.lowerBound.y/p)*p;t<a.upperBound.y;t+=p)for(let s=Math.floor(a.lowerBound.x/p)*p;s<a.upperBound.x;s+=p){const p=y.Set(s,t);o.TestPoint(f,p)&&this.CreateParticleForGroup(e,i,p)}}CreateParticlesWithShapeForGroup(t,e,i){switch(t.GetType()){case o.b2ShapeType.e_edgeShape:case o.b2ShapeType.e_chainShape:this.CreateParticlesStrokeShapeForGroup(t,e,i);break;case o.b2ShapeType.e_polygonShape:case o.b2ShapeType.e_circleShape:this.CreateParticlesFillShapeForGroup(t,e,i)}}CreateParticlesWithShapesForGroup(o,t,e,i){const s=new ui.CompositeShape(o,t);this.CreateParticlesFillShapeForGroup(s,e,i)}CloneParticle(o,t){const e=new He;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;e.flags=this.m_flagsBuffer.data[o],e.position.Copy(this.m_positionBuffer.data[o]),e.velocity.Copy(this.m_velocityBuffer.data[o]),this.m_colorBuffer.data&&e.color.Copy(this.m_colorBuffer.data[o]),this.m_userDataBuffer.data&&(e.userData=this.m_userDataBuffer.data[o]),e.group=t;const i=this.CreateParticle(e);if(this.m_handleIndexBuffer.data){const t=this.m_handleIndexBuffer.data[o];t&&t.SetIndex(i),this.m_handleIndexBuffer.data[i]=t,this.m_handleIndexBuffer.data[o]=null}return this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[i]=this.m_lastBodyContactStepBuffer.data[o]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[i]=this.m_bodyContactCountBuffer.data[o]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[i]=this.m_consecutiveContactStepsBuffer.data[o]),this.m_hasForce&&this.m_forceBuffer[i].Copy(this.m_forceBuffer[o]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[i]=this.m_staticPressureBuffer[o]),this.m_depthBuffer&&(this.m_depthBuffer[i]=this.m_depthBuffer[o]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[i]=this.m_expirationTimeBuffer.data[o]),i}DestroyParticlesInGroup(o,t=!1){for(let e=o.m_firstIndex;e<o.m_lastIndex;e++)this.DestroyParticle(e,t)}DestroyParticleGroup(o){this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(o),this.SetGroupFlags(o,0);for(let t=o.m_firstIndex;t<o.m_lastIndex;t++)this.m_groupBuffer[t]=null;o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_groupList&&(this.m_groupList=o.m_next),--this.m_groupCount}static ParticleCanBeConnected(t,e){return 0!=(t&(o.b2ParticleFlag.b2_wallParticle|o.b2ParticleFlag.b2_springParticle|o.b2ParticleFlag.b2_elasticParticle))||null!==e&&0!=(e.GetGroupFlags()&o.b2ParticleGroupFlag.b2_rigidParticleGroup)}UpdatePairsAndTriads(t,e,i){const s=ui.UpdatePairsAndTriads_s_dab,y=ui.UpdatePairsAndTriads_s_dbc,p=ui.UpdatePairsAndTriads_s_dca;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const f=this.m_positionBuffer.data;let a=0;for(let o=t;o<e;o++)a|=this.m_flagsBuffer.data[o];if(a&ui.k_pairFlags)for(let s=0;s<this.m_contactBuffer.count;s++){const y=this.m_contactBuffer.data[s],p=y.indexA,a=y.indexB,C=this.m_flagsBuffer.data[p],r=this.m_flagsBuffer.data[a],m=this.m_groupBuffer[p],l=this.m_groupBuffer[a];if(p>=t&&p<e&&a>=t&&a<e&&!((C|r)&o.b2ParticleFlag.b2_zombieParticle)&&(C|r)&ui.k_pairFlags&&(i.IsNecessary(p)||i.IsNecessary(a))&&ui.ParticleCanBeConnected(C,m)&&ui.ParticleCanBeConnected(r,l)&&i.ShouldCreatePair(p,a)){const o=this.m_pairBuffer.data[this.m_pairBuffer.Append()];o.indexA=p,o.indexB=a,o.flags=y.flags,o.strength=n(m?m.m_strength:1,l?l.m_strength:1),o.distance=B.DistanceVV(f[p],f[a])}yi(this.m_pairBuffer.data,0,this.m_pairBuffer.count,ui.ComparePairIndices),this.m_pairBuffer.Unique(ui.MatchPairIndices)}if(a&ui.k_triadFlags){const a=new ti(e-t);for(let s=t;s<e;s++){const t=this.m_flagsBuffer.data[s],e=this.m_groupBuffer[s];t&o.b2ParticleFlag.b2_zombieParticle||!ui.ParticleCanBeConnected(t,e)||a.AddGenerator(f[s],s,i.IsNecessary(s))}const C=this.GetParticleStride();a.Generate(C/2,2*C);const r=this,m=(o,t,e)=>{if(!r.m_flagsBuffer.data)throw new Error;const a=r.m_flagsBuffer.data[o],C=r.m_flagsBuffer.data[t],m=r.m_flagsBuffer.data[e];if((a|C|m)&ui.k_triadFlags&&i.ShouldCreateTriad(o,t,e)){const i=f[o],l=f[t],h=f[e],_=B.SubVV(i,l,s),c=B.SubVV(l,h,y),u=B.SubVV(h,i,p),d=4*r.m_squaredDiameter;if(B.DotVV(_,_)>d||B.DotVV(c,c)>d||B.DotVV(u,u)>d)return;const g=r.m_groupBuffer[o],x=r.m_groupBuffer[t],b=r.m_groupBuffer[e],v=r.m_triadBuffer.data[r.m_triadBuffer.Append()];v.indexA=o,v.indexB=t,v.indexC=e,v.flags=a|C|m,v.strength=n(n(g?g.m_strength:1,x?x.m_strength:1),b?b.m_strength:1);const S=(i.x+l.x+h.x)/3,A=(i.y+l.y+h.y)/3;v.pa.x=i.x-S,v.pa.y=i.y-A,v.pb.x=l.x-S,v.pb.y=l.y-A,v.pc.x=h.x-S,v.pc.y=h.y-A,v.ka=-B.DotVV(u,_),v.kb=-B.DotVV(_,c),v.kc=-B.DotVV(c,u),v.s=B.CrossVV(i,l)+B.CrossVV(l,h)+B.CrossVV(h,i)}};a.GetNodes(m),yi(this.m_triadBuffer.data,0,this.m_triadBuffer.count,ui.CompareTriadIndices),this.m_triadBuffer.Unique(ui.MatchTriadIndices)}}UpdatePairsAndTriadsWithReactiveParticles(){const t=new ui.ReactiveFilter(this.m_flagsBuffer);if(this.UpdatePairsAndTriads(0,this.m_count,t),!this.m_flagsBuffer.data)throw new Error;for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&=~o.b2ParticleFlag.b2_reactiveParticle;this.m_allParticleFlags&=~o.b2ParticleFlag.b2_reactiveParticle}static ComparePairIndices(o,t){const e=o.indexA-t.indexA;return 0!==e?e<0:o.indexB<t.indexB}static MatchPairIndices(o,t){return o.indexA===t.indexA&&o.indexB===t.indexB}static CompareTriadIndices(o,t){const e=o.indexA-t.indexA;if(0!==e)return e<0;const i=o.indexB-t.indexB;return 0!==i?i<0:o.indexC<t.indexC}static MatchTriadIndices(o,t){return o.indexA===t.indexA&&o.indexB===t.indexB&&o.indexC===t.indexC}static InitializeParticleLists(o,t){const e=o.GetBufferIndex(),i=o.GetParticleCount();for(let o=0;o<i;o++){const i=t[o];i.list=i,i.next=null,i.count=1,i.index=o+e}}MergeParticleListsInContact(o,t){const e=o.GetBufferIndex();for(let i=0;i<this.m_contactBuffer.count;i++){const s=this.m_contactBuffer.data[i],y=s.indexA,p=s.indexB;if(!o.ContainsParticle(y)||!o.ContainsParticle(p))continue;let f=t[y-e].list,a=t[p-e].list;if(f!==a){if(f.count<a.count){const o=f;f=a,a=o}ui.MergeParticleLists(f,a)}}}static MergeParticleLists(o,t){for(let e=t;;){e.list=o;const t=e.next;if(!t){e.next=o.next;break}e=t}o.next=t,o.count+=t.count,t.count=0}static FindLongestParticleList(o,t){const e=o.GetParticleCount();let i=t[0];for(let o=0;o<e;o++){const e=t[o];i.count<e.count&&(i=e)}return i}MergeZombieParticleListNodes(t,e,i){if(!this.m_flagsBuffer.data)throw new Error;const s=t.GetParticleCount();for(let t=0;t<s;t++){const s=e[t];s!==i&&this.m_flagsBuffer.data[s.index]&o.b2ParticleFlag.b2_zombieParticle&&ui.MergeParticleListAndNode(i,s)}}static MergeParticleListAndNode(o,t){t.list=o,t.next=o.next,o.next=t,o.count++,t.count=0}CreateParticleGroupsFromParticleList(t,e,i){if(!this.m_flagsBuffer.data)throw new Error;const s=t.GetParticleCount(),y=new Ke;y.groupFlags=t.GetGroupFlags(),y.userData=t.GetUserData();for(let t=0;t<s;t++){const s=e[t];if(!s.count||s===i)continue;const p=this.CreateParticleGroup(y);for(let t=s;t;t=t.next){const e=t.index,i=this.CloneParticle(e,p);this.m_flagsBuffer.data[e]|=o.b2ParticleFlag.b2_zombieParticle,t.index=i}}}UpdatePairsAndTriadsWithParticleList(o,t){const e=o.GetBufferIndex();for(let i=0;i<this.m_pairBuffer.count;i++){const s=this.m_pairBuffer.data[i],y=s.indexA,p=s.indexB;o.ContainsParticle(y)&&(s.indexA=t[y-e].index),o.ContainsParticle(p)&&(s.indexB=t[p-e].index)}for(let i=0;i<this.m_triadBuffer.count;i++){const s=this.m_triadBuffer.data[i],y=s.indexA,p=s.indexB,f=s.indexC;o.ContainsParticle(y)&&(s.indexA=t[y-e].index),o.ContainsParticle(p)&&(s.indexB=t[p-e].index),o.ContainsParticle(f)&&(s.indexC=t[f-e].index)}}ComputeDepth(){const t=[];let e=0;for(let i=0;i<this.m_contactBuffer.count;i++){const s=this.m_contactBuffer.data[i],y=s.indexA,p=s.indexB,f=this.m_groupBuffer[y],a=this.m_groupBuffer[p];f&&f===a&&f.m_groupFlags&o.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&(t[e++]=s)}const i=[];let s=0;for(let t=this.m_groupList;t;t=t.GetNext())if(t.m_groupFlags&o.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth){i[s++]=t,this.SetGroupFlags(t,t.m_groupFlags&~o.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth);for(let o=t.m_firstIndex;o<t.m_lastIndex;o++)this.m_accumulationBuffer[o]=0}for(let o=0;o<e;o++){const e=t[o],i=e.indexA,s=e.indexB,y=e.weight;this.m_accumulationBuffer[i]+=y,this.m_accumulationBuffer[s]+=y}for(let o=0;o<s;o++){const t=i[o];for(let o=t.m_firstIndex;o<t.m_lastIndex;o++){const t=this.m_accumulationBuffer[o];this.m_depthBuffer[o]=t<.8?0:1e37}}const y=_(this.m_count)>>0;for(let o=0;o<y;o++){let o=!1;for(let i=0;i<e;i++){const e=t[i],s=e.indexA,y=e.indexB,p=1-e.weight,f=this.m_depthBuffer[s],a=this.m_depthBuffer[y],n=a+p,C=f+p;f>n&&(this.m_depthBuffer[s]=n,o=!0),a>C&&(this.m_depthBuffer[y]=C,o=!0)}if(!o)break}for(let o=0;o<s;o++){const t=i[o];for(let o=t.m_firstIndex;o<t.m_lastIndex;o++)this.m_depthBuffer[o]<1e37?this.m_depthBuffer[o]*=this.m_particleDiameter:this.m_depthBuffer[o]=0}}GetInsideBoundsEnumerator(o){const t=ui.computeTag(this.m_inverseDiameter*o.lowerBound.x-1,this.m_inverseDiameter*o.lowerBound.y-1),e=ui.computeTag(this.m_inverseDiameter*o.upperBound.x+1,this.m_inverseDiameter*o.upperBound.y+1),i=this.m_proxyBuffer.count,s=fi(this.m_proxyBuffer.data,0,i,t,ui.Proxy.CompareProxyTag),y=ai(this.m_proxyBuffer.data,0,i,e,ui.Proxy.CompareTagProxy);return new ui.InsideBoundsEnumerator(this,t,e,s,y)}UpdateAllParticleFlags(){if(!this.m_flagsBuffer.data)throw new Error;this.m_allParticleFlags=0;for(let o=0;o<this.m_count;o++)this.m_allParticleFlags|=this.m_flagsBuffer.data[o];this.m_needsUpdateAllParticleFlags=!1}UpdateAllGroupFlags(){this.m_allGroupFlags=0;for(let o=this.m_groupList;o;o=o.GetNext())this.m_allGroupFlags|=o.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1}AddContact(o,t,e){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;const i=ui.AddContact_s_d,s=this.m_positionBuffer.data,y=B.SubVV(s[t],s[o],i),p=B.DotVV(y,y);if(p<this.m_squaredDiameter){let e=h(p);isFinite(e)||(e=198177537e11);const i=this.m_contactBuffer.data[this.m_contactBuffer.Append()];i.indexA=o,i.indexB=t,i.flags=this.m_flagsBuffer.data[o]|this.m_flagsBuffer.data[t],i.weight=1-p*e*this.m_inverseDiameter,B.MulSV(e,y,i.normal)}}FindContacts_Reference(o){const t=this.m_proxyBuffer.count;this.m_contactBuffer.count=0;for(let o=0,e=0;o<t;o++){const i=ui.computeRelativeTag(this.m_proxyBuffer.data[o].tag,1,0);for(let e=o+1;e<t&&!(i<this.m_proxyBuffer.data[e].tag);e++)this.AddContact(this.m_proxyBuffer.data[o].index,this.m_proxyBuffer.data[e].index,this.m_contactBuffer);const s=ui.computeRelativeTag(this.m_proxyBuffer.data[o].tag,-1,1);for(;e<t&&!(s<=this.m_proxyBuffer.data[e].tag);e++);const y=ui.computeRelativeTag(this.m_proxyBuffer.data[o].tag,1,1);for(let i=e;i<t&&!(y<this.m_proxyBuffer.data[i].tag);i++)this.AddContact(this.m_proxyBuffer.data[o].index,this.m_proxyBuffer.data[i].index,this.m_contactBuffer)}}FindContacts(o){this.FindContacts_Reference(o)}UpdateProxies_Reference(o){if(!this.m_positionBuffer.data)throw new Error;const t=this.m_positionBuffer.data,e=this.m_inverseDiameter;for(let o=0;o<this.m_proxyBuffer.count;++o){const i=this.m_proxyBuffer.data[o],s=t[i.index];i.tag=ui.computeTag(e*s.x,e*s.y)}}UpdateProxies(o){this.UpdateProxies_Reference(o)}SortProxies(o){si(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,ui.Proxy.CompareProxyProxy)}FilterContacts(t){const e=this.GetParticleContactFilter();if(null===e)return;const i=this;this.m_contactBuffer.RemoveIf(t=>0!=(t.flags&o.b2ParticleFlag.b2_particleContactFilterParticle)&&!e.ShouldCollideParticleParticle(i,t.indexA,t.indexB))}NotifyContactListenerPreContact(o){if(null!==this.GetParticleContactListener())throw o.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error}NotifyContactListenerPostContact(o){const t=this.GetParticleContactListener();if(null!==t){for(let o=0;o<this.m_contactBuffer.count;++o){const e=this.m_contactBuffer.data[o];t.BeginContactParticleParticle(this,e)}throw new Error}}static b2ParticleContactIsZombie(t){return(t.flags&o.b2ParticleFlag.b2_zombieParticle)===o.b2ParticleFlag.b2_zombieParticle}UpdateContacts(o){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);const t=new ui.b2ParticlePairSet;this.NotifyContactListenerPreContact(t),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(t),o&&this.m_contactBuffer.RemoveIf(ui.b2ParticleContactIsZombie)}NotifyBodyContactListenerPreContact(o){if(null!==this.GetFixtureContactListener())throw o.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error}NotifyBodyContactListenerPostContact(o){const t=this.GetFixtureContactListener();if(null!==t){for(let o=0;o<this.m_bodyContactBuffer.count;o++){const e=this.m_bodyContactBuffer.data[o];t.BeginContactFixtureParticle(this,e)}throw new Error}}UpdateBodyContacts(){const o=ui.UpdateBodyContacts_s_aabb,t=new ui.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(t),this.m_stuckThreshold>0){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;const o=this.GetParticleCount();for(let t=0;t<o;t++)this.m_bodyContactCountBuffer.data[t]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[t]+1&&(this.m_consecutiveContactStepsBuffer.data[t]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);const e=o;this.ComputeAABB(e);const i=new ui.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(i,e),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(t)}Solve(t){const e=ui.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(t),this.m_allParticleFlags&o.b2ParticleFlag.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<t.particleIterations;this.m_iterationIndex++){++this.m_timestamp;const i=e.Copy(t);if(i.dt/=t.particleIterations,i.inv_dt*=t.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&o.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&o.b2ParticleFlag.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&o.b2ParticleFlag.b2_repulsiveParticle&&this.SolveRepulsive(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_powderParticle&&this.SolvePowder(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_tensileParticle&&this.SolveTensile(i),this.m_allGroupFlags&o.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SolveSolid(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_staticPressureParticle&&this.SolveStaticPressure(i),this.SolvePressure(i),this.SolveDamping(i),this.m_allParticleFlags&ui.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&o.b2ParticleFlag.b2_elasticParticle&&this.SolveElastic(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_springParticle&&this.SolveSpring(i),this.LimitVelocity(i),this.m_allGroupFlags&o.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&o.b2ParticleFlag.b2_barrierParticle&&this.SolveBarrier(i),this.SolveCollision(i),this.m_allGroupFlags&o.b2ParticleGroupFlag.b2_rigidParticleGroup&&this.SolveRigid(i),this.m_allParticleFlags&o.b2ParticleFlag.b2_wallParticle&&this.SolveWall(),!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;for(let o=0;o<this.m_count;o++)this.m_positionBuffer.data[o].SelfMulAdd(i.dt,this.m_velocityBuffer.data[o])}}SolveCollision(o){const t=ui.SolveCollision_s_aabb;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const e=this.m_positionBuffer.data,i=this.m_velocityBuffer.data,s=t;s.lowerBound.x=1e37,s.lowerBound.y=1e37,s.upperBound.x=-1e37,s.upperBound.y=-1e37;for(let t=0;t<this.m_count;t++){const y=i[t],p=e[t],f=p.x+o.dt*y.x,a=p.y+o.dt*y.y;s.lowerBound.x=n(s.lowerBound.x,n(p.x,f)),s.lowerBound.y=n(s.lowerBound.y,n(p.y,a)),s.upperBound.x=C(s.upperBound.x,C(p.x,f)),s.upperBound.y=C(s.upperBound.y,C(p.y,a))}const y=new ui.SolveCollisionCallback(this,o);this.m_world.QueryAABB(y,s)}LimitVelocity(o){if(!this.m_velocityBuffer.data)throw new Error;const t=this.m_velocityBuffer.data,e=this.GetCriticalVelocitySquared(o);for(let o=0;o<this.m_count;o++){const i=t[o],s=B.DotVV(i,i);s>e&&i.SelfMul(_(e/s))}}SolveGravity(o){if(!this.m_velocityBuffer.data)throw new Error;const t=ui.SolveGravity_s_gravity,e=this.m_velocityBuffer.data,i=B.MulSV(o.dt*this.m_def.gravityScale,this.m_world.GetGravity(),t);for(let o=0;o<this.m_count;o++)e[o].SelfAdd(i)}SolveBarrier(t){const e=ui.SolveBarrier_s_aabb,i=ui.SolveBarrier_s_va,s=ui.SolveBarrier_s_vb,y=ui.SolveBarrier_s_pba,p=ui.SolveBarrier_s_vba,f=ui.SolveBarrier_s_vc,a=ui.SolveBarrier_s_pca,n=ui.SolveBarrier_s_vca,C=ui.SolveBarrier_s_qba,r=ui.SolveBarrier_s_qca,m=ui.SolveBarrier_s_dv,l=ui.SolveBarrier_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const h=this.m_positionBuffer.data,c=this.m_velocityBuffer.data;for(let o=0;o<this.m_count;o++)0!=(this.m_flagsBuffer.data[o]&ui.k_barrierWallFlags)&&c[o].SetZero();const u=2.5*t.dt,d=this.GetParticleMass();for(let g=0;g<this.m_pairBuffer.count;g++){const x=this.m_pairBuffer.data[g];if(x.flags&o.b2ParticleFlag.b2_barrierParticle){const o=x.indexA,g=x.indexB,b=h[o],v=h[g],S=e;B.MinV(b,v,S.lowerBound),B.MaxV(b,v,S.upperBound);const A=this.m_groupBuffer[o],w=this.m_groupBuffer[g],V=this.GetLinearVelocity(A,o,b,i),M=this.GetLinearVelocity(w,g,v,s),I=B.SubVV(v,b,y),P=B.SubVV(M,V,p),G=this.GetInsideBoundsEnumerator(S);let D;for(;(D=G.GetNext())>=0;){const o=h[D],e=this.m_groupBuffer[D];if(A!==e&&w!==e){const i=this.GetLinearVelocity(e,D,o,f),s=B.SubVV(o,b,a),y=B.SubVV(i,V,n),p=B.CrossVV(P,y),h=B.CrossVV(I,y)-B.CrossVV(s,P),g=B.CrossVV(I,s);let x,v;const S=C,A=r;if(0===p){if(0===h)continue;if(v=-g/h,!(v>=0&&v<u))continue;if(B.AddVMulSV(I,v,P,S),B.AddVMulSV(s,v,y,A),x=B.DotVV(S,A)/B.DotVV(S,S),!(x>=0&&x<=1))continue}else{const o=h*h-4*g*p;if(o<0)continue;const t=_(o);let e=(-h-t)/(2*p),i=(-h+t)/(2*p);if(e>i){const o=e;e=i,i=o}if(v=e,B.AddVMulSV(I,v,P,S),B.AddVMulSV(s,v,y,A),x=B.DotVV(S,A)/B.DotVV(S,S),!(v>=0&&v<u&&x>=0&&x<=1)){if(v=i,!(v>=0&&v<u))continue;if(B.AddVMulSV(I,v,P,S),B.AddVMulSV(s,v,y,A),x=B.DotVV(S,A)/B.DotVV(S,S),!(x>=0&&x<=1))continue}}const w=m;w.x=V.x+x*P.x-i.x,w.y=V.y+x*P.y-i.y;const M=B.MulSV(d,w,l);if(e&&this.IsRigidGroup(e)){const t=e.GetMass(),i=e.GetInertia();t>0&&e.m_linearVelocity.SelfMulAdd(1/t,M),i>0&&(e.m_angularVelocity+=B.CrossVV(B.SubVV(o,e.GetCenter(),B.s_t0),M)/i)}else c[D].SelfAdd(w);this.ParticleApplyForce(D,M.SelfMul(-t.inv_dt))}}}}}SolveStaticPressure(t){if(!this.m_flagsBuffer.data)throw new Error;this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);const e=this.GetCriticalPressure(t),i=this.m_def.staticPressureStrength*e,s=.25*e,y=this.m_def.staticPressureRelaxation;for(let t=0;t<this.m_def.staticPressureIterations;t++){for(let o=0;o<this.m_count;o++)this.m_accumulationBuffer[o]=0;for(let t=0;t<this.m_contactBuffer.count;t++){const e=this.m_contactBuffer.data[t];if(e.flags&o.b2ParticleFlag.b2_staticPressureParticle){const o=e.indexA,t=e.indexB,i=e.weight;this.m_accumulationBuffer[o]+=i*this.m_staticPressureBuffer[t],this.m_accumulationBuffer[t]+=i*this.m_staticPressureBuffer[o]}}for(let t=0;t<this.m_count;t++){const e=this.m_weightBuffer[t];if(this.m_flagsBuffer.data[t]&o.b2ParticleFlag.b2_staticPressureParticle){const o=(this.m_accumulationBuffer[t]+i*(e-1))/(e+y);this.m_staticPressureBuffer[t]=r(o,0,s)}else this.m_staticPressureBuffer[t]=0}}}ComputeWeight(){for(let o=0;o<this.m_count;o++)this.m_weightBuffer[o]=0;for(let o=0;o<this.m_bodyContactBuffer.count;o++){const t=this.m_bodyContactBuffer.data[o],e=t.index,i=t.weight;this.m_weightBuffer[e]+=i}for(let o=0;o<this.m_contactBuffer.count;o++){const t=this.m_contactBuffer.data[o],e=t.indexA,i=t.indexB,s=t.weight;this.m_weightBuffer[e]+=s,this.m_weightBuffer[i]+=s}}SolvePressure(t){const e=ui.SolvePressure_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_positionBuffer.data,s=this.m_velocityBuffer.data,y=this.GetCriticalPressure(t),p=this.m_def.pressureStrength*y,f=.25*y;for(let o=0;o<this.m_count;o++){const t=this.m_weightBuffer[o],e=p*C(0,t-1);this.m_accumulationBuffer[o]=n(e,f)}if(this.m_allParticleFlags&ui.k_noPressureFlags)for(let o=0;o<this.m_count;o++)this.m_flagsBuffer.data[o]&ui.k_noPressureFlags&&(this.m_accumulationBuffer[o]=0);if(this.m_allParticleFlags&o.b2ParticleFlag.b2_staticPressureParticle)for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&o.b2ParticleFlag.b2_staticPressureParticle&&(this.m_accumulationBuffer[t]+=this.m_staticPressureBuffer[t]);const a=t.dt/(this.m_def.density*this.m_particleDiameter),r=this.GetParticleInvMass();for(let o=0;o<this.m_bodyContactBuffer.count;o++){const t=this.m_bodyContactBuffer.data[o],y=t.index,f=t.body,n=t.weight,C=t.mass,m=t.normal,l=i[y],h=this.m_accumulationBuffer[y]+p*n,_=B.MulSV(a*n*C*h,m,e);s[y].SelfMulSub(r,_),f.ApplyLinearImpulse(_,l,!0)}for(let o=0;o<this.m_contactBuffer.count;o++){const t=this.m_contactBuffer.data[o],i=t.indexA,y=t.indexB,p=t.weight,f=t.normal,n=this.m_accumulationBuffer[i]+this.m_accumulationBuffer[y],C=B.MulSV(a*p*n,f,e);s[i].SelfSub(C),s[y].SelfAdd(C)}}SolveDamping(o){const t=ui.SolveDamping_s_v,e=ui.SolveDamping_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_positionBuffer.data,s=this.m_velocityBuffer.data,y=this.m_def.dampingStrength,p=1/this.GetCriticalVelocity(o),f=this.GetParticleInvMass();for(let o=0;o<this.m_bodyContactBuffer.count;o++){const a=this.m_bodyContactBuffer.data[o],r=a.index,m=a.body,l=a.weight,h=a.mass,_=a.normal,c=i[r],u=B.SubVV(m.GetLinearVelocityFromWorldPoint(c,B.s_t0),s[r],t),d=B.DotVV(u,_);if(d<0){const o=C(y*l,n(-p*d,.5)),t=B.MulSV(o*h*d,_,e);s[r].SelfMulAdd(f,t),m.ApplyLinearImpulse(t.SelfNeg(),c,!0)}}for(let o=0;o<this.m_contactBuffer.count;o++){const i=this.m_contactBuffer.data[o],f=i.indexA,a=i.indexB,r=i.weight,m=i.normal,l=B.SubVV(s[a],s[f],t),h=B.DotVV(l,m);if(h<0){const o=C(y*r,n(-p*h,.5)),t=B.MulSV(o*h,m,e);s[f].SelfAdd(t),s[a].SelfSub(t)}}}SolveRigidDamping(){const o=ui.SolveRigidDamping_s_t0,t=ui.SolveRigidDamping_s_t1,e=ui.SolveRigidDamping_s_p,i=ui.SolveRigidDamping_s_v,s=[0],y=[0],p=[0],f=[0],a=[0],C=[0];if(!this.m_positionBuffer.data)throw new Error;const r=this.m_positionBuffer.data,m=this.m_def.dampingStrength;for(let e=0;e<this.m_bodyContactBuffer.count;e++){const l=this.m_bodyContactBuffer.data[e],h=l.index,_=this.m_groupBuffer[h];if(_&&this.IsRigidGroup(_)){const e=l.body,c=l.normal,u=l.weight,d=r[h],g=B.SubVV(e.GetLinearVelocityFromWorldPoint(d,o),_.GetLinearVelocityFromWorldPoint(d,t),i),x=B.DotVV(g,c);if(x<0){this.InitDampingParameterWithRigidGroupOrParticle(s,y,p,!0,_,h,d,c),this.InitDampingParameter(f,a,C,e.GetMass(),e.GetInertia()-e.GetMass()*e.GetLocalCenter().LengthSquared(),e.GetWorldCenter(),d,c);const o=m*n(u,1)*this.ComputeDampingImpulse(s[0],y[0],p[0],f[0],a[0],C[0],x);this.ApplyDamping(s[0],y[0],p[0],!0,_,h,o,c),e.ApplyLinearImpulse(B.MulSV(-o,c,B.s_t0),d,!0)}}}for(let n=0;n<this.m_contactBuffer.count;n++){const l=this.m_contactBuffer.data[n],h=l.indexA,_=l.indexB,c=l.normal,u=l.weight,d=this.m_groupBuffer[h],g=this.m_groupBuffer[_],x=this.IsRigidGroup(d),b=this.IsRigidGroup(g);if(d!==g&&(x||b)){const n=B.MidVV(r[h],r[_],e),l=B.SubVV(this.GetLinearVelocity(g,_,n,o),this.GetLinearVelocity(d,h,n,t),i),v=B.DotVV(l,c);if(v<0){this.InitDampingParameterWithRigidGroupOrParticle(s,y,p,x,d,h,n,c),this.InitDampingParameterWithRigidGroupOrParticle(f,a,C,b,g,_,n,c);const o=m*u*this.ComputeDampingImpulse(s[0],y[0],p[0],f[0],a[0],C[0],v);this.ApplyDamping(s[0],y[0],p[0],x,d,h,o,c),this.ApplyDamping(f[0],a[0],C[0],b,g,_,-o,c)}}}}SolveExtraDamping(){const o=ui.SolveExtraDamping_s_v,t=ui.SolveExtraDamping_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const e=this.m_velocityBuffer.data,i=this.m_positionBuffer.data,s=this.GetParticleInvMass();for(let y=0;y<this.m_bodyContactBuffer.count;y++){const p=this.m_bodyContactBuffer.data[y],f=p.index;if(this.m_flagsBuffer.data[f]&ui.k_extraDampingFlags){const y=p.body,a=p.mass,n=p.normal,C=i[f],r=B.SubVV(y.GetLinearVelocityFromWorldPoint(C,B.s_t0),e[f],o),m=B.DotVV(r,n);if(m<0){const o=B.MulSV(.5*a*m,n,t);e[f].SelfMulAdd(s,o),y.ApplyLinearImpulse(o.SelfNeg(),C,!0)}}}}SolveWall(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const t=this.m_velocityBuffer.data;for(let e=0;e<this.m_count;e++)this.m_flagsBuffer.data[e]&o.b2ParticleFlag.b2_wallParticle&&t[e].SetZero()}SolveRigid(t){const e=ui.SolveRigid_s_position,i=ui.SolveRigid_s_rotation,s=ui.SolveRigid_s_transform,y=ui.SolveRigid_s_velocityTransform;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const p=this.m_positionBuffer.data,f=this.m_velocityBuffer.data;for(let a=this.m_groupList;a;a=a.GetNext())if(a.m_groupFlags&o.b2ParticleGroupFlag.b2_rigidParticleGroup){a.UpdateStatistics();const o=i;o.SetAngle(t.dt*a.m_angularVelocity);const n=B.AddVV(a.m_center,B.SubVV(B.MulSV(t.dt,a.m_linearVelocity,B.s_t0),V.MulRV(o,a.m_center,B.s_t1),B.s_t0),e),C=s;C.SetPositionRotation(n,o),M.MulXX(C,a.m_transform,a.m_transform);const r=y;r.p.x=t.inv_dt*C.p.x,r.p.y=t.inv_dt*C.p.y,r.q.s=t.inv_dt*C.q.s,r.q.c=t.inv_dt*(C.q.c-1);for(let o=a.m_firstIndex;o<a.m_lastIndex;o++)M.MulXV(r,p[o],f[o])}}SolveElastic(t){const e=ui.SolveElastic_s_pa,i=ui.SolveElastic_s_pb,s=ui.SolveElastic_s_pc,y=ui.SolveElastic_s_r,p=ui.SolveElastic_s_t0;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const f=this.m_positionBuffer.data,a=this.m_velocityBuffer.data,n=t.inv_dt*this.m_def.elasticStrength;for(let C=0;C<this.m_triadBuffer.count;C++){const r=this.m_triadBuffer.data[C];if(r.flags&o.b2ParticleFlag.b2_elasticParticle){const o=r.indexA,C=r.indexB,m=r.indexC,l=r.pa,_=r.pb,c=r.pc,u=e.Copy(f[o]),d=i.Copy(f[C]),g=s.Copy(f[m]),x=a[o],b=a[C],v=a[m];u.SelfMulAdd(t.dt,x),d.SelfMulAdd(t.dt,b),g.SelfMulAdd(t.dt,v);const S=(u.x+d.x+g.x)/3,A=(u.y+d.y+g.y)/3;u.x-=S,u.y-=A,d.x-=S,d.y-=A,g.x-=S,g.y-=A;const w=y;w.s=B.CrossVV(l,u)+B.CrossVV(_,d)+B.CrossVV(c,g),w.c=B.DotVV(l,u)+B.DotVV(_,d)+B.DotVV(c,g);let M=h(w.s*w.s+w.c*w.c);isFinite(M)||(M=198177537e11),w.s*=M,w.c*=M;const I=n*r.strength;V.MulRV(w,l,p),B.SubVV(p,u,p),B.MulSV(I,p,p),x.SelfAdd(p),V.MulRV(w,_,p),B.SubVV(p,d,p),B.MulSV(I,p,p),b.SelfAdd(p),V.MulRV(w,c,p),B.SubVV(p,g,p),B.MulSV(I,p,p),v.SelfAdd(p)}}}SolveSpring(t){const e=ui.SolveSpring_s_pa,i=ui.SolveSpring_s_pb,s=ui.SolveSpring_s_d,y=ui.SolveSpring_s_f;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const p=this.m_positionBuffer.data,f=this.m_velocityBuffer.data,a=t.inv_dt*this.m_def.springStrength;for(let n=0;n<this.m_pairBuffer.count;n++){const C=this.m_pairBuffer.data[n];if(C.flags&o.b2ParticleFlag.b2_springParticle){const o=C.indexA,n=C.indexB,r=e.Copy(p[o]),m=i.Copy(p[n]),l=f[o],h=f[n];r.SelfMulAdd(t.dt,l),m.SelfMulAdd(t.dt,h);const _=B.SubVV(m,r,s),c=C.distance,u=_.Length(),d=a*C.strength,g=B.MulSV(d*(c-u)/u,_,y);l.SelfSub(g),h.SelfAdd(g)}}}SolveTensile(t){const e=ui.SolveTensile_s_weightedNormal,i=ui.SolveTensile_s_s,s=ui.SolveTensile_s_f;if(!this.m_velocityBuffer.data)throw new Error;const y=this.m_velocityBuffer.data;for(let o=0;o<this.m_count;o++)this.m_accumulation2Buffer[o]=new B,this.m_accumulation2Buffer[o].SetZero();for(let t=0;t<this.m_contactBuffer.count;t++){const i=this.m_contactBuffer.data[t];if(i.flags&o.b2ParticleFlag.b2_tensileParticle){const o=i.indexA,t=i.indexB,s=i.weight,y=i.normal,p=B.MulSV((1-s)*s,y,e);this.m_accumulation2Buffer[o].SelfSub(p),this.m_accumulation2Buffer[t].SelfAdd(p)}}const p=this.GetCriticalVelocity(t),f=this.m_def.surfaceTensionPressureStrength*p,a=this.m_def.surfaceTensionNormalStrength*p,C=.5*p;for(let t=0;t<this.m_contactBuffer.count;t++){const e=this.m_contactBuffer.data[t];if(e.flags&o.b2ParticleFlag.b2_tensileParticle){const o=e.indexA,t=e.indexB,p=e.weight,r=e.normal,m=this.m_weightBuffer[o]+this.m_weightBuffer[t],l=B.SubVV(this.m_accumulation2Buffer[t],this.m_accumulation2Buffer[o],i),h=n(f*(m-2)+a*B.DotVV(l,r),C)*p,_=B.MulSV(h,r,s);y[o].SelfSub(_),y[t].SelfAdd(_)}}}SolveViscous(){const t=ui.SolveViscous_s_v,e=ui.SolveViscous_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_positionBuffer.data,s=this.m_velocityBuffer.data,y=this.m_def.viscousStrength,p=this.GetParticleInvMass();for(let f=0;f<this.m_bodyContactBuffer.count;f++){const a=this.m_bodyContactBuffer.data[f],n=a.index;if(this.m_flagsBuffer.data[n]&o.b2ParticleFlag.b2_viscousParticle){const o=a.body,f=a.weight,C=a.mass,r=i[n],m=B.SubVV(o.GetLinearVelocityFromWorldPoint(r,B.s_t0),s[n],t),l=B.MulSV(y*C*f,m,e);s[n].SelfMulAdd(p,l),o.ApplyLinearImpulse(l.SelfNeg(),r,!0)}}for(let i=0;i<this.m_contactBuffer.count;i++){const p=this.m_contactBuffer.data[i];if(p.flags&o.b2ParticleFlag.b2_viscousParticle){const o=p.indexA,i=p.indexB,f=p.weight,a=B.SubVV(s[i],s[o],t),n=B.MulSV(y*f,a,e);s[o].SelfAdd(n),s[i].SelfSub(n)}}}SolveRepulsive(t){const e=ui.SolveRepulsive_s_f;if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_velocityBuffer.data,s=this.m_def.repulsiveStrength*this.GetCriticalVelocity(t);for(let t=0;t<this.m_contactBuffer.count;t++){const y=this.m_contactBuffer.data[t];if(y.flags&o.b2ParticleFlag.b2_repulsiveParticle){const o=y.indexA,t=y.indexB;if(this.m_groupBuffer[o]!==this.m_groupBuffer[t]){const p=y.weight,f=y.normal,a=B.MulSV(s*p,f,e);i[o].SelfSub(a),i[t].SelfAdd(a)}}}}SolvePowder(t){const e=ui.SolvePowder_s_f;if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;const i=this.m_positionBuffer.data,s=this.m_velocityBuffer.data,y=this.m_def.powderStrength*this.GetCriticalVelocity(t),p=this.GetParticleInvMass();for(let t=0;t<this.m_bodyContactBuffer.count;t++){const f=this.m_bodyContactBuffer.data[t],a=f.index;if(this.m_flagsBuffer.data[a]&o.b2ParticleFlag.b2_powderParticle){const o=f.weight;if(o>.25){const t=f.body,n=f.mass,C=i[a],r=f.normal,m=B.MulSV(y*n*(o-.25),r,e);s[a].SelfMulSub(p,m),t.ApplyLinearImpulse(m,C,!0)}}}for(let t=0;t<this.m_contactBuffer.count;t++){const i=this.m_contactBuffer.data[t];if(i.flags&o.b2ParticleFlag.b2_powderParticle){const o=i.weight;if(o>.25){const t=i.indexA,p=i.indexB,f=i.normal,a=B.MulSV(y*(o-.25),f,e);s[t].SelfSub(a),s[p].SelfAdd(a)}}}}SolveSolid(o){const t=ui.SolveSolid_s_f;if(!this.m_velocityBuffer.data)throw new Error;const e=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);const i=o.inv_dt*this.m_def.ejectionStrength;for(let o=0;o<this.m_contactBuffer.count;o++){const s=this.m_contactBuffer.data[o],y=s.indexA,p=s.indexB;if(this.m_groupBuffer[y]!==this.m_groupBuffer[p]){const o=s.weight,f=s.normal,a=this.m_depthBuffer[y]+this.m_depthBuffer[p],n=B.MulSV(i*a*o,f,t);e[y].SelfSub(n),e[p].SelfAdd(n)}}}SolveForce(o){if(!this.m_velocityBuffer.data)throw new Error;const t=this.m_velocityBuffer.data,e=o.dt*this.GetParticleInvMass();for(let o=0;o<this.m_count;o++)t[o].SelfMulAdd(e,this.m_forceBuffer[o]);this.m_hasForce=!1}SolveColorMixing(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_colorBuffer.data)throw new Error;const t=.5*this.m_def.colorMixingStrength;if(t)for(let e=0;e<this.m_contactBuffer.count;e++){const i=this.m_contactBuffer.data[e],s=i.indexA,y=i.indexB;if(this.m_flagsBuffer.data[s]&this.m_flagsBuffer.data[y]&o.b2ParticleFlag.b2_colorMixingParticle){const o=this.m_colorBuffer.data[s],e=this.m_colorBuffer.data[y];P.MixColors(o,e,t)}}}SolveZombie(){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;let t=0;const e=[];for(let o=0;o<this.m_count;o++)e[o]=-1;let i=0;for(let s=0;s<this.m_count;s++){const y=this.m_flagsBuffer.data[s];if(y&o.b2ParticleFlag.b2_zombieParticle){const t=this.m_world.m_destructionListener;if(y&o.b2ParticleFlag.b2_destructionListenerParticle&&t&&t.SayGoodbyeParticle(this,s),this.m_handleIndexBuffer.data){const o=this.m_handleIndexBuffer.data[s];o&&(o.SetIndex(-1),this.m_handleIndexBuffer.data[s]=null)}e[s]=-1}else{if(e[s]=t,s!==t){if(this.m_handleIndexBuffer.data){const o=this.m_handleIndexBuffer.data[s];o&&o.SetIndex(t),this.m_handleIndexBuffer.data[t]=o}this.m_flagsBuffer.data[t]=this.m_flagsBuffer.data[s],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[t]=this.m_lastBodyContactStepBuffer.data[s]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[t]=this.m_bodyContactCountBuffer.data[s]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[t]=this.m_consecutiveContactStepsBuffer.data[s]),this.m_positionBuffer.data[t].Copy(this.m_positionBuffer.data[s]),this.m_velocityBuffer.data[t].Copy(this.m_velocityBuffer.data[s]),this.m_groupBuffer[t]=this.m_groupBuffer[s],this.m_hasForce&&this.m_forceBuffer[t].Copy(this.m_forceBuffer[s]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[t]=this.m_staticPressureBuffer[s]),this.m_depthBuffer&&(this.m_depthBuffer[t]=this.m_depthBuffer[s]),this.m_colorBuffer.data&&this.m_colorBuffer.data[t].Copy(this.m_colorBuffer.data[s]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[t]=this.m_userDataBuffer.data[s]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[t]=this.m_expirationTimeBuffer.data[s])}t++,i|=y}}const s=o=>o.index<0,y=o=>o.indexA<0||o.indexB<0,p=o=>o.index<0,f=o=>o.indexA<0||o.indexB<0,a=o=>o.indexA<0||o.indexB<0||o.indexC<0;for(let o=0;o<this.m_proxyBuffer.count;o++){const t=this.m_proxyBuffer.data[o];t.index=e[t.index]}this.m_proxyBuffer.RemoveIf(s);for(let o=0;o<this.m_contactBuffer.count;o++){const t=this.m_contactBuffer.data[o];t.indexA=e[t.indexA],t.indexB=e[t.indexB]}this.m_contactBuffer.RemoveIf(y);for(let o=0;o<this.m_bodyContactBuffer.count;o++){const t=this.m_bodyContactBuffer.data[o];t.index=e[t.index]}this.m_bodyContactBuffer.RemoveIf(p);for(let o=0;o<this.m_pairBuffer.count;o++){const t=this.m_pairBuffer.data[o];t.indexA=e[t.indexA],t.indexB=e[t.indexB]}this.m_pairBuffer.RemoveIf(f);for(let o=0;o<this.m_triadBuffer.count;o++){const t=this.m_triadBuffer.data[o];t.indexA=e[t.indexA],t.indexB=e[t.indexB],t.indexC=e[t.indexC]}if(this.m_triadBuffer.RemoveIf(a),this.m_indexByExpirationTimeBuffer.data){let o=0;for(let t=0;t<this.m_count;t++){const i=e[this.m_indexByExpirationTimeBuffer.data[t]];-1!==i&&(this.m_indexByExpirationTimeBuffer.data[o++]=i)}}for(let i=this.m_groupList;i;i=i.GetNext()){let s=t,y=0,p=!1;for(let o=i.m_firstIndex;o<i.m_lastIndex;o++){const t=e[o];t>=0?(s=n(s,t),y=C(y,t+1)):p=!0}s<y?(i.m_firstIndex=s,i.m_lastIndex=y,p&&i.m_groupFlags&o.b2ParticleGroupFlag.b2_solidParticleGroup&&this.SetGroupFlags(i,i.m_groupFlags|o.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth)):(i.m_firstIndex=0,i.m_lastIndex=0,i.m_groupFlags&o.b2ParticleGroupFlag.b2_particleGroupCanBeEmpty||this.SetGroupFlags(i,i.m_groupFlags|o.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed))}this.m_count=t,this.m_allParticleFlags=i,this.m_needsUpdateAllParticleFlags=!1;for(let t=this.m_groupList;t;){const e=t.GetNext();t.m_groupFlags&o.b2ParticleGroupFlag.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(t),t=e}}SolveLifetimes(o){if(!this.m_expirationTimeBuffer.data)throw new Error;if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;this.m_timeElapsed=this.LifetimeToExpirationTime(o.dt);const t=this.GetQuantizedTimeElapsed(),e=this.m_expirationTimeBuffer.data,i=this.m_indexByExpirationTimeBuffer.data,s=this.GetParticleCount();this.m_expirationTimeBufferRequiresSorting&&(si(i,0,s,(o,t)=>{const i=e[o],s=e[t],y=i<=0;return y===s<=0?i>s:y}),this.m_expirationTimeBufferRequiresSorting=!1);for(let o=s-1;o>=0;--o){const s=i[o],y=e[s];if(t<y||y<=0)break;this.DestroyParticle(s)}}RotateBuffer(o,t,e){if(o!==t&&t!==e){if(!this.m_flagsBuffer.data)throw new Error;if(!this.m_positionBuffer.data)throw new Error;if(!this.m_velocityBuffer.data)throw new Error;if(ni(this.m_flagsBuffer.data,o,t,e),this.m_lastBodyContactStepBuffer.data&&ni(this.m_lastBodyContactStepBuffer.data,o,t,e),this.m_bodyContactCountBuffer.data&&ni(this.m_bodyContactCountBuffer.data,o,t,e),this.m_consecutiveContactStepsBuffer.data&&ni(this.m_consecutiveContactStepsBuffer.data,o,t,e),ni(this.m_positionBuffer.data,o,t,e),ni(this.m_velocityBuffer.data,o,t,e),ni(this.m_groupBuffer,o,t,e),this.m_hasForce&&ni(this.m_forceBuffer,o,t,e),this.m_staticPressureBuffer&&ni(this.m_staticPressureBuffer,o,t,e),this.m_depthBuffer&&ni(this.m_depthBuffer,o,t,e),this.m_colorBuffer.data&&ni(this.m_colorBuffer.data,o,t,e),this.m_userDataBuffer.data&&ni(this.m_userDataBuffer.data,o,t,e),this.m_handleIndexBuffer.data){ni(this.m_handleIndexBuffer.data,o,t,e);for(let t=o;t<e;++t){const o=this.m_handleIndexBuffer.data[t];o&&o.SetIndex(i(o.GetIndex()))}}if(this.m_expirationTimeBuffer.data){ni(this.m_expirationTimeBuffer.data,o,t,e);const s=this.GetParticleCount();if(!this.m_indexByExpirationTimeBuffer.data)throw new Error;const y=this.m_indexByExpirationTimeBuffer.data;for(let o=0;o<s;++o)y[o]=i(y[o])}for(let o=0;o<this.m_proxyBuffer.count;o++){const t=this.m_proxyBuffer.data[o];t.index=i(t.index)}for(let o=0;o<this.m_contactBuffer.count;o++){const t=this.m_contactBuffer.data[o];t.indexA=i(t.indexA),t.indexB=i(t.indexB)}for(let o=0;o<this.m_bodyContactBuffer.count;o++){const t=this.m_bodyContactBuffer.data[o];t.index=i(t.index)}for(let o=0;o<this.m_pairBuffer.count;o++){const t=this.m_pairBuffer.data[o];t.indexA=i(t.indexA),t.indexB=i(t.indexB)}for(let o=0;o<this.m_triadBuffer.count;o++){const t=this.m_triadBuffer.data[o];t.indexA=i(t.indexA),t.indexB=i(t.indexB),t.indexC=i(t.indexC)}for(let o=this.m_groupList;o;o=o.GetNext())o.m_firstIndex=i(o.m_firstIndex),o.m_lastIndex=i(o.m_lastIndex-1)+1}function i(i){return i<o?i:i<t?i+e-t:i<e?i+o-t:i}}GetCriticalVelocity(o){return this.m_particleDiameter*o.inv_dt}GetCriticalVelocitySquared(o){const t=this.GetCriticalVelocity(o);return t*t}GetCriticalPressure(o){return this.m_def.density*this.GetCriticalVelocitySquared(o)}GetParticleStride(){return.75*this.m_particleDiameter}GetParticleMass(){const o=this.GetParticleStride();return this.m_def.density*o*o}GetParticleInvMass(){const o=this.m_inverseDiameter*(1/.75);return this.m_inverseDensity*o*o}GetFixtureContactFilter(){return this.m_allParticleFlags&o.b2ParticleFlag.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetParticleContactFilter(){return this.m_allParticleFlags&o.b2ParticleFlag.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetFixtureContactListener(){return this.m_allParticleFlags&o.b2ParticleFlag.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}GetParticleContactListener(){return this.m_allParticleFlags&o.b2ParticleFlag.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}SetUserOverridableBuffer(o,t,e){o.data=t,o.userSuppliedCapacity=e}SetGroupFlags(t,e){const i=t.m_groupFlags;(i^e)&o.b2ParticleGroupFlag.b2_solidParticleGroup&&(e|=o.b2ParticleGroupFlag.b2_particleGroupNeedsUpdateDepth),i&~e&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&e&&(e&o.b2ParticleGroupFlag.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=e),t.m_groupFlags=e}static BodyContactCompare(o,t){return o.index===t.index?o.weight>t.weight:o.index<t.index}RemoveSpuriousBodyContacts(){si(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,ui.BodyContactCompare);const o=ui.RemoveSpuriousBodyContacts_s_n,t=ui.RemoveSpuriousBodyContacts_s_pos,e=ui.RemoveSpuriousBodyContacts_s_normal,i=this;let s=-1,y=0;this.m_bodyContactBuffer.count=pi(this.m_bodyContactBuffer.data,p=>{if(p.index!==s&&(y=0,s=p.index),y++>3)return!0;const f=o.Copy(p.normal);if(f.SelfMul(i.m_particleDiameter*(1-p.weight)),!i.m_positionBuffer.data)throw new Error;const a=B.AddVV(i.m_positionBuffer.data[p.index],f,t);if(!p.fixture.TestPoint(a)){const o=p.fixture.GetShape().GetChildCount();for(let t=0;t<o;t++){const o=e;if(p.fixture.ComputeDistance(a,o,t)<.008)return!1}return!0}return!1},this.m_bodyContactBuffer.count)}DetectStuckParticle(o){if(!(this.m_stuckThreshold<=0)){if(!this.m_bodyContactCountBuffer.data)throw new Error;if(!this.m_consecutiveContactStepsBuffer.data)throw new Error;if(!this.m_lastBodyContactStepBuffer.data)throw new Error;++this.m_bodyContactCountBuffer.data[o],2===this.m_bodyContactCountBuffer.data[o]&&(++this.m_consecutiveContactStepsBuffer.data[o],this.m_consecutiveContactStepsBuffer.data[o]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=o)),this.m_lastBodyContactStepBuffer.data[o]=this.m_timestamp}}ValidateParticleIndex(o){return o>=0&&o<this.GetParticleCount()&&-1!==o}GetQuantizedTimeElapsed(){return Math.floor(this.m_timeElapsed/4294967296)}LifetimeToExpirationTime(o){return this.m_timeElapsed+Math.floor(o/this.m_def.lifetimeGranularity*4294967296)}ForceCanBeApplied(t){return!(t&o.b2ParticleFlag.b2_wallParticle)}PrepareForceBuffer(){if(!this.m_hasForce){for(let o=0;o<this.m_count;o++)this.m_forceBuffer[o].SetZero();this.m_hasForce=!0}}IsRigidGroup(t){return null!==t&&0!=(t.m_groupFlags&o.b2ParticleGroupFlag.b2_rigidParticleGroup)}GetLinearVelocity(o,t,e,i){if(o&&this.IsRigidGroup(o))return o.GetLinearVelocityFromWorldPoint(e,i);if(!this.m_velocityBuffer.data)throw new Error;return i.Copy(this.m_velocityBuffer.data[t])}InitDampingParameter(o,t,e,i,s,y,p,f){o[0]=i>0?1/i:0,t[0]=s>0?1/s:0,e[0]=B.CrossVV(B.SubVV(p,y,B.s_t0),f)}InitDampingParameterWithRigidGroupOrParticle(t,e,i,s,y,p,f,a){if(y&&s)this.InitDampingParameter(t,e,i,y.GetMass(),y.GetInertia(),y.GetCenter(),f,a);else{if(!this.m_flagsBuffer.data)throw new Error;const s=this.m_flagsBuffer.data[p];this.InitDampingParameter(t,e,i,s&o.b2ParticleFlag.b2_wallParticle?0:this.GetParticleMass(),0,f,f,a)}}ComputeDampingImpulse(o,t,e,i,s,y,p){const f=o+t*e*e+i+s*y*y;return f>0?p/f:0}ApplyDamping(o,t,e,i,s,y,p,f){if(s&&i)s.m_linearVelocity.SelfMulAdd(p*o,f),s.m_angularVelocity+=p*e*t;else{if(!this.m_velocityBuffer.data)throw new Error;this.m_velocityBuffer.data[y].SelfMulAdd(p*o,f)}}}ui.xTruncBits=12,ui.yTruncBits=12,ui.tagBits=32,ui.yOffset=1<<ui.yTruncBits-1,ui.yShift=ui.tagBits-ui.yTruncBits,ui.xShift=ui.tagBits-ui.yTruncBits-ui.xTruncBits,ui.xScale=1<<ui.xShift,ui.xOffset=ui.xScale*(1<<ui.xTruncBits-1),ui.yMask=(1<<ui.yTruncBits)-1<<ui.yShift,ui.xMask=~ui.yMask,ui.DestroyParticlesInShape_s_aabb=new ho,ui.CreateParticleGroup_s_transform=new M,ui.ComputeCollisionEnergy_s_v=new B,ui.QueryShapeAABB_s_aabb=new ho,ui.QueryPointAABB_s_aabb=new ho,ui.RayCast_s_aabb=new ho,ui.RayCast_s_p=new B,ui.RayCast_s_v=new B,ui.RayCast_s_n=new B,ui.RayCast_s_point=new B,ui.k_pairFlags=o.b2ParticleFlag.b2_springParticle,ui.k_triadFlags=o.b2ParticleFlag.b2_elasticParticle,ui.k_noPressureFlags=o.b2ParticleFlag.b2_powderParticle|o.b2ParticleFlag.b2_tensileParticle,ui.k_extraDampingFlags=o.b2ParticleFlag.b2_staticPressureParticle,ui.k_barrierWallFlags=o.b2ParticleFlag.b2_barrierParticle|o.b2ParticleFlag.b2_wallParticle,ui.CreateParticlesStrokeShapeForGroup_s_edge=new Qt,ui.CreateParticlesStrokeShapeForGroup_s_d=new B,ui.CreateParticlesStrokeShapeForGroup_s_p=new B,ui.CreateParticlesFillShapeForGroup_s_aabb=new ho,ui.CreateParticlesFillShapeForGroup_s_p=new B,ui.UpdatePairsAndTriads_s_dab=new B,ui.UpdatePairsAndTriads_s_dbc=new B,ui.UpdatePairsAndTriads_s_dca=new B,ui.AddContact_s_d=new B,ui.UpdateBodyContacts_s_aabb=new ho,ui.Solve_s_subStep=new ze,ui.SolveCollision_s_aabb=new ho,ui.SolveGravity_s_gravity=new B,ui.SolveBarrier_s_aabb=new ho,ui.SolveBarrier_s_va=new B,ui.SolveBarrier_s_vb=new B,ui.SolveBarrier_s_pba=new B,ui.SolveBarrier_s_vba=new B,ui.SolveBarrier_s_vc=new B,ui.SolveBarrier_s_pca=new B,ui.SolveBarrier_s_vca=new B,ui.SolveBarrier_s_qba=new B,ui.SolveBarrier_s_qca=new B,ui.SolveBarrier_s_dv=new B,ui.SolveBarrier_s_f=new B,ui.SolvePressure_s_f=new B,ui.SolveDamping_s_v=new B,ui.SolveDamping_s_f=new B,ui.SolveRigidDamping_s_t0=new B,ui.SolveRigidDamping_s_t1=new B,ui.SolveRigidDamping_s_p=new B,ui.SolveRigidDamping_s_v=new B,ui.SolveExtraDamping_s_v=new B,ui.SolveExtraDamping_s_f=new B,ui.SolveRigid_s_position=new B,ui.SolveRigid_s_rotation=new V,ui.SolveRigid_s_transform=new M,ui.SolveRigid_s_velocityTransform=new M,ui.SolveElastic_s_pa=new B,ui.SolveElastic_s_pb=new B,ui.SolveElastic_s_pc=new B,ui.SolveElastic_s_r=new V,ui.SolveElastic_s_t0=new B,ui.SolveSpring_s_pa=new B,ui.SolveSpring_s_pb=new B,ui.SolveSpring_s_d=new B,ui.SolveSpring_s_f=new B,ui.SolveTensile_s_weightedNormal=new B,ui.SolveTensile_s_s=new B,ui.SolveTensile_s_f=new B,ui.SolveViscous_s_v=new B,ui.SolveViscous_s_f=new B,ui.SolveRepulsive_s_f=new B,ui.SolvePowder_s_f=new B,ui.SolveSolid_s_f=new B,ui.RemoveSpuriousBodyContacts_s_n=new B,ui.RemoveSpuriousBodyContacts_s_pos=new B,ui.RemoveSpuriousBodyContacts_s_normal=new B,function(t){t.UserOverridableBuffer=class{constructor(){this.data=null,this.userSuppliedCapacity=0}},t.Proxy=class{constructor(){this.index=-1,this.tag=0}static CompareProxyProxy(o,t){return o.tag<t.tag}static CompareTagProxy(o,t){return o<t.tag}static CompareProxyTag(o,t){return o.tag<t}},t.InsideBoundsEnumerator=class{constructor(o,e,i,s,y){this.m_system=o,this.m_xLower=(e&t.xMask)>>>0,this.m_xUpper=(i&t.xMask)>>>0,this.m_yLower=(e&t.yMask)>>>0,this.m_yUpper=(i&t.yMask)>>>0,this.m_first=s,this.m_last=y}GetNext(){for(;this.m_first<this.m_last;){const o=(this.m_system.m_proxyBuffer.data[this.m_first].tag&t.xMask)>>>0;if(o>=this.m_xLower&&o<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return-1}},t.ParticleListNode=class{constructor(){this.next=null,this.count=0,this.index=0}},t.FixedSetAllocator=class{Allocate(o,t){return t}Clear(){}GetCount(){return 0}Invalidate(o){}GetValidBuffer(){return[]}GetBuffer(){return[]}SetCount(o){}},t.FixtureParticle=class{constructor(o,t){this.second=-1,this.first=o,this.second=t}};class e extends t.FixedSetAllocator{Initialize(o,t){}Find(o){return-1}}t.FixtureParticleSet=e,t.ParticlePair=class{constructor(o,t){this.first=-1,this.second=-1,this.first=o,this.second=t}};class i extends t.FixedSetAllocator{Initialize(o,t){}Find(o){return-1}}t.b2ParticlePairSet=i,t.ConnectionFilter=class{IsNecessary(o){return!0}ShouldCreatePair(o,t){return!0}ShouldCreateTriad(o,t,e){return!0}},t.DestroyParticlesInShapeCallback=class extends Fe{constructor(o,t,e,i){super(),this.m_callDestructionListener=!1,this.m_destroyed=0,this.m_system=o,this.m_shape=t,this.m_xf=e,this.m_callDestructionListener=i,this.m_destroyed=0}ReportFixture(o){return!1}ReportParticle(o,t){if(o!==this.m_system)return!1;if(!this.m_system.m_positionBuffer.data)throw new Error;return this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[t])&&(this.m_system.DestroyParticle(t,this.m_callDestructionListener),this.m_destroyed++),!0}Destroyed(){return this.m_destroyed}};class s extends t.ConnectionFilter{constructor(o){super(),this.m_threshold=0,this.m_threshold=o}ShouldCreatePair(o,t){return o<this.m_threshold&&this.m_threshold<=t||t<this.m_threshold&&this.m_threshold<=o}ShouldCreateTriad(o,t,e){return(o<this.m_threshold||t<this.m_threshold||e<this.m_threshold)&&(this.m_threshold<=o||this.m_threshold<=t||this.m_threshold<=e)}}t.JoinParticleGroupsFilter=s,t.CompositeShape=class extends Wt{constructor(t,e=t.length){super(o.b2ShapeType.e_unknown,0),this.m_shapeCount=0,this.m_shapes=t,this.m_shapeCount=e}Clone(){throw new Error}GetChildCount(){return 1}TestPoint(o,t){for(let e=0;e<this.m_shapeCount;e++)if(this.m_shapes[e].TestPoint(o,t))return!0;return!1}ComputeDistance(o,t,e,i){return 0}RayCast(o,t,e,i){return!1}ComputeAABB(o,t,e){const i=new ho;o.lowerBound.x=1e37,o.lowerBound.y=1e37,o.upperBound.x=-1e37,o.upperBound.y=-1e37;for(let e=0;e<this.m_shapeCount;e++){const s=this.m_shapes[e].GetChildCount();for(let y=0;y<s;y++){const s=i;this.m_shapes[e].ComputeAABB(s,t,y),o.Combine1(s)}}}ComputeMass(o,t){}SetupDistanceProxy(o,t){}ComputeSubmergedArea(o,t,e,i){return 0}Dump(o){}};class y extends t.ConnectionFilter{constructor(o){super(),this.m_flagsBuffer=o}IsNecessary(t){if(!this.m_flagsBuffer.data)throw new Error;return 0!=(this.m_flagsBuffer.data[t]&o.b2ParticleFlag.b2_reactiveParticle)}}t.ReactiveFilter=y;class p extends ri{constructor(o,t){super(o),this.m_contactFilter=t}ShouldCollideFixtureParticle(t,e,i){return!(this.m_contactFilter&&this.m_system.GetFlagsBuffer()[i]&o.b2ParticleFlag.b2_fixtureContactFilterParticle)||this.m_contactFilter.ShouldCollideFixtureParticle(t,this.m_system,i)}ReportFixtureAndParticle(e,i,s){const y=t.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n,p=t.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp;if(!this.m_system.m_flagsBuffer.data)throw new Error;if(!this.m_system.m_positionBuffer.data)throw new Error;const f=this.m_system.m_positionBuffer.data[s],a=y,n=e.ComputeDistance(f,a,i);if(n<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(e,this.m_system,s)){const t=e.GetBody(),i=t.GetWorldCenter(),y=t.GetMass(),C=t.GetInertia()-y*t.GetLocalCenter().LengthSquared(),r=y>0?1/y:0,m=C>0?1/C:0,l=this.m_system.m_flagsBuffer.data[s]&o.b2ParticleFlag.b2_wallParticle?0:this.m_system.GetParticleInvMass(),h=B.SubVV(f,i,p),_=B.CrossVV(h,a),c=l+r+m*_*_,u=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];u.index=s,u.body=t,u.fixture=e,u.weight=1-n*this.m_system.m_inverseDiameter,u.normal.Copy(a.SelfNeg()),u.mass=c>0?1/c:0,this.m_system.DetectStuckParticle(s)}}}p.ReportFixtureAndParticle_s_n=new B,p.ReportFixtureAndParticle_s_rp=new B,t.UpdateBodyContactsCallback=p;class f extends ri{constructor(o,t){super(o),this.m_step=t}ReportFixtureAndParticle(e,i,s){const y=t.SolveCollisionCallback.ReportFixtureAndParticle_s_p1,p=t.SolveCollisionCallback.ReportFixtureAndParticle_s_output,f=t.SolveCollisionCallback.ReportFixtureAndParticle_s_input,a=t.SolveCollisionCallback.ReportFixtureAndParticle_s_p,n=t.SolveCollisionCallback.ReportFixtureAndParticle_s_v,C=t.SolveCollisionCallback.ReportFixtureAndParticle_s_f,r=e.GetBody();if(!this.m_system.m_positionBuffer.data)throw new Error;if(!this.m_system.m_velocityBuffer.data)throw new Error;const m=this.m_system.m_positionBuffer.data[s],l=this.m_system.m_velocityBuffer.data[s],h=p,_=f;if(0===this.m_system.m_iterationIndex){const t=M.MulTXV(r.m_xf0,m,y);e.GetShape().GetType()===o.b2ShapeType.e_circleShape&&(t.SelfSub(r.GetLocalCenter()),V.MulRV(r.m_xf0.q,t,t),V.MulTRV(r.m_xf.q,t,t),t.SelfAdd(r.GetLocalCenter())),M.MulXV(r.m_xf,t,_.p1)}else _.p1.Copy(m);if(B.AddVMulSV(m,this.m_step.dt,l,_.p2),_.maxFraction=1,e.RayCast(h,_,i)){const o=h.normal,t=a;t.x=(1-h.fraction)*_.p1.x+h.fraction*_.p2.x+.008*o.x,t.y=(1-h.fraction)*_.p1.y+h.fraction*_.p2.y+.008*o.y;const e=n;e.x=this.m_step.inv_dt*(t.x-m.x),e.y=this.m_step.inv_dt*(t.y-m.y),this.m_system.m_velocityBuffer.data[s].Copy(e);const i=C;i.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(l.x-e.x),i.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(l.y-e.y),this.m_system.ParticleApplyForce(s,i)}}ReportParticle(o,t){return!1}}f.ReportFixtureAndParticle_s_p1=new B,f.ReportFixtureAndParticle_s_output=new lo,f.ReportFixtureAndParticle_s_input=new mo,f.ReportFixtureAndParticle_s_p=new B,f.ReportFixtureAndParticle_s_v=new B,f.ReportFixtureAndParticle_s_f=new B,t.SolveCollisionCallback=f}(ui||(ui={}));class di{constructor(o){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new Re,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new B,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new ke,this.m_island=new Ze,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(o)}SetDestructionListener(o){this.m_destructionListener=o}SetContactFilter(o){this.m_contactManager.m_contactFilter=o}SetContactListener(o){this.m_contactManager.m_contactListener=o}SetDebugDraw(o){this.m_debugDraw=o}CreateBody(o={}){if(this.IsLocked())throw new Error;const t=new ee(o,this);return t.m_prev=null,t.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=t),this.m_bodyList=t,++this.m_bodyCount,t}DestroyBody(o){if(this.IsLocked())throw new Error;let t=o.m_jointList;for(;t;){const e=t;t=t.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(e.joint),this.DestroyJoint(e.joint),o.m_jointList=t}o.m_jointList=null;let e=o.m_controllerList;for(;e;){const t=e;e=e.nextController,t.controller.RemoveBody(o)}let i=o.m_contactList;for(;i;){const o=i;i=i.next,this.m_contactManager.Destroy(o.contact)}o.m_contactList=null;let s=o.m_fixtureList;for(;s;){const t=s;s=s.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(t),t.DestroyProxies(),t.Destroy(),o.m_fixtureList=s,o.m_fixtureCount-=1}o.m_fixtureList=null,o.m_fixtureCount=0,o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_bodyList&&(this.m_bodyList=o.m_next),--this.m_bodyCount}static _Joint_Create(t,e){switch(t.type){case o.b2JointType.e_distanceJoint:return new fe(t);case o.b2JointType.e_mouseJoint:return new me(t);case o.b2JointType.e_prismaticJoint:return new le(t);case o.b2JointType.e_revoluteJoint:return new _e(t);case o.b2JointType.e_pulleyJoint:return new he(t);case o.b2JointType.e_gearJoint:return new Ce(t);case o.b2JointType.e_wheelJoint:return new de(t);case o.b2JointType.e_weldJoint:return new ue(t);case o.b2JointType.e_frictionJoint:return new ne(t);case o.b2JointType.e_ropeJoint:return new ce(t);case o.b2JointType.e_motorJoint:return new re(t);case o.b2JointType.e_areaJoint:return new ae(t)}throw new Error}static _Joint_Destroy(o,t){}CreateJoint(o){if(this.IsLocked())throw new Error;const t=di._Joint_Create(o,null);t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB;const e=o.bodyA,i=o.bodyB;if(!o.collideConnected){let o=i.GetContactList();for(;o;)o.other===e&&o.contact.FlagForFiltering(),o=o.next}return t}DestroyJoint(o){if(this.IsLocked())throw new Error;const t=o.m_collideConnected;o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_jointList&&(this.m_jointList=o.m_next);const e=o.m_bodyA,i=o.m_bodyB;if(e.SetAwake(!0),i.SetAwake(!0),o.m_edgeA.prev&&(o.m_edgeA.prev.next=o.m_edgeA.next),o.m_edgeA.next&&(o.m_edgeA.next.prev=o.m_edgeA.prev),o.m_edgeA===e.m_jointList&&(e.m_jointList=o.m_edgeA.next),o.m_edgeA.prev=null,o.m_edgeA.next=null,o.m_edgeB.prev&&(o.m_edgeB.prev.next=o.m_edgeB.next),o.m_edgeB.next&&(o.m_edgeB.next.prev=o.m_edgeB.prev),o.m_edgeB===i.m_jointList&&(i.m_jointList=o.m_edgeB.next),o.m_edgeB.prev=null,o.m_edgeB.next=null,di._Joint_Destroy(o,null),--this.m_jointCount,!t){let o=i.GetContactList();for(;o;)o.other===e&&o.contact.FlagForFiltering(),o=o.next}}CreateParticleSystem(o){if(this.IsLocked())throw new Error;const t=new ui(o,this);return t.m_prev=null,t.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=t),this.m_particleSystemList=t,t}DestroyParticleSystem(o){if(this.IsLocked())throw new Error;o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),o===this.m_particleSystemList&&(this.m_particleSystemList=o.m_next)}CalculateReasonableParticleIterations(o){return null===this.m_particleSystemList?1:Qe(this.m_gravity.Length(),function(o){let t=1e37;for(let e=o.GetParticleSystemList();null!==e;e=e.m_next)t=n(t,e.GetRadius());return t}(this),o)}Step(o,t,e,i=this.CalculateReasonableParticleIterations(o)){const s=di.Step_s_stepTimer.Reset();this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0;const y=di.Step_s_step;y.dt=o,y.velocityIterations=t,y.positionIterations=e,y.particleIterations=i,y.inv_dt=o>0?1/o:0,y.dtRatio=this.m_inv_dt0*o,y.warmStarting=this.m_warmStarting;const p=di.Step_s_timer.Reset();if(this.m_contactManager.Collide(),this.m_profile.collide=p.GetMilliseconds(),this.m_stepComplete&&y.dt>0){const o=di.Step_s_timer.Reset();for(let o=this.m_particleSystemList;o;o=o.m_next)o.Solve(y);this.Solve(y),this.m_profile.solve=o.GetMilliseconds()}if(this.m_continuousPhysics&&y.dt>0){const o=di.Step_s_timer.Reset();this.SolveTOI(y),this.m_profile.solveTOI=o.GetMilliseconds()}y.dt>0&&(this.m_inv_dt0=y.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=s.GetMilliseconds()}ClearForces(){for(let o=this.m_bodyList;o;o=o.m_next)o.m_force.SetZero(),o.m_torque=0}DrawParticleSystem(o){if(null===this.m_debugDraw)return;const t=o.GetParticleCount();if(t){const e=o.GetRadius(),i=o.GetPositionBuffer();if(o.m_colorBuffer.data){const s=o.GetColorBuffer();this.m_debugDraw.DrawParticles(i,e,s,t)}else this.m_debugDraw.DrawParticles(i,e,null,t)}}DrawDebugData(){if(null===this.m_debugDraw)return;const t=this.m_debugDraw.GetFlags(),e=di.DrawDebugData_s_color.SetRGB(0,0,0);if(t&o.b2DrawFlags.e_shapeBit)for(let t=this.m_bodyList;t;t=t.m_next){const i=t.m_xf;this.m_debugDraw.PushTransform(i);for(let i=t.GetFixtureList();i;i=i.m_next)t.IsActive()?t.GetType()===o.b2BodyType.b2_staticBody?(e.SetRGB(.5,.9,.5),this.DrawShape(i,e)):t.GetType()===o.b2BodyType.b2_kinematicBody?(e.SetRGB(.5,.5,.9),this.DrawShape(i,e)):t.IsAwake()?(e.SetRGB(.9,.7,.7),this.DrawShape(i,e)):(e.SetRGB(.6,.6,.6),this.DrawShape(i,e)):(e.SetRGB(.5,.5,.3),this.DrawShape(i,e));this.m_debugDraw.PopTransform(i)}if(t&o.b2DrawFlags.e_particleBit)for(let o=this.m_particleSystemList;o;o=o.m_next)this.DrawParticleSystem(o);if(t&o.b2DrawFlags.e_jointBit)for(let o=this.m_jointList;o;o=o.m_next)this.DrawJoint(o);if(t&o.b2DrawFlags.e_aabbBit){e.SetRGB(.9,.3,.9);const o=di.DrawDebugData_s_vs;for(let t=this.m_bodyList;t;t=t.m_next)if(t.IsActive())for(let i=t.GetFixtureList();i;i=i.m_next)for(let t=0;t<i.m_proxyCount;++t){const s=i.m_proxies[t].treeNode.aabb;o[0].Set(s.lowerBound.x,s.lowerBound.y),o[1].Set(s.upperBound.x,s.lowerBound.y),o[2].Set(s.upperBound.x,s.upperBound.y),o[3].Set(s.lowerBound.x,s.upperBound.y),this.m_debugDraw.DrawPolygon(o,4,e)}}if(t&o.b2DrawFlags.e_centerOfMassBit)for(let o=this.m_bodyList;o;o=o.m_next){const t=di.DrawDebugData_s_xf;t.q.Copy(o.m_xf.q),t.p.Copy(o.GetWorldCenter()),this.m_debugDraw.DrawTransform(t)}if(t&o.b2DrawFlags.e_controllerBit)for(let o=this.m_controllerList;o;o=o.m_next)o.Draw(this.m_debugDraw)}QueryAABB(o,t,e){if(this.m_contactManager.m_broadPhase.Query(t,t=>{const i=t.userData.fixture;return o?o.ReportFixture(i):!e||e(i)}),o instanceof Fe)for(let e=this.m_particleSystemList;e;e=e.m_next)o.ShouldQueryParticleSystem(e)&&e.QueryAABB(o,t)}QueryAllAABB(o,t=[]){return this.QueryAABB(null,o,o=>(t.push(o),!0)),t}QueryPointAABB(o,t,e){if(this.m_contactManager.m_broadPhase.QueryPoint(t,t=>{const i=t.userData.fixture;return o?o.ReportFixture(i):!e||e(i)}),o instanceof Fe)for(let e=this.m_particleSystemList;e;e=e.m_next)o.ShouldQueryParticleSystem(e)&&e.QueryPointAABB(o,t)}QueryAllPointAABB(o,t=[]){return this.QueryPointAABB(null,o,o=>(t.push(o),!0)),t}QueryFixtureShape(o,t,e,i,s){const y=di.QueryFixtureShape_s_aabb;if(t.ComputeAABB(y,i,e),this.m_contactManager.m_broadPhase.Query(y,y=>{const p=y.userData,f=p.fixture;if(bo(t,e,f.GetShape(),p.childIndex,i,f.GetBody().GetTransform())){if(o)return o.ReportFixture(f);if(s)return s(f)}return!0}),o instanceof Fe)for(let t=this.m_particleSystemList;t;t=t.m_next)o.ShouldQueryParticleSystem(t)&&t.QueryAABB(o,y)}QueryAllFixtureShape(o,t,e,i=[]){return this.QueryFixtureShape(null,o,t,e,o=>(i.push(o),!0)),i}QueryFixturePoint(o,t,e){if(this.m_contactManager.m_broadPhase.QueryPoint(t,i=>{const s=i.userData.fixture;if(s.TestPoint(t)){if(o)return o.ReportFixture(s);if(e)return e(s)}return!0}),o)for(let e=this.m_particleSystemList;e;e=e.m_next)o.ShouldQueryParticleSystem(e)&&e.QueryPointAABB(o,t)}QueryAllFixturePoint(o,t=[]){return this.QueryFixturePoint(null,o,o=>(t.push(o),!0)),t}RayCast(o,t,e,i){const s=di.RayCast_s_input;if(s.maxFraction=1,s.p1.Copy(t),s.p2.Copy(e),this.m_contactManager.m_broadPhase.RayCast(s,(s,y)=>{const p=y.userData,f=p.fixture,a=p.childIndex,n=di.RayCast_s_output;if(f.RayCast(n,s,a)){const s=n.fraction,y=di.RayCast_s_point;if(y.Set((1-s)*t.x+s*e.x,(1-s)*t.y+s*e.y),o)return o.ReportFixture(f,y,n.normal,s);if(i)return i(f,y,n.normal,s)}return s.maxFraction}),o)for(let i=this.m_particleSystemList;i;i=i.m_next)o.ShouldQueryParticleSystem(i)&&i.RayCast(o,t,e)}RayCastOne(o,t){let e=null,i=1;return this.RayCast(null,o,t,(o,t,s,y)=>(y<i&&(i=y,e=o),i)),e}RayCastAll(o,t,e=[]){return this.RayCast(null,o,t,(o,t,i,s)=>(e.push(o),1)),e}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetParticleSystemList(){return this.m_particleSystemList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(o){if(o!==this.m_allowSleep&&(this.m_allowSleep=o,!this.m_allowSleep))for(let o=this.m_bodyList;o;o=o.m_next)o.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(o){this.m_warmStarting=o}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(o){this.m_continuousPhysics=o}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(o){this.m_subStepping=o}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(o,t=!0){if(!B.IsEqualToV(this.m_gravity,o)&&(this.m_gravity.Copy(o),t))for(let o=this.m_bodyList;o;o=o.m_next)o.SetAwake(!0)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(o){this.m_clearForces=o}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(o){if(this.IsLocked())throw new Error;for(let t=this.m_bodyList;t;t=t.m_next)t.m_xf.p.SelfSub(o),t.m_sweep.c0.SelfSub(o),t.m_sweep.c.SelfSub(o);for(let t=this.m_jointList;t;t=t.m_next)t.ShiftOrigin(o);this.m_contactManager.m_broadPhase.ShiftOrigin(o)}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Dump(t){if(this.m_locked)return;t("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),t("this.m_world.SetGravity(g);\n"),t("const bodies: b2Body[] = [];\n"),t("const joints: b2Joint[] = [];\n");let e=0;for(let o=this.m_bodyList;o;o=o.m_next)o.m_islandIndex=e,o.Dump(t),++e;e=0;for(let o=this.m_jointList;o;o=o.m_next)o.m_index=e,++e;for(let e=this.m_jointList;e;e=e.m_next)e.m_type!==o.b2JointType.e_gearJoint&&(t("{\n"),e.Dump(t),t("}\n"));for(let e=this.m_jointList;e;e=e.m_next)e.m_type===o.b2JointType.e_gearJoint&&(t("{\n"),e.Dump(t),t("}\n"))}DrawJoint(t){if(null===this.m_debugDraw)return;const e=t.GetBodyA(),i=t.GetBodyB(),s=e.m_xf,y=i.m_xf,p=s.p,f=y.p,a=t.GetAnchorA(di.DrawJoint_s_p1),n=t.GetAnchorB(di.DrawJoint_s_p2),C=di.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(t.m_type){case o.b2JointType.e_distanceJoint:this.m_debugDraw.DrawSegment(a,n,C);break;case o.b2JointType.e_pulleyJoint:{const o=t,e=o.GetGroundAnchorA(),i=o.GetGroundAnchorB();this.m_debugDraw.DrawSegment(e,a,C),this.m_debugDraw.DrawSegment(i,n,C),this.m_debugDraw.DrawSegment(e,i,C);break}case o.b2JointType.e_mouseJoint:{const o=di.DrawJoint_s_c;o.Set(0,1,0),this.m_debugDraw.DrawPoint(a,4,o),this.m_debugDraw.DrawPoint(n,4,o),o.Set(.8,.8,.8),this.m_debugDraw.DrawSegment(a,n,o);break}default:this.m_debugDraw.DrawSegment(p,a,C),this.m_debugDraw.DrawSegment(a,n,C),this.m_debugDraw.DrawSegment(f,n,C)}}DrawShape(t,e){if(null===this.m_debugDraw)return;const i=t.GetShape();switch(i.m_type){case o.b2ShapeType.e_circleShape:{const o=i,t=o.m_p,s=o.m_radius,y=B.UNITX;this.m_debugDraw.DrawSolidCircle(t,s,y,e);break}case o.b2ShapeType.e_edgeShape:{const o=i,t=o.m_vertex1,s=o.m_vertex2;this.m_debugDraw.DrawSegment(t,s,e);break}case o.b2ShapeType.e_chainShape:{const o=i,t=o.m_count,s=o.m_vertices,y=di.DrawShape_s_ghostColor.SetRGBA(.75*e.r,.75*e.g,.75*e.b,e.a);let p=s[0];if(this.m_debugDraw.DrawPoint(p,4,e),o.m_hasPrevVertex){const t=o.m_prevVertex;this.m_debugDraw.DrawSegment(t,p,y),this.m_debugDraw.DrawCircle(t,.1,y)}for(let o=1;o<t;++o){const t=s[o];this.m_debugDraw.DrawSegment(p,t,e),this.m_debugDraw.DrawPoint(t,4,e),p=t}if(o.m_hasNextVertex){const t=o.m_nextVertex;this.m_debugDraw.DrawSegment(t,p,y),this.m_debugDraw.DrawCircle(t,.1,y)}break}case o.b2ShapeType.e_polygonShape:{const o=i,t=o.m_count,s=o.m_vertices;this.m_debugDraw.DrawSolidPolygon(s,t,e);break}}}Solve(t){for(let o=this.m_bodyList;o;o=o.m_next)o.m_xf0.Copy(o.m_xf);for(let o=this.m_controllerList;o;o=o.m_next)o.Step(t);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const e=this.m_island;e.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(let o=this.m_bodyList;o;o=o.m_next)o.m_islandFlag=!1;for(let o=this.m_contactManager.m_contactList;o;o=o.m_next)o.m_islandFlag=!1;for(let o=this.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;const i=this.s_stack;for(let s=this.m_bodyList;s;s=s.m_next){if(s.m_islandFlag)continue;if(!s.IsAwake()||!s.IsActive())continue;if(s.GetType()===o.b2BodyType.b2_staticBody)continue;e.Clear();let y=0;for(i[y++]=s,s.m_islandFlag=!0;y>0;){const t=i[--y];if(!t)throw new Error;if(e.AddBody(t),t.m_awakeFlag=!0,t.GetType()!==o.b2BodyType.b2_staticBody){for(let o=t.m_contactList;o;o=o.next){const t=o.contact;if(t.m_islandFlag)continue;if(!t.IsEnabled()||!t.IsTouching())continue;const s=t.m_fixtureA.m_isSensor,p=t.m_fixtureB.m_isSensor;if(s||p)continue;e.AddContact(t),t.m_islandFlag=!0;const f=o.other;if(!f)throw new Error;f.m_islandFlag||(i[y++]=f,f.m_islandFlag=!0)}for(let o=t.m_jointList;o;o=o.next){if(o.joint.m_islandFlag)continue;const t=o.other;t.IsActive()&&(e.AddJoint(o.joint),o.joint.m_islandFlag=!0,t.m_islandFlag||(i[y++]=t,t.m_islandFlag=!0))}}}const p=new ke;e.Solve(p,t,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=p.solveInit,this.m_profile.solveVelocity+=p.solveVelocity,this.m_profile.solvePosition+=p.solvePosition;for(let t=0;t<e.m_bodyCount;++t){const i=e.m_bodies[t];i.GetType()===o.b2BodyType.b2_staticBody&&(i.m_islandFlag=!1)}}for(let o=0;o<i.length&&i[o];++o)i[o]=null;const s=new D;for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag&&t.GetType()!==o.b2BodyType.b2_staticBody&&t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=s.GetMilliseconds()}SolveTOI(t){const e=this.m_island;if(e.Initialize(64,32,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(let o=this.m_bodyList;o;o=o.m_next)o.m_islandFlag=!1,o.m_sweep.alpha0=0;for(let o=this.m_contactManager.m_contactList;o;o=o.m_next)o.m_toiFlag=!1,o.m_islandFlag=!1,o.m_toiCount=0,o.m_toi=1}for(;;){let i=null,s=1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next){if(!t.IsEnabled())continue;if(t.m_toiCount>8)continue;let e=1;if(t.m_toiFlag)e=t.m_toi;else{const i=t.GetFixtureA(),s=t.GetFixtureB();if(i.IsSensor()||s.IsSensor())continue;const y=i.GetBody(),p=s.GetBody(),f=y.m_type,a=p.m_type,C=y.IsAwake()&&f!==o.b2BodyType.b2_staticBody,r=p.IsAwake()&&a!==o.b2BodyType.b2_staticBody;if(!C&&!r)continue;const m=y.IsBullet()||f!==o.b2BodyType.b2_dynamicBody,l=p.IsBullet()||a!==o.b2BodyType.b2_dynamicBody;if(!m&&!l)continue;let h=y.m_sweep.alpha0;y.m_sweep.alpha0<p.m_sweep.alpha0?(h=p.m_sweep.alpha0,y.m_sweep.Advance(h)):p.m_sweep.alpha0<y.m_sweep.alpha0&&(h=y.m_sweep.alpha0,p.m_sweep.Advance(h));const _=t.GetChildIndexA(),c=t.GetChildIndexB(),u=di.SolveTOI_s_toi_input;u.proxyA.SetShape(i.GetShape(),_),u.proxyB.SetShape(s.GetShape(),c),u.sweepA.Copy(y.m_sweep),u.sweepB.Copy(p.m_sweep),u.tMax=1;const d=di.SolveTOI_s_toi_output;Ho(d,u);const g=d.t;e=d.state===o.b2TOIOutputState.e_touching?n(h+(1-h)*g,1):1,t.m_toi=e,t.m_toiFlag=!0}e<s&&(i=t,s=e)}if(null===i||.9999<s){this.m_stepComplete=!0;break}const y=i.GetFixtureA(),p=i.GetFixtureB(),f=y.GetBody(),a=p.GetBody(),C=di.SolveTOI_s_backup1.Copy(f.m_sweep),r=di.SolveTOI_s_backup2.Copy(a.m_sweep);if(f.Advance(s),a.Advance(s),i.Update(this.m_contactManager.m_contactListener),i.m_toiFlag=!1,++i.m_toiCount,!i.IsEnabled()||!i.IsTouching()){i.SetEnabled(!1),f.m_sweep.Copy(C),a.m_sweep.Copy(r),f.SynchronizeTransform(),a.SynchronizeTransform();continue}f.SetAwake(!0),a.SetAwake(!0),e.Clear(),e.AddBody(f),e.AddBody(a),e.AddContact(i),f.m_islandFlag=!0,a.m_islandFlag=!0,i.m_islandFlag=!0;for(let t=0;t<2;++t){const i=0===t?f:a;if(i.m_type===o.b2BodyType.b2_dynamicBody)for(let t=i.m_contactList;t&&e.m_bodyCount!==e.m_bodyCapacity&&e.m_contactCount!==e.m_contactCapacity;t=t.next){const y=t.contact;if(y.m_islandFlag)continue;const p=t.other;if(p.m_type===o.b2BodyType.b2_dynamicBody&&!i.IsBullet()&&!p.IsBullet())continue;const f=y.m_fixtureA.m_isSensor,a=y.m_fixtureB.m_isSensor;if(f||a)continue;const n=di.SolveTOI_s_backup.Copy(p.m_sweep);p.m_islandFlag||p.Advance(s),y.Update(this.m_contactManager.m_contactListener),y.IsEnabled()&&y.IsTouching()?(y.m_islandFlag=!0,e.AddContact(y),p.m_islandFlag||(p.m_islandFlag=!0,p.m_type!==o.b2BodyType.b2_staticBody&&p.SetAwake(!0),e.AddBody(p))):(p.m_sweep.Copy(n),p.SynchronizeTransform())}}const m=di.SolveTOI_s_subStep;m.dt=(1-s)*t.dt,m.inv_dt=1/m.dt,m.dtRatio=1,m.positionIterations=20,m.velocityIterations=t.velocityIterations,m.particleIterations=t.particleIterations,m.warmStarting=!1,e.SolveTOI(m,f.m_islandIndex,a.m_islandIndex);for(let t=0;t<e.m_bodyCount;++t){const i=e.m_bodies[t];if(i.m_islandFlag=!1,i.m_type===o.b2BodyType.b2_dynamicBody){i.SynchronizeFixtures();for(let o=i.m_contactList;o;o=o.next)o.contact.m_toiFlag=!1,o.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}AddController(o){return o.m_next=this.m_controllerList,o.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=o),this.m_controllerList=o,++this.m_controllerCount,o}RemoveController(o){return o.m_prev&&(o.m_prev.m_next=o.m_next),o.m_next&&(o.m_next.m_prev=o.m_prev),this.m_controllerList===o&&(this.m_controllerList=o.m_next),--this.m_controllerCount,o.m_prev=null,o.m_next=null,o}}di.Step_s_step=new ze,di.Step_s_stepTimer=new D,di.Step_s_timer=new D,di.DrawDebugData_s_color=new P(0,0,0),di.DrawDebugData_s_vs=B.MakeArray(4),di.DrawDebugData_s_xf=new M,di.QueryFixtureShape_s_aabb=new ho,di.RayCast_s_input=new mo,di.RayCast_s_output=new lo,di.RayCast_s_point=new B,di.DrawJoint_s_p1=new B,di.DrawJoint_s_p2=new B,di.DrawJoint_s_color=new P(.5,.8,.8),di.DrawJoint_s_c=new P,di.DrawShape_s_ghostColor=new P,di.SolveTOI_s_subStep=new ze,di.SolveTOI_s_backup=new I,di.SolveTOI_s_backup1=new I,di.SolveTOI_s_backup2=new I,di.SolveTOI_s_toi_input=new Fo,di.SolveTOI_s_toi_output=new zo;class gi{constructor(o,t){this.prevBody=null,this.nextBody=null,this.prevController=null,this.nextController=null,this.controller=o,this.body=t}}class xi{constructor(){this.m_bodyList=null,this.m_bodyCount=0,this.m_prev=null,this.m_next=null}GetNext(){return this.m_next}GetPrev(){return this.m_prev}GetBodyList(){return this.m_bodyList}AddBody(o){const t=new gi(this,o);t.nextBody=this.m_bodyList,t.prevBody=null,this.m_bodyList&&(this.m_bodyList.prevBody=t),this.m_bodyList=t,++this.m_bodyCount,t.nextController=o.m_controllerList,t.prevController=null,o.m_controllerList&&(o.m_controllerList.prevController=t),o.m_controllerList=t,++o.m_controllerCount}RemoveBody(o){if(this.m_bodyCount<=0)throw new Error;let t=this.m_bodyList;for(;t&&t.body!==o;)t=t.nextBody;if(null===t)throw new Error;t.prevBody&&(t.prevBody.nextBody=t.nextBody),t.nextBody&&(t.nextBody.prevBody=t.prevBody),this.m_bodyList===t&&(this.m_bodyList=t.nextBody),--this.m_bodyCount,t.nextController&&(t.nextController.prevController=t.prevController),t.prevController&&(t.prevController.nextController=t.nextController),o.m_controllerList===t&&(o.m_controllerList=t.nextController),--o.m_controllerCount}Clear(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body);this.m_bodyCount=0}}class bi extends xi{constructor(){super(...arguments),this.A=new B(0,0)}Step(o){const t=B.MulSV(o.dt,this.A,bi.Step_s_dtA);for(let o=this.m_bodyList;o;o=o.nextBody){const e=o.body;e.IsAwake()&&e.SetLinearVelocity(B.AddVV(e.GetLinearVelocity(),t,B.s_t0))}}Draw(o){}}bi.Step_s_dtA=new B;class Bi extends xi{constructor(){super(...arguments),this.G=1,this.invSqr=!0}Step(o){if(this.invSqr)for(let o=this.m_bodyList;o;o=o.nextBody){const t=o.body,e=t.GetWorldCenter(),i=t.GetMass();for(let s=this.m_bodyList;s&&s!==o;s=s.nextBody){const o=s.body,y=o.GetWorldCenter(),p=o.GetMass(),f=y.x-e.x,a=y.y-e.y,n=f*f+a*a;if(n<1e-5)continue;const C=Bi.Step_s_f.Set(f,a);C.SelfMul(this.G/n/_(n)*i*p),t.IsAwake()&&t.ApplyForce(C,e),o.IsAwake()&&o.ApplyForce(C.SelfMul(-1),y)}}else for(let o=this.m_bodyList;o;o=o.nextBody){const t=o.body,e=t.GetWorldCenter(),i=t.GetMass();for(let s=this.m_bodyList;s&&s!==o;s=s.nextBody){const o=s.body,y=o.GetWorldCenter(),p=o.GetMass(),f=y.x-e.x,a=y.y-e.y,n=f*f+a*a;if(n<1e-5)continue;const C=Bi.Step_s_f.Set(f,a);C.SelfMul(this.G/n*i*p),t.IsAwake()&&t.ApplyForce(C,e),o.IsAwake()&&o.ApplyForce(C.SelfMul(-1),y)}}}Draw(o){}}Bi.Step_s_f=new B;class vi extends xi{constructor(){super(...arguments),this.T=new A,this.maxTimestep=0}Step(o){let t=o.dt;if(!(t<=1e-5)){t>this.maxTimestep&&this.maxTimestep>0&&(t=this.maxTimestep);for(let o=this.m_bodyList;o;o=o.nextBody){const e=o.body;if(!e.IsAwake())continue;const i=e.GetWorldVector(A.MulMV(this.T,e.GetLocalVector(e.GetLinearVelocity(),B.s_t0),B.s_t1),vi.Step_s_damping);e.SetLinearVelocity(B.AddVV(e.GetLinearVelocity(),B.MulSV(t,i,B.s_t0),B.s_t1))}}}Draw(o){}SetAxisAligned(o,t){this.T.ex.x=-o,this.T.ex.y=0,this.T.ey.x=0,this.T.ey.y=-t,this.maxTimestep=o>0||t>0?1/C(o,t):0}}vi.Step_s_damping=new B;class Si{constructor(){this.m_count=0,this.m_ps=[],this.m_p0s=[],this.m_vs=[],this.m_ims=[],this.m_Ls=[],this.m_as=[],this.m_gravity=new B,this.m_damping=0,this.m_k2=1,this.m_k3=.1}GetVertexCount(){return this.m_count}GetVertices(){return this.m_ps}Initialize(o){this.m_count=o.count,this.m_ps=B.MakeArray(this.m_count),this.m_p0s=B.MakeArray(this.m_count),this.m_vs=B.MakeArray(this.m_count),this.m_ims=f(this.m_count);for(let t=0;t<this.m_count;++t){this.m_ps[t].Copy(o.vertices[t]),this.m_p0s[t].Copy(o.vertices[t]),this.m_vs[t].SetZero();const e=o.masses[t];this.m_ims[t]=e>0?1/e:0}const t=this.m_count-1,e=this.m_count-2;this.m_Ls=f(t),this.m_as=f(e);for(let o=0;o<t;++o){const t=this.m_ps[o],e=this.m_ps[o+1];this.m_Ls[o]=B.DistanceVV(t,e)}for(let o=0;o<e;++o){const t=this.m_ps[o],e=this.m_ps[o+1],i=this.m_ps[o+2],s=B.SubVV(e,t,B.s_t0),y=B.SubVV(i,e,B.s_t1),p=B.CrossVV(s,y),f=B.DotVV(s,y);this.m_as[o]=b(p,f)}this.m_gravity.Copy(o.gravity),this.m_damping=o.damping,this.m_k2=o.k2,this.m_k3=o.k3}Step(o,t){if(0===o)return;const e=Math.exp(-o*this.m_damping);for(let t=0;t<this.m_count;++t)this.m_p0s[t].Copy(this.m_ps[t]),this.m_ims[t]>0&&this.m_vs[t].SelfMulAdd(o,this.m_gravity),this.m_vs[t].SelfMul(e),this.m_ps[t].SelfMulAdd(o,this.m_vs[t]);for(let o=0;o<t;++o)this.SolveC2(),this.SolveC3(),this.SolveC2();const i=1/o;for(let o=0;o<this.m_count;++o)B.MulSV(i,B.SubVV(this.m_ps[o],this.m_p0s[o],B.s_t0),this.m_vs[o])}SolveC2(){const o=this.m_count-1;for(let t=0;t<o;++t){const o=this.m_ps[t],e=this.m_ps[t+1],i=B.SubVV(e,o,Si.s_d),s=i.Normalize(),y=this.m_ims[t],p=this.m_ims[t+1];if(y+p===0)continue;const f=y/(y+p),a=p/(y+p);o.SelfMulSub(this.m_k2*f*(this.m_Ls[t]-s),i),e.SelfMulAdd(this.m_k2*a*(this.m_Ls[t]-s),i)}}SetAngle(o){const t=this.m_count-2;for(let e=0;e<t;++e)this.m_as[e]=o}SolveC3(){const o=this.m_count-2;for(let t=0;t<o;++t){const o=this.m_ps[t],i=this.m_ps[t+1],s=this.m_ps[t+2],y=this.m_ims[t],p=this.m_ims[t+1],f=this.m_ims[t+2],a=B.SubVV(i,o,Si.s_d1),n=B.SubVV(s,i,Si.s_d2),C=a.LengthSquared(),r=n.LengthSquared();if(C*r==0)continue;const m=B.CrossVV(a,n),l=B.DotVV(a,n);let h=b(m,l);const _=B.MulSV(-1/C,a.SelfSkew(),Si.s_Jd1),c=B.MulSV(1/r,n.SelfSkew(),Si.s_Jd2),u=B.NegV(_,Si.s_J1),d=B.SubVV(_,c,Si.s_J2),g=c;let x=y*B.DotVV(u,u)+p*B.DotVV(d,d)+f*B.DotVV(g,g);if(0===x)continue;x=1/x;let v=h-this.m_as[t];for(;v>e;)h-=2*e,v=h-this.m_as[t];for(;v<-e;)h+=2*e,v=h-this.m_as[t];const S=-this.m_k3*x*v;o.SelfMulAdd(y*S,u),i.SelfMulAdd(p*S,d),s.SelfMulAdd(f*S,g)}}Draw(o){const t=new P(.4,.5,.7);for(let e=0;e<this.m_count-1;++e)o.DrawSegment(this.m_ps[e],this.m_ps[e+1],t)}}Si.s_d=new B,Si.s_d1=new B,Si.s_d2=new B,Si.s_Jd1=new B,Si.s_Jd2=new B,Si.s_J1=new B,Si.s_J2=new B,o.b2Assert=function(o,...t){if(!o)throw new Error(...t)},o.b2Maybe=t,o.b2_maxFloat=1e37,o.b2_epsilon=1e-5,o.b2_epsilon_sq=1e-5*1e-5,o.b2_pi=e,o.b2_maxManifoldPoints=2,o.b2_maxPolygonVertices=8,o.b2_aabbExtension=.1,o.b2_aabbMultiplier=2,o.b2_linearSlop=.008,o.b2_angularSlop=i,o.b2_polygonRadius=.016,o.b2_maxSubSteps=8,o.b2_maxTOIContacts=32,o.b2_velocityThreshold=1,o.b2_maxLinearCorrection=.2,o.b2_maxAngularCorrection=.13962634015955555,o.b2_maxTranslation=2,o.b2_maxTranslationSquared=4,o.b2_maxRotation=1.570796326795,o.b2_maxRotationSquared=2.4674011002726646,o.b2_baumgarte=.2,o.b2_toiBaumgarte=.75,o.b2_invalidParticleIndex=-1,o.b2_maxParticleIndex=2147483647,o.b2_particleStride=.75,o.b2_minParticleWeight=1,o.b2_maxParticlePressure=.25,o.b2_maxParticleForce=.5,o.b2_maxTriadDistance=2,o.b2_maxTriadDistanceSquared=4,o.b2_minParticleSystemBufferCapacity=256,o.b2_barrierCollisionTime=2.5,o.b2_timeToSleep=.5,o.b2_linearSleepTolerance=.01,o.b2_angularSleepTolerance=.03490658503988889,o.b2Alloc=function(o){return null},o.b2Free=function(o){},o.b2Log=function(o,...t){},o.b2Version=s,o.b2_version=y,o.b2_branch="master",o.b2_commit="fbf51801d80fc389d43dc46524520e89043b6faf",o.b2ParseInt=function(o){return parseInt(o,10)},o.b2ParseUInt=function(o){return Math.abs(parseInt(o,10))},o.b2MakeArray=p,o.b2MakeNullArray=function(o){const t=[];for(let e=0;e<o;++e)t.push(null);return t},o.b2MakeNumberArray=f,o.b2_pi_over_180=.017453292519944444,o.b2_180_over_pi=57.29577951307855,o.b2_two_pi=6.28318530718,o.b2Abs=a,o.b2Min=n,o.b2Max=C,o.b2Clamp=r,o.b2Swap=function(o,t){const e=o[0];o[0]=t[0],t[0]=e},o.b2IsValid=m,o.b2Sq=l,o.b2InvSqrt=h,o.b2Sqrt=_,o.b2Pow=c,o.b2DegToRad=function(o){return.017453292519944444*o},o.b2RadToDeg=function(o){return 57.29577951307855*o},o.b2Cos=u,o.b2Sin=d,o.b2Acos=g,o.b2Asin=x,o.b2Atan2=b,o.b2NextPowerOfTwo=function(o){return o|=o>>1&2147483647,o|=o>>2&1073741823,o|=o>>4&268435455,o|=o>>8&16777215,1+(o|=o>>16&65535)},o.b2IsPowerOfTwo=function(o){return o>0&&0==(o&o-1)},o.b2Random=function(){return 2*Math.random()-1},o.b2RandomRange=function(o,t){return(t-o)*Math.random()+o},o.b2Vec2=B,o.b2Vec2_zero=v,o.b2Vec3=S,o.b2Mat22=A,o.b2Mat33=w,o.b2Rot=V,o.b2Transform=M,o.b2Sweep=I,o.b2Color=P,o.b2Draw=class{constructor(){this.m_drawFlags=0}SetFlags(o){this.m_drawFlags=o}GetFlags(){return this.m_drawFlags}AppendFlags(o){this.m_drawFlags|=o}ClearFlags(o){this.m_drawFlags&=~o}},o.b2Timer=D,o.b2Counter=class{constructor(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}GetCount(){return this.m_count}GetMinCount(){return this.m_min_count}GetMaxCount(){return this.m_max_count}ResetCount(){const o=this.m_count;return this.m_count=0,o}ResetMinCount(){this.m_min_count=0}ResetMaxCount(){this.m_max_count=0}Increment(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)}Decrement(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)}},o.b2GrowableStack=L,o.b2BlockAllocator=class{},o.b2StackAllocator=class{},o.b2ContactFeature=po,o.b2ContactID=fo,o.b2ManifoldPoint=ao,o.b2Manifold=no,o.b2WorldManifold=Co,o.b2GetPointStates=function(t,e,i,s){let y;for(y=0;y<i.pointCount;++y){const e=i.points[y].id.key;t[y]=o.b2PointState.b2_removeState;for(let i=0,p=s.pointCount;i<p;++i)if(s.points[i].id.key===e){t[y]=o.b2PointState.b2_persistState;break}}for(;y<2;++y)t[y]=o.b2PointState.b2_nullState;for(y=0;y<s.pointCount;++y){const t=s.points[y].id.key;e[y]=o.b2PointState.b2_addState;for(let s=0,p=i.pointCount;s<p;++s)if(i.points[s].id.key===t){e[y]=o.b2PointState.b2_persistState;break}}for(;y<2;++y)e[y]=o.b2PointState.b2_nullState},o.b2ClipVertex=ro,o.b2RayCastInput=mo,o.b2RayCastOutput=lo,o.b2AABB=ho,o.b2TestOverlapAABB=_o,o.b2ClipSegmentToLine=co,o.b2TestOverlapShape=bo,o.b2DistanceProxy=T,o.b2SimplexCache=F,o.b2DistanceInput=R,o.b2DistanceOutput=k,o.b2ShapeCastInput=class{constructor(){this.proxyA=new T,this.proxyB=new T,this.transformA=new M,this.transformB=new M,this.translationB=new B}},o.b2ShapeCastOutput=class{constructor(){this.point=new B,this.normal=new B,this.lambda=0,this.iterations=0}},o.b2_gjk_reset=function(){o.b2_gjkCalls=0,o.b2_gjkIters=0,o.b2_gjkMaxIters=0},o.b2SimplexVertex=z,o.b2Simplex=q,o.b2Distance=Z,o.b2ShapeCast=function(o,t){o.iterations=0,o.lambda=1,o.normal.SetZero(),o.point.SetZero();const e=t.proxyA,i=t.proxyB,s=C(e.m_radius,.016)+C(i.m_radius,.016),y=t.transformA,p=t.transformB,f=t.translationB,n=H.Set(0,0);let r=0;const m=Q;m.m_count=0;const l=m.m_vertices;let h=e.GetSupport(V.MulTRV(y.q,B.NegV(f,B.s_t1),B.s_t0)),_=M.MulXV(y,e.GetVertex(h),Y),c=i.GetSupport(V.MulTRV(p.q,f,B.s_t0)),u=M.MulXV(p,i.GetVertex(c),K);const d=B.SubVV(_,u,$),g=C(.016,s-.016);let x=0;for(;x<20&&a(d.Length()-g)>.004;){o.iterations+=1,h=e.GetSupport(V.MulTRV(y.q,B.NegV(d,B.s_t1),B.s_t0)),_=M.MulXV(y,e.GetVertex(h),Y),c=i.GetSupport(V.MulTRV(p.q,d,B.s_t0)),u=M.MulXV(p,i.GetVertex(c),K);const t=B.SubVV(_,u,oo);d.Normalize();const s=B.DotVV(d,t),a=B.DotVV(d,f);if(s-g>r*a){if(a<=0)return!1;if(r=(s-g)/a,r>1)return!1;n.Copy(d).SelfNeg(),m.m_count=0}const C=l[m.m_count];switch(C.indexA=c,C.wA.Copy(u).SelfMulAdd(r,f),C.indexB=h,C.wB.Copy(_),C.w.Copy(C.wB).SelfSub(C.wA),C.a=1,m.m_count+=1,m.m_count){case 1:break;case 2:m.Solve2();break;case 3:m.Solve3()}if(3===m.m_count)return!1;m.GetClosestPoint(d),++x}const b=to,v=eo;return m.GetWitnessPoints(b,v),d.LengthSquared()>0&&(n.Copy(d).SelfNeg(),n.Normalize()),o.normal.Copy(n),o.lambda=r,o.iterations=x,!0},o.b2Pair=Ao,o.b2BroadPhase=wo,o.b2PairLessThan=Vo,o.b2TreeNode=vo,o.b2DynamicTree=So,o.b2_toi_reset=function(){o.b2_toiTime=0,o.b2_toiMaxTime=0,o.b2_toiCalls=0,o.b2_toiIters=0,o.b2_toiMaxIters=0,o.b2_toiRootIters=0,o.b2_toiMaxRootIters=0},o.b2TOIInput=Fo,o.b2TOIOutput=zo,o.b2SeparationFunction=qo,o.b2TimeOfImpact=Ho,o.b2CollideCircles=Ko,o.b2CollidePolygonAndCircle=et,o.b2CollidePolygons=At,o.b2CollideEdgeAndCircle=Tt,o.b2CollideEdgeAndPolygon=qt,o.b2MassData=Et,o.b2Shape=Wt,o.b2CircleShape=Zt,o.b2PolygonShape=Ht,o.b2EdgeShape=Qt,o.b2ChainShape=Yt,o.b2Filter=Kt,o.b2FixtureDef=$t,o.b2FixtureProxy=oe,o.b2Fixture=te,o.b2BodyDef=class{constructor(){this.type=o.b2BodyType.b2_staticBody,this.position=new B(0,0),this.angle=0,this.linearVelocity=new B(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}},o.b2Body=ee,o.b2World=di,o.b2DestructionListener=class{SayGoodbyeJoint(o){}SayGoodbyeFixture(o){}SayGoodbyeParticleGroup(o){}SayGoodbyeParticle(o,t){}},o.b2ContactFilter=De,o.b2ContactImpulse=Le,o.b2ContactListener=Te,o.b2QueryCallback=Fe,o.b2RayCastCallback=class{ReportFixture(o,t,e,i){return i}ReportParticle(o,t,e,i,s){return 0}ShouldQueryParticleSystem(o){return!0}},o.b2Island=Ze,o.b2Profile=ke,o.b2TimeStep=ze,o.b2Position=qe,o.b2Velocity=Ee,o.b2SolverData=Je,o.b2ContactManager=Re,o.b2MixFriction=ge,o.b2MixRestitution=xe,o.b2ContactEdge=be,o.b2Contact=Be,o.b2ContactRegister=Pe,o.b2ContactFactory=Ge,o.g_blockSolve=!1,o.b2VelocityConstraintPoint=je,o.b2ContactVelocityConstraint=Ne,o.b2ContactPositionConstraint=Oe,o.b2ContactSolverDef=Ue,o.b2PositionSolverManifold=Xe,o.b2ContactSolver=We,o.b2CircleContact=ve,o.b2PolygonContact=Se,o.b2PolygonAndCircleContact=Ae,o.b2EdgeAndCircleContact=we,o.b2EdgeAndPolygonContact=Ve,o.b2ChainAndCircleContact=Me,o.b2ChainAndPolygonContact=Ie,o.b2Jacobian=class{constructor(){this.linear=new B,this.angularA=0,this.angularB=0}SetZero(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this}Set(o,t,e){return this.linear.Copy(o),this.angularA=t,this.angularB=e,this}},o.b2JointEdge=ie,o.b2JointDef=se,o.b2Joint=ye,o.b2AreaJointDef=class extends se{constructor(){super(o.b2JointType.e_areaJoint),this.bodies=[],this.frequencyHz=0,this.dampingRatio=0}AddBody(o){this.bodies.push(o),1===this.bodies.length?this.bodyA=o:2===this.bodies.length&&(this.bodyB=o)}},o.b2AreaJoint=ae,o.b2DistanceJointDef=pe,o.b2DistanceJoint=fe,o.b2FrictionJointDef=class extends se{constructor(){super(o.b2JointType.e_frictionJoint),this.localAnchorA=new B,this.localAnchorB=new B,this.maxForce=0,this.maxTorque=0}Initialize(o,t,e){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB)}},o.b2FrictionJoint=ne,o.b2GearJointDef=class extends se{constructor(){super(o.b2JointType.e_gearJoint),this.ratio=1}},o.b2GearJoint=Ce,o.b2MotorJointDef=class extends se{constructor(){super(o.b2JointType.e_motorJoint),this.linearOffset=new B(0,0),this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(o,t){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);const e=this.bodyA.GetAngle(),i=this.bodyB.GetAngle();this.angularOffset=i-e}},o.b2MotorJoint=re,o.b2MouseJointDef=class extends se{constructor(){super(o.b2JointType.e_mouseJoint),this.target=new B,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7}},o.b2MouseJoint=me,o.b2PrismaticJointDef=class extends se{constructor(){super(o.b2JointType.e_prismaticJoint),this.localAnchorA=new B,this.localAnchorB=new B,this.localAxisA=new B(1,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0}Initialize(o,t,e,i){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.bodyA.GetLocalVector(i,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},o.b2PrismaticJoint=le,o.b2_minPulleyLength=2,o.b2PulleyJointDef=class extends se{constructor(){super(o.b2JointType.e_pulleyJoint),this.groundAnchorA=new B(-1,1),this.groundAnchorB=new B(1,1),this.localAnchorA=new B(-1,0),this.localAnchorB=new B(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(o,t,e,i,s,y,p){this.bodyA=o,this.bodyB=t,this.groundAnchorA.Copy(e),this.groundAnchorB.Copy(i),this.bodyA.GetLocalPoint(s,this.localAnchorA),this.bodyB.GetLocalPoint(y,this.localAnchorB),this.lengthA=B.DistanceVV(s,e),this.lengthB=B.DistanceVV(y,i),this.ratio=p}},o.b2PulleyJoint=he,o.b2RevoluteJointDef=class extends se{constructor(){super(o.b2JointType.e_revoluteJoint),this.localAnchorA=new B(0,0),this.localAnchorB=new B(0,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(o,t,e){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},o.b2RevoluteJoint=_e,o.b2RopeJointDef=class extends se{constructor(){super(o.b2JointType.e_ropeJoint),this.localAnchorA=new B(-1,0),this.localAnchorB=new B(1,0),this.maxLength=0}},o.b2RopeJoint=ce,o.b2WeldJointDef=class extends se{constructor(){super(o.b2JointType.e_weldJoint),this.localAnchorA=new B,this.localAnchorB=new B,this.referenceAngle=0,this.frequencyHz=0,this.dampingRatio=0}Initialize(o,t,e){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}},o.b2WeldJoint=ue,o.b2WheelJointDef=class extends se{constructor(){super(o.b2JointType.e_wheelJoint),this.localAnchorA=new B(0,0),this.localAnchorB=new B(0,0),this.localAxisA=new B(1,0),this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.frequencyHz=2,this.dampingRatio=.7}Initialize(o,t,e,i){this.bodyA=o,this.bodyB=t,this.bodyA.GetLocalPoint(e,this.localAnchorA),this.bodyB.GetLocalPoint(e,this.localAnchorB),this.bodyA.GetLocalVector(i,this.localAxisA)}},o.b2WheelJoint=de,o.b2ControllerEdge=gi,o.b2Controller=xi,o.b2BuoyancyController=class extends xi{constructor(){super(...arguments),this.normal=new B(0,1),this.offset=0,this.density=0,this.velocity=new B(0,0),this.linearDrag=0,this.angularDrag=0,this.useDensity=!1,this.useWorldGravity=!0,this.gravity=new B(0,0)}Step(o){if(this.m_bodyList){this.useWorldGravity&&this.gravity.Copy(this.m_bodyList.body.GetWorld().GetGravity());for(let o=this.m_bodyList;o;o=o.nextBody){const t=o.body;if(!t.IsAwake())continue;const e=new B,i=new B;let s=0,y=0;for(let o=t.GetFixtureList();o;o=o.m_next){const p=new B,f=o.GetShape().ComputeSubmergedArea(this.normal,this.offset,t.GetTransform(),p);s+=f,e.x+=f*p.x,e.y+=f*p.y;let a=0;a=this.useDensity?o.GetDensity():1,y+=f*a,i.x+=f*p.x*a,i.y+=f*p.y*a}if(e.x/=s,e.y/=s,i.x/=y,i.y/=y,s<1e-5)continue;const p=this.gravity.Clone().SelfNeg();p.SelfMul(this.density*s),t.ApplyForce(p,i);const f=t.GetLinearVelocityFromWorldPoint(e,new B);f.SelfSub(this.velocity),f.SelfMul(-this.linearDrag*s),t.ApplyForce(f,e),t.ApplyTorque(-t.GetInertia()/t.GetMass()*s*t.GetAngularVelocity()*this.angularDrag)}}}Draw(o){const t=100,e=new B,i=new B;e.x=this.normal.x*this.offset+this.normal.y*t,e.y=this.normal.y*this.offset-this.normal.x*t,i.x=this.normal.x*this.offset-this.normal.y*t,i.y=this.normal.y*this.offset+this.normal.x*t;const s=new P(0,0,.8);o.DrawSegment(e,i,s)}},o.b2ConstantAccelController=bi,o.b2ConstantForceController=class extends xi{constructor(){super(...arguments),this.F=new B(0,0)}Step(o){for(let o=this.m_bodyList;o;o=o.nextBody){const t=o.body;t.IsAwake()&&t.ApplyForce(this.F,t.GetWorldCenter())}}Draw(o){}},o.b2GravityController=Bi,o.b2TensorDampingController=vi,o.b2ParticleDef=He,o.b2CalculateParticleIterations=Qe,o.b2ParticleHandle=Ye,o.b2ParticleGroupDef=Ke,o.b2ParticleGroup=$e,o.b2GrowableBuffer=Ci,o.b2FixtureParticleQueryCallback=ri,o.b2ParticleContact=mi,o.b2ParticleBodyContact=li,o.b2ParticlePair=hi,o.b2ParticleTriad=_i,o.b2ParticleSystemDef=ci,o.b2ParticleSystem=ui,o.b2RopeDef=class{constructor(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new B(0,0),this.damping=.1,this.k2=.9,this.k3=.1}},o.b2Rope=Si,Object.defineProperty(o,"__esModule",{value:!0})}(t)},function(o,t,e){"use strict";e.r(t);var i=e(0);class s extends i.b2Draw{constructor(){super(),this.m_ctx=null;let o=i.b2DrawFlags.e_none;o|=i.b2DrawFlags.e_shapeBit,o|=i.b2DrawFlags.e_jointBit,this.SetFlags(o),console.log("debug draw is enabled")}PushTransform(o){const t=this.m_ctx;t&&(t.save(),t.translate(o.p.x,o.p.y),t.rotate(o.q.GetAngle()))}PopTransform(o){const t=this.m_ctx;t&&t.restore()}DrawPolygon(o,t,e){const i=this.m_ctx;if(i){i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let e=1;e<t;e++)i.lineTo(o[e].x,o[e].y);i.closePath(),i.strokeStyle=e.MakeStyleString(1),i.stroke()}}DrawSolidPolygon(o,t,e){const i=this.m_ctx;if(i){i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let e=1;e<t;e++)i.lineTo(o[e].x,o[e].y);i.closePath(),i.fillStyle=e.MakeStyleString(.5),i.fill(),i.strokeStyle=e.MakeStyleString(1),i.stroke()}}DrawCircle(o,t,e){const s=this.m_ctx;s&&(s.beginPath(),s.arc(o.x,o.y,t,0,2*i.b2_pi,!0),s.strokeStyle=e.MakeStyleString(1),s.stroke())}DrawSolidCircle(o,t,e,s){const y=this.m_ctx;if(y){const p=o.x,f=o.y;y.beginPath(),y.arc(p,f,t,0,2*i.b2_pi,!0),y.moveTo(p,f),y.lineTo(p+e.x*t,f+e.y*t),y.fillStyle=s.MakeStyleString(.5),y.fill(),y.strokeStyle=s.MakeStyleString(1),y.stroke()}}DrawParticles(o,t,e,s){const y=this.m_ctx;if(y)if(null!==e)for(let p=0;p<s;++p){const s=o[p],f=e[p];y.fillStyle=f.MakeStyleString(),y.beginPath(),y.arc(s.x,s.y,t,0,2*i.b2_pi,!0),y.fill()}else{y.fillStyle="rgba(255,255,255,0.5)";for(let e=0;e<s;++e){const s=o[e];y.beginPath(),y.arc(s.x,s.y,t,0,2*i.b2_pi,!0),y.fill()}}}DrawSegment(o,t,e){const i=this.m_ctx;i&&(i.beginPath(),i.moveTo(o.x,o.y),i.lineTo(t.x,t.y),i.strokeStyle=e.MakeStyleString(1),i.stroke())}DrawTransform(o){const t=this.m_ctx;t&&(this.PushTransform(o),t.beginPath(),t.moveTo(0,0),t.lineTo(1,0),t.strokeStyle=i.b2Color.RED.MakeStyleString(1),t.stroke(),t.beginPath(),t.moveTo(0,0),t.lineTo(0,1),t.strokeStyle=i.b2Color.GREEN.MakeStyleString(1),t.stroke(),this.PopTransform(o))}DrawPoint(o,t,e){const i=this.m_ctx;if(i){i.fillStyle=e.MakeStyleString(),t*=y.m_zoom;const s=(t/=y.m_extent)/2;i.fillRect(o.x-s,o.y-s,t,t)}}DrawString(o,t,e){const i=this.m_ctx;if(i){i.save(),i.setTransform(1,0,0,1,0,0),i.font="15px DroidSans";const y=s.DrawString_s_color;i.fillStyle=y.MakeStyleString(),i.fillText(e,o,t),i.restore()}}DrawStringWorld(o,t,e){const p=this.m_ctx;if(p){const f=s.DrawStringWorld_s_p.Set(o,t),a=y.m_center;i.b2Vec2.SubVV(f,a,f);const n=y.m_zoom;i.b2Vec2.MulSV(1/n,f,f);const C=.5*y.m_height/y.m_extent;i.b2Vec2.MulSV(C,f,f),f.y*=-1;const r=s.DrawStringWorld_s_cc.Set(.5*p.canvas.width,.5*p.canvas.height);i.b2Vec2.AddVV(f,r,f),p.save(),p.setTransform(1,0,0,1,0,0),p.font="15px DroidSans";const m=s.DrawStringWorld_s_color;p.fillStyle=m.MakeStyleString(),p.fillText(e,f.x,f.y),p.restore()}}DrawAABB(o,t){const e=this.m_ctx;if(e){e.strokeStyle=t.MakeStyleString();const i=o.lowerBound.x,s=o.lowerBound.y,y=o.upperBound.x-o.lowerBound.x,p=o.upperBound.y-o.lowerBound.y;e.strokeRect(i,s,y,p)}}}s.DrawString_s_color=new i.b2Color(.9,.6,.6),s.DrawStringWorld_s_p=new i.b2Vec2,s.DrawStringWorld_s_cc=new i.b2Vec2,s.DrawStringWorld_s_color=new i.b2Color(.5,.9,.5);const y=new class{constructor(){this.m_center=new i.b2Vec2(0,20),this.m_extent=25,this.m_zoom=1,this.m_width=1280,this.m_height=800}ConvertScreenToWorld(o,t){return this.ConvertElementToWorld(o,t)}ConvertWorldToScreen(o,t){return this.ConvertWorldToElement(o,t)}ConvertViewportToElement(o,t){const e=o.x+.5*this.m_width,i=.5*this.m_height-o.y;return t.Set(e,i)}ConvertElementToViewport(o,t){const e=o.x-.5*this.m_width,i=.5*this.m_height-o.y;return t.Set(e,i)}ConvertProjectionToViewport(o,t){const e=t.Copy(o);return i.b2Vec2.MulSV(1/this.m_zoom,e,e),i.b2Vec2.MulSV(.5*this.m_height/this.m_extent,o,o),e}ConvertViewportToProjection(o,t){const e=t.Copy(o);return i.b2Vec2.MulSV(2*this.m_extent/this.m_height,e,e),i.b2Vec2.MulSV(this.m_zoom,e,e),e}ConvertWorldToProjection(o,t){const e=t.Copy(o);return i.b2Vec2.SubVV(e,this.m_center,e),e}ConvertProjectionToWorld(o,t){const e=t.Copy(o);return i.b2Vec2.AddVV(this.m_center,e,e),e}ConvertElementToWorld(o,t){const e=this.ConvertElementToViewport(o,t),i=this.ConvertViewportToProjection(e,t);return this.ConvertProjectionToWorld(i,t)}ConvertWorldToElement(o,t){const e=this.ConvertWorldToProjection(o,t),i=this.ConvertProjectionToViewport(e,t);return this.ConvertViewportToElement(i,t)}ConvertElementToProjection(o,t){const e=this.ConvertElementToViewport(o,t);return this.ConvertViewportToProjection(e,t)}},p={compressionlevel:0,editorsettings:{export:{format:"json",target:"undrdasea_floor.json"}},height:24,infinite:!1,layers:[{id:537,layers:[{id:647,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:13428,offsety:683,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:648,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:12680,offsety:727,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:649,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:12216,offsety:715,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:650,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:11508,offsety:707,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:651,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:11044,offsety:671,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:652,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:7232,offsety:695,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:653,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:6748,offsety:615,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:654,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:6740,offsety:707,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:655,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:2676,offsety:771,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:656,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:3184,offsety:723,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:657,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:2268,offsety:671,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:658,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:232,offsety:671,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:659,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:744,offsety:647,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:660,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:2228,offsety:55,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:634,image:"images/bigrock.png",name:"Image Layer 530",offsetx:6279,offsety:-68,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:635,image:"images/bigrock.png",name:"Copy of Image Layer 530",offsetx:6906,offsety:-53,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:636,image:"images/bigrock.png",name:"Copy of Copy of Image Layer 530",offsetx:6824,offsety:5,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:637,image:"images/bigrock.png",name:"Copy of Copy of Copy of Image Layer 530",offsetx:7054,offsety:32,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:646,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Image Layer 530",offsetx:12947,offsety:166,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:638,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Image Layer 530",offsetx:7154,offsety:-80,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:639,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:6242,offsety:487,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:640,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:5126,offsety:269,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:641,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:2808,offsety:448,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:642,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:11,offsety:412,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:643,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:-89,offsety:-73,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:644,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:2381,offsety:-30,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:645,image:"images/bigrock.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 530",offsetx:11936,offsety:-33,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:502,layers:[{id:461,image:"images/bg4.png",name:"Image Layer 375",offsetx:388,offsety:211,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:462,image:"images/bg4.png",name:"Copy of Image Layer 375",offsetx:478,offsety:338,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:463,image:"images/bg4.png",name:"Copy of Copy of Image Layer 375",offsetx:313,offsety:414,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:464,image:"images/bg4.png",name:"Copy of Copy of Copy of Image Layer 375",offsetx:833,offsety:365,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:465,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Image Layer 375",offsetx:745,offsety:404,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:466,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:1188,offsety:339,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:467,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:1675,offsety:220,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:468,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2054,offsety:333,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:469,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2131,offsety:198,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:470,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:1902,offsety:306,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:471,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2211,offsety:390,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:472,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2351,offsety:305,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:473,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2714,offsety:456,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:474,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2942,offsety:148,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:475,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2766,offsety:203,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:476,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2807,offsety:442,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:477,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:2922,offsety:526,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:478,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:3418,offsety:311,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:479,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:4182,offsety:261,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:480,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:4310,offsety:302,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:481,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:4814,offsety:287,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:482,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:5108,offsety:131,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:484,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:4639,offsety:50,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:485,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:5954,offsety:385,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:486,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:7219,offsety:499,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:487,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:8218,offsety:275,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:488,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:8907,offsety:481,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:489,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:8995,offsety:228,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:490,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:8976,offsety:365,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:491,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:9213,offsety:390,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:492,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:10183,offsety:357,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:493,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:10758,offsety:92,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:494,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:10361,offsety:232,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:495,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:10400,offsety:377,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:496,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:11849,offsety:362,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:497,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:12216,offsety:442,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:498,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:12864,offsety:701,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:499,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:13221,offsety:461,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:500,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:12608,offsety:478,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:501,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:13703,offsety:573,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:483,image:"images/bg4.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 375",offsetx:4513,offsety:334,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"BG4",opacity:.6,type:"group",visible:!0,x:0,y:0},{id:536,layers:[{id:504,image:"images/bg3.png",name:"Copy of Image Layer 416",offsetx:3906,offsety:54,opacity:.7,type:"imagelayer",visible:!0,x:0,y:0},{id:505,image:"images/bg3.png",name:"Copy of Copy of Image Layer 416",offsetx:11522,offsety:462,opacity:.6,type:"imagelayer",visible:!0,x:0,y:0},{id:506,image:"images/bg2.png",name:"Image Layer 418",offsetx:70,offsety:299,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:507,image:"images/bg2.png",name:"Copy of Image Layer 418",offsetx:1020,offsety:299,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:508,image:"images/bg2.png",name:"Copy of Copy of Image Layer 418",offsetx:1797,offsety:151,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:509,image:"images/bg2.png",name:"Copy of Copy of Copy of Image Layer 418",offsetx:3271,offsety:290,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:510,image:"images/bg2.png",name:"Copy of Copy of Copy of Copy of Image Layer 418",offsetx:5422,offsety:196,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:511,image:"images/bg2.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 418",offsetx:9052,offsety:-165,opacity:.6,type:"imagelayer",visible:!0,x:0,y:0},{id:512,image:"images/bg2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 418",offsetx:9976,offsety:247,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:513,image:"images/bg2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 418",offsetx:10935,offsety:222,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:514,image:"images/bg2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 418",offsetx:13067,offsety:577,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:516,image:"images/bg1.png",name:"Image Layer 427",offsetx:9,offsety:351,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:517,image:"images/bg1.png",name:"Copy of Image Layer 427",offsetx:1196,offsety:-27,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:518,image:"images/bg1.png",name:"Copy of Copy of Image Layer 427",offsetx:2673,offsety:321,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:519,image:"images/bg1.png",name:"Copy of Copy of Copy of Image Layer 427",offsetx:3916,offsety:155,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:520,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Image Layer 427",offsetx:4684,offsety:324,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:521,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:6075,offsety:397,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:522,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:8393,offsety:-32,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:523,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:9538,offsety:113,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:524,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:10211,offsety:343,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:525,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:10386,offsety:280,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:526,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:10632,offsety:136,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:527,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:11152,offsety:339,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:528,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:11789,offsety:492,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:529,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:12104,offsety:431,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:530,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:12540,offsety:398,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:531,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:13715,offsety:364,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:532,image:"images/bg1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 427",offsetx:13099,offsety:72,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"BG123",opacity:1,type:"group",visible:!0,x:0,y:0}],name:"Back",opacity:1,type:"group",visible:!0,x:0,y:0},{id:459,layers:[{id:37,layers:[{id:7,image:"images/horizontal.png",name:"Image Layer 1",offsetx:0,offsety:608,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:8,image:"images/horizontal.png",name:"Copy of Image Layer 1",offsetx:0,offsety:704,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:10,image:"images/horizontal.png",name:"Copy of Image Layer 1",offsetx:704,offsety:608,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:9,image:"images/horizontal.png",name:"Copy of Copy of Image Layer 1",offsetx:704,offsety:704,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:12,image:"images/horizontal.png",name:"Copy of Copy of Image Layer 1",offsetx:1408,offsety:608,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:11,image:"images/horizontal.png",name:"Copy of Copy of Copy of Image Layer 1",offsetx:1408,offsety:704,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:14,image:"images/horizontal.png",name:"Copy of Copy of Copy of Image Layer 1",offsetx:2127,offsety:611,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:13,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Image Layer 1",offsetx:2112,offsety:704,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:16,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Image Layer 1",offsetx:3264,offsety:608,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:15,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:3264,offsety:704,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:18,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:3983,offsety:609,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:17,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:3982,offsety:710,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:20,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:4703,offsety:611,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:19,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:4702,offsety:712,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:22,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:5421,offsety:613,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:21,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:5420,offsety:714,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:24,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:6140,offsety:632,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:23,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:6139,offsety:733,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:26,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:7739,offsety:626,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:25,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:7738,offsety:727,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:27,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:8457,offsety:631,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:28,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:8456,offsety:731,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:30,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:9176,offsety:632,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:29,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:9175,offsety:732,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:32,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:9893,offsety:634,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:31,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:9892,offsety:734,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:34,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:10612,offsety:631,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:33,image:"images/horizontal.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 1",offsetx:10611,offsety:731,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Floor",opacity:1,type:"group",visible:!0,x:0,y:0},{id:100,layers:[{id:601,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 493",offsetx:13772,offsety:304,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:603,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 493",offsetx:13776,offsety:-110,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:602,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 493",offsetx:13748,offsety:104,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:599,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 493",offsetx:13676,offsety:498,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:600,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 493",offsetx:13856,offsety:456,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:567,image:"images/pebble.png",name:"Image Layer 470",offsetx:-2,offsety:464,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:568,image:"images/pebble.png",name:"Copy of Image Layer 470",offsetx:50,offsety:466,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:569,image:"images/pebble.png",name:"Copy of Copy of Image Layer 470",offsetx:304,offsety:476,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:570,image:"images/pebble.png",name:"Copy of Copy of Copy of Image Layer 470",offsetx:258,offsety:464,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:571,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Image Layer 470",offsetx:202,offsety:458,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:572,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 470",offsetx:142,offsety:456,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:573,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 470",offsetx:98,offsety:458,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:67,image:"images/up1.png",name:"up",offsetx:484,offsety:528,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:68,image:"images/up1.png",name:"Copy of up",offsetx:1697,offsety:445,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:69,image:"images/up1.png",name:"Copy of Copy of up",offsetx:1504,offsety:508,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:574,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 470",offsetx:20,offsety:284,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:73,image:"images/up1.png",name:"Copy of Copy of Copy of up",offsetx:2116,offsety:567,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:74,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of up",offsetx:2144,offsety:124,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:75,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of up",offsetx:1041,offsety:123,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:76,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:3205,offsety:306,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:77,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:3449,offsety:253,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:78,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:3265,offsety:538,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:79,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:3502,offsety:454,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:80,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:3441,offsety:545,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:81,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:4375,offsety:537,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:82,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:4582,offsety:186,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:83,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:4851,offsety:229,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:84,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:5191,offsety:352,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:85,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:5654,offsety:374,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:86,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:6124,offsety:572,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:87,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:7723,offsety:570,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:88,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:7506,offsety:613,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:89,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:7282,offsety:676,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:90,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:8124,offsety:375,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:91,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:9295,offsety:543,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:92,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:10427,offsety:530,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:93,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:11635,offsety:641,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:94,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:11540,offsety:208,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:95,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:11777,offsety:124,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:97,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:12943,offsety:243,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:98,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:13582,offsety:308,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:99,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:13743,offsety:639,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:96,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of up",offsetx:12736,offsety:269,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:70,image:"images/up1.png",name:"Copy of Copy of Copy of up",offsetx:1268,offsety:562,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:71,image:"images/up1.png",name:"Copy of Copy of Copy of Copy of up",offsetx:823,offsety:625,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:72,image:"images/up1.png",name:"up",offsetx:823,offsety:625,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Up1",opacity:1,type:"group",visible:!0,x:0,y:0},{id:200,layers:[{id:135,image:"images/up2.png",name:"Up2",offsetx:949,offsety:177,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:136,image:"images/up2.png",name:"Copy of Up2",offsetx:876,offsety:225,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:137,image:"images/up2.png",name:"Copy of Copy of Up2",offsetx:1304,offsety:306,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:139,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Up2",offsetx:1572,offsety:194,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:140,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Up2",offsetx:1176,offsety:127,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:141,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:2583,offsety:213,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:142,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:2055,offsety:436,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:143,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:2739,offsety:619,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:144,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:2739,offsety:168,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:145,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:2896,offsety:120,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:146,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3123,offsety:611,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:147,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3219,offsety:248,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:148,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3360,offsety:165,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:149,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3469,offsety:150,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:150,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3541,offsety:175,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:151,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3578,offsety:194,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:152,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3817,offsety:299,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:153,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3842,offsety:240,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:154,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:3654,offsety:439,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:155,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:4273,offsety:502,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:156,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:4888,offsety:241,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:157,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5032,offsety:189,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:158,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:4783,offsety:178,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:159,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:4934,offsety:451,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:160,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5071,offsety:394,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:161,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5354,offsety:431,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:162,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5537,offsety:431,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:163,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5973,offsety:534,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:164,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5808,offsety:381,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:165,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:5859,offsety:381,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:166,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:6298,offsety:587,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:167,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:7097,offsety:678,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:168,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:6731,offsety:636,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:169,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:8018,offsety:427,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:170,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:7923,offsety:502,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:171,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:8339,offsety:242,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:172,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:8402,offsety:217,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:173,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:8819,offsety:548,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:174,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:8930,offsety:113,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:175,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9360,offsety:68,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:176,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9044,offsety:85,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:177,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9717,offsety:192,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:178,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9598,offsety:293,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:179,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9494,offsety:413,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:180,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9535,offsety:478,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:181,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10248,offsety:558,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:182,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:9844,offsety:635,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:183,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10682,offsety:57,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:184,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10565,offsety:111,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:185,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10481,offsety:144,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:186,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10825,offsety:297,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:187,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10686,offsety:393,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:188,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:10569,offsety:465,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:189,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:11412,offsety:645,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:190,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:11211,offsety:522,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:191,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:11282,offsety:544,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:192,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:11342,offsety:596,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:193,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:11839,offsety:607,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:194,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:11940,offsety:586,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:195,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:12184,offsety:129,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:196,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:13011,offsety:390,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:197,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:13311,offsety:303,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:198,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:13111,offsety:250,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:199,image:"images/up2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Up2",offsetx:13935,offsety:609,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:138,image:"images/up2.png",name:"Copy of Copy of Copy of Up2",offsetx:1445,offsety:242,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Up2",opacity:1,type:"group",visible:!0,x:0,y:0},{id:254,layers:[{id:201,image:"images/peak.png",name:"Top",offsetx:928,offsety:531,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:202,image:"images/peak.png",name:"Copy of Top",offsetx:667,offsety:487,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:203,image:"images/peak.png",name:"Copy of Copy of Top",offsetx:1046,offsety:220,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:204,image:"images/peak.png",name:"Copy of Copy of Copy of Top",offsetx:941,offsety:292,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:205,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Top",offsetx:1167,offsety:338,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:206,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Top",offsetx:1067,offsety:315,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:207,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:1285,offsety:153,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:208,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:1746,offsety:497,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:209,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:2077,offsety:148,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:210,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:2457,offsety:224,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:211,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:2226,offsety:185,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:212,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:2342,offsety:194,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:213,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:3092,offsety:309,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:214,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:2839,offsety:645,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:215,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:2935,offsety:677,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:216,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:3082,offsety:664,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:217,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:3865,offsety:220,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:218,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:3750,offsety:429,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:219,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:4212,offsety:412,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:220,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:3940,offsety:268,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:221,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:4153,offsety:495,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:222,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:3845,offsety:594,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:223,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:4658,offsety:234,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:224,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:4950,offsety:170,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:225,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:5331,offsety:354,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:226,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:4999,offsety:483,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:227,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:5430,offsety:486,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:228,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:5663,offsety:446,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:229,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:5935,offsety:439,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:230,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:6845,offsety:637,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:231,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:8494,offsety:219,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:232,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:8783,offsety:463,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:233,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:8723,offsety:384,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:234,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:8650,offsety:300,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:235,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:8849,offsety:80,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:236,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:9133,offsety:123,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:237,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:9253,offsety:90,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:238,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:9806,offsety:181,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:239,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:9889,offsety:261,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:240,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:9956,offsety:329,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:241,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:10040,offsety:405,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:242,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:10126,offsety:492,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:243,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:10227,offsety:65,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:244,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:10344,offsety:134,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:245,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:10956,offsety:261,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:246,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:11100,offsety:409,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:247,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:11353,offsety:558,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:248,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:12060,offsety:568,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:249,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:12240,offsety:340,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:250,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:12340,offsety:96,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:251,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:12855,offsety:323,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:252,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:13235,offsety:262,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:253,image:"images/peak.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Top",offsetx:13422,offsety:322,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Top",opacity:1,type:"group",visible:!0,x:0,y:0},{id:306,layers:[{id:255,image:"images/down1.png",name:"",offsetx:858,offsety:517,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:256,image:"images/down1.png",name:"Copy of ",offsetx:781,offsety:504,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:257,image:"images/down1.png",name:"Copy of Copy of ",offsetx:181,offsety:606,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:258,image:"images/down1.png",name:"Copy of Copy of Copy of ",offsetx:486,offsety:170,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:259,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of ",offsetx:1005,offsety:293,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:260,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of ",offsetx:1402,offsety:169,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:261,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:1553,offsety:210,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:262,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:1261,offsety:339,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:263,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:1857,offsety:515,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:264,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2218,offsety:458,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:265,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2335,offsety:485,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:266,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2454,offsety:521,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:267,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2582,offsety:558,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:268,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2327,offsety:535,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:269,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2291,offsety:184,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:270,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:3024,offsety:124,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:271,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:3515,offsety:159,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:272,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4063,offsety:301,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:273,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4167,offsety:346,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:274,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4124,offsety:386,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:275,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:3665,offsety:531,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:276,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4435,offsety:244,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:277,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4522,offsety:241,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:278,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4622,offsety:545,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:279,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4946,offsety:194,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:280,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5257,offsety:444,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:282,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5118,offsety:519,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:283,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5577,offsety:540,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:284,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5846,offsety:528,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:285,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:6475,offsety:590,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:286,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:6979,offsety:655,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:287,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:7260,offsety:683,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:288,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:7509,offsety:672,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:289,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8602,offsety:247,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:290,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8761,offsety:443,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:291,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9211,offsety:97,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:292,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9952,offsety:295,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:293,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10242,offsety:535,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:294,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10369,offsety:98,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:295,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10790,offsety:393,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:296,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11226,offsety:498,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:297,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11506,offsety:665,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:298,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12002,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:299,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12204,offsety:599,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:300,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12768,offsety:373,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:301,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12993,offsety:324,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:302,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12888,offsety:444,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:303,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:13180,offsety:355,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:304,image:"images/down1.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:13521,offsety:327,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Down1",opacity:1,type:"group",visible:!0,x:0,y:0},{id:355,layers:[{id:307,image:"images/down2.png",name:"",offsetx:673,offsety:505,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:308,image:"images/down2.png",name:"Copy of ",offsetx:1181,offsety:266,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:309,image:"images/down2.png",name:"Copy of Copy of ",offsetx:1282,offsety:235,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:310,image:"images/down2.png",name:"Copy of Copy of Copy of ",offsetx:1029,offsety:578,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:311,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of ",offsetx:1602,offsety:651,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:312,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of ",offsetx:1927,offsety:442,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:313,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2038,offsety:442,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:314,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:1955,offsety:522,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:315,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2211,offsety:486,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:316,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2680,offsety:578,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:317,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:3091,offsety:711,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:318,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2846,offsety:124,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:319,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2381,offsety:136,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:320,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2202,offsety:201,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:321,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:2512,offsety:175,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:322,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4034,offsety:365,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:323,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4110,offsety:452,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:324,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4770,offsety:282,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:325,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4751,offsety:554,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:326,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4851,offsety:570,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:327,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5367,offsety:532,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:328,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5560,offsety:552,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:329,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:6327,offsety:575,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:330,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:7051,offsety:663,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:331,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:7618,offsety:680,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:332,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8079,offsety:532,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:333,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8575,offsety:305,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:334,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8719,offsety:533,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:335,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8715,offsety:408,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:336,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9341,offsety:92,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:337,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10047,offsety:465,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:338,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10611,offsety:79,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:339,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10512,offsety:87,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:340,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10389,offsety:90,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:341,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11049,offsety:357,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:342,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11160,offsety:516,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:343,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11281,offsety:649,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:344,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10700,offsety:546,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:345,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11791,offsety:214,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:346,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12023,offsety:193,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:347,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12124,offsety:129,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:348,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12316,offsety:625,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:349,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12427,offsety:654,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:350,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12575,offsety:697,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:351,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12995,offsety:363,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:352,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:13180,offsety:350,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:353,image:"images/down2.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:13651,offsety:689,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Down2",opacity:1,type:"group",visible:!0,x:0,y:0},{id:591,image:"images/pillar.png",name:"Image Layer 493",offsetx:10866,offsety:88,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:596,image:"images/pillar.png",name:"Copy of Copy of Copy of Image Layer 493",offsetx:11958,offsety:234,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:597,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Image Layer 493",offsetx:11964,offsety:-60,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:598,image:"images/pillar.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 493",offsetx:12496,offsety:-64,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:594,image:"images/pillar.png",name:"Copy of Image Layer 493",offsetx:11872,offsety:408,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:595,image:"images/pillar.png",name:"Copy of Copy of Image Layer 493",offsetx:12070,offsety:394,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:592,image:"images/pillar.png",name:"Copy of Image Layer 493",offsetx:10996,offsety:82,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:563,image:"images/up1.png",name:"Copy of up",offsetx:11905,offsety:168,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:564,image:"images/up1.png",name:"Copy of Copy of up",offsetx:12547,offsety:94,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:565,image:"images/up1.png",name:"Copy of Copy of Copy of up",offsetx:12261,offsety:148,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:386,layers:[{id:357,image:"images/middle.png",name:"",offsetx:53,offsety:609,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:358,image:"images/middle.png",name:"Copy of ",offsetx:1244,offsety:182,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:359,image:"images/middle.png",name:"Copy of Copy of ",offsetx:2031,offsety:509,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:360,image:"images/middle.png",name:"Copy of Copy of Copy of ",offsetx:2252,offsety:538,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:361,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of ",offsetx:2449,offsety:113,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:362,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of ",offsetx:2569,offsety:109,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:363,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:3380,offsety:559,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:364,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:3799,offsety:413,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:365,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4004,offsety:440,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:366,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:4520,offsety:551,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:367,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5143,offsety:450,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:368,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:5699,offsety:502,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:369,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:6431,offsety:607,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:370,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8136,offsety:444,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:371,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8369,offsety:317,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:372,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:8441,offsety:445,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:373,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9105,offsety:607,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:374,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9686,offsety:287,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:375,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9562,offsety:428,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:376,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:9846,offsety:456,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:377,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10774,offsety:377,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:378,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:10883,offsety:437,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:379,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:11879,offsety:599,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:380,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12123,offsety:636,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:381,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12619,offsety:711,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:382,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:12871,offsety:266,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:383,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:13380,offsety:686,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:384,image:"images/middle.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of ",offsetx:13156,offsety:705,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Middle",opacity:1,type:"group",visible:!0,x:0,y:0},{id:458,layers:[{id:387,image:"images/coral.png",name:"small",offsetx:0,offsety:120,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:388,image:"images/coral.png",name:"Copy of small",offsetx:63,offsety:123,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:389,image:"images/coral.png",name:"Copy of Copy of small",offsetx:282,offsety:82,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:391,image:"images/coral.png",name:"Copy of Copy of Copy of small",offsetx:63,offsety:277,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:392,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of small",offsetx:3,offsety:276,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:393,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of small",offsetx:651,offsety:197,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:394,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:467,offsety:193,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:395,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:486,offsety:220,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:396,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:618,offsety:215,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:397,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:591,offsety:184,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:398,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:550,offsety:179,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:399,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:954,offsety:527,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:400,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1618,offsety:200,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:401,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1559,offsety:192,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:402,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1819,offsety:207,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:403,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1770,offsety:207,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:404,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1741,offsety:206,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:405,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1738,offsety:229,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:406,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:1775,offsety:221,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:407,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:2466,offsety:133,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:408,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:2561,offsety:246,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:409,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:2940,offsety:133,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:410,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3052,offsety:202,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:411,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3123,offsety:123,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:412,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3187,offsety:120,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:413,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3156,offsety:140,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:414,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3149,offsety:161,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:415,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3209,offsety:138,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:416,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:2884,offsety:439,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:417,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:2989,offsety:411,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:418,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3085,offsety:388,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:419,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3049,offsety:412,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:420,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:2934,offsety:429,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:421,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:3577,offsety:470,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:422,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:4446,offsety:556,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:423,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:4510,offsety:265,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:424,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:4830,offsety:188,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:425,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:4569,offsety:323,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:426,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:4645,offsety:328,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:427,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:5084,offsety:188,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:428,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:5209,offsety:196,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:429,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:5289,offsety:201,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:430,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:5206,offsety:220,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:431,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:5251,offsety:213,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:432,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:5206,offsety:244,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:433,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:6290,offsety:118,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:434,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:7144,offsety:672,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:435,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:7739,offsety:114,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:436,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:9057,offsety:249,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:437,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:9104,offsety:241,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:438,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:9067,offsety:233,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:439,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:9e3,offsety:235,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:440,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:9494,offsety:81,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:441,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:10463,offsety:555,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:442,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11321,offsety:102,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:443,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11266,offsety:93,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:444,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11501,offsety:288,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:445,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11553,offsety:256,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:446,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11878,offsety:135,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:447,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11901,offsety:222,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:448,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:12504,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:449,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:11818,offsety:456,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:450,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:12497,offsety:435,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:451,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:12413,offsety:406,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:452,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:12652,offsety:331,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:453,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:12703,offsety:323,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:454,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:12698,offsety:350,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:455,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:13403,offsety:439,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:456,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:13552,offsety:438,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:457,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of small",offsetx:13824,offsety:321,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:390,image:"images/coral.png",name:"Copy of Copy of Copy of small",offsetx:238,offsety:99,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:593,image:"images/coral.png",name:"Copy of Copy of Copy of Copy of small",offsetx:11092,offsety:303,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Small",opacity:1,type:"group",visible:!0,x:0,y:0},{id:561,layers:[{id:538,image:"images/smalla.png",name:"Image Layer 444",offsetx:104,offsety:128,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:539,image:"images/smalla.png",name:"Copy of Image Layer 444",offsetx:185,offsety:119,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:540,image:"images/smalla.png",name:"Copy of Copy of Image Layer 444",offsetx:184,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:541,image:"images/smalla.png",name:"Copy of Copy of Copy of Image Layer 444",offsetx:1,offsety:298,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:542,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Image Layer 444",offsetx:1,offsety:443,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:543,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:101,offsety:443,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:544,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:3008,offsety:419,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:545,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:4495,offsety:246,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:546,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:4991,offsety:201,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:547,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:5256,offsety:374,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:548,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:5892,offsety:386,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:549,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:6868,offsety:651,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:550,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:11243,offsety:119,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:551,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:11643,offsety:323,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:552,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:12771,offsety:119,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:553,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:12726,offsety:136,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:554,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:12686,offsety:152,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:555,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:13688,offsety:131,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:556,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:13944,offsety:140,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:557,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:13975,offsety:125,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:558,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:13972,offsety:290,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:559,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:13929,offsety:309,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:560,image:"images/smalla.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 444",offsetx:13878,offsety:158,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Group 13",opacity:1,type:"group",visible:!0,x:0,y:0},{id:575,image:"images/pebble.png",name:"Image Layer 478",offsetx:182,offsety:120,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:576,image:"images/pebble.png",name:"Copy of Image Layer 478",offsetx:552,offsety:200,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:577,image:"images/pebble.png",name:"Copy of Copy of Image Layer 478",offsetx:126,offsety:468,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:578,image:"images/pebble.png",name:"Copy of Copy of Copy of Image Layer 478",offsetx:1030,offsety:254,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:579,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Image Layer 478",offsetx:6344,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:580,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:7724,offsety:144,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:581,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:10862,offsety:92,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:582,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:10474,offsety:158,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:583,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:11226,offsety:98,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:584,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:12232,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:585,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:12086,offsety:128,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:586,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:12728,offsety:158,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:587,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:12764,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:588,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:12548,offsety:130,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:589,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:13752,offsety:136,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:604,image:"images/pebble.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Image Layer 478",offsetx:13752,offsety:136,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:605,image:"images/linear.png",name:"linear",offsetx:96,offsety:458,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:606,image:"images/linear.png",name:"Copy of linear",offsetx:6366,offsety:124,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:607,image:"images/linear.png",name:"Copy of Copy of linear",offsetx:6418,offsety:150,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:608,image:"images/linear.png",name:"Copy of Copy of Copy of linear",offsetx:6606,offsety:122,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:609,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of linear",offsetx:6832,offsety:126,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:610,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of linear",offsetx:7034,offsety:126,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:611,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7222,offsety:126,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:612,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7434,offsety:128,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:613,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7534,offsety:136,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:614,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7382,offsety:156,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:615,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:6984,offsety:154,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:616,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:6712,offsety:150,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:617,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7156,offsety:150,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:618,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7270,offsety:168,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:619,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:6586,offsety:154,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:620,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:7496,offsety:160,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:621,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:10722,offsety:146,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:622,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:11682,offsety:178,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:623,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:12408,offsety:166,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:624,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:13548,offsety:546,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:625,image:"images/linear.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of linear",offsetx:13402,offsety:576,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:626,image:"images/pebble.png",name:"Image Layer 528",offsetx:13310,offsety:610,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:627,image:"images/pebble.png",name:"Copy of Image Layer 528",offsetx:13364,offsety:602,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:661,image:"images/single_coral.png",name:"single coral",offsetx:184,offsety:-96,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:662,image:"images/single_coral.png",name:"Copy of single coral",offsetx:1640,offsety:-4,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:663,image:"images/single_coral.png",name:"Copy of Copy of single coral",offsetx:2884,offsety:552,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:664,image:"images/single_coral.png",name:"Copy of Copy of Copy of single coral",offsetx:3544,offsety:-32,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:665,image:"images/single_coral.png",name:"Copy of Copy of Copy of Copy of single coral",offsetx:5032,offsety:0,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:666,image:"images/single_coral.png",name:"Copy of Copy of Copy of Copy of Copy of single coral",offsetx:7116,offsety:472,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:667,image:"images/single_coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of single coral",offsetx:10920,offsety:-104,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:668,image:"images/single_coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of single coral",offsetx:12336,offsety:-44,opacity:1,type:"imagelayer",visible:!0,x:0,y:0},{id:669,image:"images/single_coral.png",name:"Copy of Copy of Copy of Copy of Copy of Copy of Copy of Copy of single coral",offsetx:13372,offsety:132,opacity:1,type:"imagelayer",visible:!0,x:0,y:0}],name:"Front",opacity:1,type:"group",visible:!0,x:0,y:0},{draworder:"topdown",id:5,name:"Vectors",objects:[{height:0,id:1,name:"",polygon:[{x:-5.69697,y:-64.97},{x:186.303,y:-64.97},{x:282.303,y:-96.97},{x:346.303,y:-96.97},{x:282.303,y:-32.97},{x:186.303,y:-32.97},{x:-5.69697,y:-32.97}],rotation:0,type:"",visible:!0,width:0,x:5.69697,y:192.97},{height:0,id:2,name:"",polygon:[{x:0,y:0},{x:32,y:-40},{x:160,y:-25.3333},{x:268,y:13.3333},{x:217.333,y:41.3333},{x:133.333,y:60},{x:28,y:37.3333}],rotation:0,type:"",visible:!0,width:0,x:467.03,y:212.97},{height:0,id:4,name:"",polygon:[{x:-.363636,y:-31.272},{x:93.3333,y:-31.636},{x:129.333,y:-22.3027},{x:129.333,y:-.9693},{x:63.6364,y:.728},{x:-.363636,y:.728}],rotation:0,type:"",visible:!0,width:0,x:.363636,y:319.636},{height:0,id:6,name:"",polygon:[{x:0,y:0},{x:480,y:0},{x:736,y:-96},{x:832,y:-96},{x:1024,y:-64},{x:1216,y:32},{x:1920,y:-160},{x:2208,y:-160},{x:2816,y:0},{x:3107.03,y:124.97},{x:3264,y:0},{x:3584,y:-128},{x:3808,y:-160},{x:3872,y:-288},{x:3936,y:-352},{x:4e3,y:-352},{x:4288,y:-224},{x:4416,y:-96},{x:4480,y:-32},{x:4576,y:-64},{x:4928,y:-32},{x:5056,y:-128},{x:5248,y:-224},{x:5440,y:-256},{x:5568,y:-96},{x:5696,y:-192},{x:5888,y:-224},{x:6016,y:-224},{x:6176,y:0},{x:6336,y:-32},{x:7392,y:96},{x:7936,y:-32},{x:8128,y:-160},{x:8288,y:-224},{x:8416,y:-352},{x:8512,y:-384},{x:8608,y:-384},{x:8768,y:-288},{x:8928,y:-128},{x:9024,y:32},{x:9280,y:0},{x:9408,y:-32},{x:9536,y:-96},{x:9792,y:-384},{x:9856,y:-416},{x:9952,y:-384},{x:10240,y:-96},{x:10368,y:-32},{x:10592,y:-64},{x:10720,y:-160},{x:10944,y:-288},{x:11072,y:-320},{x:11136,y:-288},{x:11296,y:-96},{x:11424,y:-64},{x:11619,y:92.9697},{x:12128,y:-32},{x:12384,y:32},{x:12608,y:96},{x:13024,y:128},{x:13664,y:96},{x:14016,y:32},{x:14080,y:0},{x:14080,y:160},{x:0,y:160}],rotation:0,type:"",visible:!0,width:0,x:0,y:608},{height:0,id:7,name:"",polygon:[{x:0,y:0},{x:160,y:0},{x:352,y:32},{x:416,y:64},{x:192,y:64},{x:0,y:64}],rotation:0,type:"",visible:!0,width:0,x:0,y:448},{height:0,id:8,name:"",polygon:[{x:0,y:0},{x:192,y:-160},{x:416,y:-224},{x:640,y:-160},{x:1024,y:-128},{x:640,y:64},{x:512,y:128},{x:320,y:128},{x:128,y:96}],rotation:0,type:"",visible:!0,width:0,x:864,y:352},{height:0,id:9,name:"",polygon:[{x:0,y:0},{x:128,y:-96},{x:512,y:-128},{x:768,y:-128},{x:1152,y:-128},{x:1216,y:-96},{x:992,y:0},{x:544,y:128},{x:160,y:64}],rotation:0,type:"",visible:!0,width:0,x:2080,y:256},{height:0,id:10,name:"",polygon:[{x:0,y:0},{x:-64,y:32},{x:512,y:-32},{x:768,y:-96},{x:832,y:-192},{x:768,y:-256},{x:672,y:-288},{x:576,y:-288},{x:256,y:-96}],rotation:0,type:"",visible:!0,width:0,x:2944,y:448},{height:0,id:11,name:"",polygon:[{x:0,y:0},{x:416,y:-64},{x:800,y:-64},{x:960,y:-32},{x:544,y:160},{x:160,y:96}],rotation:0,type:"",visible:!0,width:0,x:4416,y:256},{height:0,id:12,name:"",polygon:[{x:0,y:0},{x:1536,y:0},{x:1472,y:64},{x:1216,y:96},{x:160,y:64}],rotation:0,type:"",visible:!0,width:0,x:6272,y:128},{height:0,id:13,name:"",polygon:[{x:0,y:0},{x:96,y:-32},{x:352,y:-64},{x:736,y:-64},{x:640,y:64},{x:384,y:128},{x:128,y:128}],rotation:0,type:"",visible:!0,width:0,x:8832,y:160},{height:0,id:14,name:"",polygon:[{x:0,y:0},{x:960,y:0},{x:1088,y:32},{x:832,y:64},{x:608,y:64},{x:352,y:160},{x:192,y:224},{x:96,y:192},{x:-128,y:64}],rotation:0,type:"",visible:!0,width:0,x:10336,y:96},{height:0,id:15,name:"",polygon:[{x:0,y:0},{x:224,y:-128},{x:416,y:-192},{x:1408,y:-192},{x:1280,y:-128},{x:1024,y:-64},{x:608,y:0},{x:192,y:32}],rotation:0,type:"",visible:!0,width:0,x:11488,y:320},{height:0,id:16,name:"",polygon:[{x:0,y:0},{x:320,y:-64},{x:544,y:-96},{x:736,y:-32},{x:768,y:0},{x:192,y:0}],rotation:0,type:"",visible:!0,width:0,x:11808,y:480},{height:0,id:17,name:"",polygon:[{x:0,y:0},{x:288,y:160},{x:416,y:224},{x:512,y:192},{x:608,y:96},{x:704,y:128},{x:960,y:128},{x:1440,y:-32},{x:1440,y:-64},{x:992,y:0},{x:608,y:-96},{x:224,y:-64}],rotation:0,type:"",visible:!0,width:0,x:12640,y:352},{height:0,id:18,name:"",polygon:[{x:0,y:0},{x:704,y:-160},{x:800,y:-192},{x:800,y:-128},{x:576,y:-64}],rotation:0,type:"",visible:!0,width:0,x:13280,y:640},{height:0,id:20,name:"",polygon:[{x:0,y:64},{x:-192,y:64},{x:-386,y:61},{x:-384,y:32},{x:-256,y:0},{x:-96,y:0},{x:0,y:32}],rotation:180,type:"",visible:!0,width:0,x:13696,y:192}],opacity:1,type:"objectgroup",visible:!0,x:0,y:0}],nextlayerid:670,nextobjectid:22,orientation:"orthogonal",renderorder:"right-up",tiledversion:"1.3.2",tileheight:32,tilesets:[],tilewidth:32,type:"map",version:1.2,width:440};class f{constructor(o,t,e,i){this.x=o,this.y=t,this.source=e,this.tag=i}}class a{constructor(){this.debugDraw=new s;const o=new i.b2Vec2(0,-10);this.world=new i.b2World(o),this.world.SetAllowSleeping(!0),this.world.SetWarmStarting(!0),this.world.SetDebugDraw(this.debugDraw),this.camera=y,this.camera.m_zoom=10,this.viewport=document.getElementById("viewport"),this.context=this.viewport.getContext("2d"),this.debugDraw.m_ctx=this.context,this.images=[],document.querySelectorAll("img").forEach(o=>this.images.push(o)),this.assets.back=[],this.assets.front=[],this.setupBoundaries(),p.layers.forEach(o=>this.getImageAssets(o,!1)),this.addMe()}addMePartAt(o,t){const e=new i.b2CircleShape;e.m_radius=20;const s=new i.b2FixtureDef;s.shape=e,s.density=1,s.friction=.001;const y=new i.b2BodyDef;y.type=i.b2BodyType.b2_dynamicBody,y.position.Set(o,t);const p=this.world.CreateBody(y);return p.CreateFixture(s),p}addMe(){let o=this.addMePartAt(100,200),t=this.addMePartAt(70,200);const e=new i.b2DistanceJointDef;e.Initialize(o,t,o.GetWorldCenter(),t.GetWorldCenter()),this.world.CreateJoint(e),this.me=[t,o]}getImageAssets(o,t){var e=t;"Back"==o.name?e=!0:"Front"==o.name&&(e=!1),null!=o.image&&null!=o.offsetx&&null!=o.offsety&&this.images.forEach(t=>{let i=t.src.split("/").pop();if(o.image.endsWith(i)){let i=new f(o.offsetx,o.offsety,o.image,t);e?this.assets.back.push(i):this.assets.front.push(i)}}),"group"==o.type&&null!=o.layers&&o.layers.forEach(o=>this.getImageAssets(o,e))}setupBoundaries(){p.layers.forEach(o=>{null!=o.objects&&o.objects.forEach(o=>{let t=o.polygon[0],e=null;o.polygon.forEach(i=>{e=t,t=i,null!=t&&null!=e&&this.addFixture(t.x+o.x,t.y+o.y,e.x+o.x,e.y+o.y)}),e=o.polygon[0],this.addFixture(t.x+o.x,t.y+o.y,e.x+o.x,e.y+o.y)})})}addFixture(o,t,e,s){const y=new i.b2BodyDef;let p=this.world.CreateBody(y);const f=new i.b2EdgeShape;f.Set(new i.b2Vec2(o,screen.height-t),new i.b2Vec2(e,screen.height-s)),p.CreateFixture(f,0)}tick(){for(var o=0;o<3;o++)this.world.Step(1/n*2,16,6,6),this.me[1].ApplyLinearImpulse({x:3e3,y:0},this.me[1].GetWorldCenter()),this.me.forEach(o=>{let t=o.GetPosition();o.SetPosition({x:t.x%14080,y:t.y})});this.camera.m_center=this.me[0].GetPosition()}drawDebug(){this.world.DrawDebugData()}draw(){this.assets.back.forEach(o=>{this.context.drawImage(o.tag,o.x,o.y)})}}const n=60;class C{constructor(){this.fps_frames=0,this.time_last=null,this.fps_time=0,this.fps=0,this.world=new a,this.camera=y}loop(o){this.time_last=this.time_last||o;let t=o-this.time_last;this.time_last=o,t>1e3&&(t=1e3),this.fps_time+=t,this.fps_frames++,this.fps_time>=500&&(this.fps=1e3*this.fps_frames/this.fps_time,this.fps_frames=0,this.fps_time=0,document.title=this.fps.toFixed(1).toString()),t>0&&(C.shared().tick(),C.shared().draw())}static shared(){return C.instance||(C.instance=new C),C.instance}boot(){console.log("booting engine from singleton")}tick(){this.world.tick()}draw(){const o=this.world.context;o.fillStyle="#35CDC2",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.save(),o.translate(.5*o.canvas.width,.5*o.canvas.height),o.scale(1,-1);const t=this.world.camera,e=.5*t.m_height/t.m_extent;o.scale(e,e),o.scale(1/t.m_zoom,1/t.m_zoom),o.translate(-t.m_center.x,-t.m_center.y),this.world.drawDebug(),o.scale(1,-1),o.translate(0,-t.m_height),this.world.draw(),o.restore()}}C.instance=null,window.requestAnimationFrame((function o(t){window.requestAnimationFrame(o),C.shared().loop(t)}))}]);